<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-specification/xlang_serialization_spec" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Xlang 序列化格式 | Apache Fory™</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://fory.apache.org/zh-CN/docs/next/specification/xlang_serialization_spec"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" http-equiv="Content-Security-Policy" content="frame-src &#x27;self&#x27; https://ghbtns.com/;"><meta data-rh="true" property="og:image" content="https://fory.apache.org/img/logo.png"><meta data-rh="true" property="og:image:width" content="1500"><meta data-rh="true" property="og:image:height" content="1500"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://fory.apache.org/img/logo.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Xlang 序列化格式 | Apache Fory™"><meta data-rh="true" name="description" content="跨语言序列化规范"><meta data-rh="true" property="og:description" content="跨语言序列化规范"><link data-rh="true" rel="icon" href="/zh-CN/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fory.apache.org/zh-CN/docs/next/specification/xlang_serialization_spec"><link data-rh="true" rel="alternate" href="https://fory.apache.org/docs/next/specification/xlang_serialization_spec" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://fory.apache.org/zh-CN/docs/next/specification/xlang_serialization_spec" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://fory.apache.org/docs/next/specification/xlang_serialization_spec" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Apache Fory™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Apache Fory™ Atom Feed">




<script>"fury.apache.org"===window.location.host&&(window.location.href="https://fory.apache.org"),function(){for(var o=window.location.pathname,a=["guide","introduction","start"],n=0;n<a.length;n++){var t=a[n],i=new RegExp("^((?:/[a-z]{2}-[A-Z]{2})?/docs(?:/(?:next|[0-9]+.[0-9]+))?)/docs/"+t+"(/.*)?$"),c=o.match(i);if(c){var r=c[1]+"/"+t+(c[2]||"");return void window.location.replace(r+window.location.search+window.location.hash)}}}()</script><link rel="stylesheet" href="/zh-CN/assets/css/styles.66efb2f1.css">
<script src="/zh-CN/assets/js/runtime~main.8f4693ed.js" defer="defer"></script>
<script src="/zh-CN/assets/js/main.8f5dba6c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><div class="navbar__logo"><img src="/zh-CN/img/fory-logo-light.png" alt="Fory Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh-CN/img/fory-logo-dark.png" alt="Fory Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-CN/docs/next/introduction/overview">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-CN/docs/next/specification/java_serialization_spec">规范</a><a class="navbar__item navbar__link" href="/zh-CN/docs/next/community/">社区</a><a class="navbar__item navbar__link" href="/zh-CN/user">Users</a><a class="navbar__item navbar__link" href="/zh-CN/download">下载</a><a class="navbar__item navbar__link" href="/zh-CN/blog">博客</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">基金会</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">许可证</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">事件</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">隐私</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">安全</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">赞助</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">感谢</a></li><li><a href="https://www.apache.org/foundation/policies/conduct.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">行为准则</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh-CN/docs/next/introduction/overview">dev</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-CN/docs/next/specification/xlang_serialization_spec">dev</a></li><li><a class="dropdown__link" href="/zh-CN/docs/specification/xlang_serialization_spec">0.15</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.14/specification/xlang_serialization_spec">0.14</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.13/specification/xlang_serialization_spec">0.13</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.12/specification/xlang_serialization_spec">0.12</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.11/specification/xlang_serialization_spec">0.11</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.10/specification/xlang_serialization_spec">0.10</a></li></ul></div><a href="https://github.com/apache/fory" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/next/specification/xlang_serialization_spec" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/zh-CN/docs/next/specification/xlang_serialization_spec" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-CN/docs/next/specification/java_serialization_spec">Java 序列化格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-CN/docs/next/specification/row_format_spec">Row 格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/zh-CN/docs/next/specification/xlang_serialization_spec">Xlang 序列化格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-CN/docs/next/specification/xlang_type_mapping">Xlang 类型映射</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-CN/docs/next/specification/xlang_implementation_guide">Xlang 实现指南</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Apache Fory™<!-- --> <b>dev</b> 版尚未发行的文档。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh-CN/docs/specification/xlang_serialization_spec">最新版本</a></b> (<!-- -->0.15<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-CN/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Xlang 序列化格式</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：dev</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Xlang 序列化格式</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="跨语言序列化规范">跨语言序列化规范<a href="#跨语言序列化规范" class="hash-link" aria-label="跨语言序列化规范的直接链接" title="跨语言序列化规范的直接链接">​</a></h2>
<p>本文定义 Apache Fory xlang 二进制协议的通用线格式，适用于多语言互操作场景。</p>
<p>目标：</p>
<ul>
<li>二进制布局跨语言稳定</li>
<li>支持引用跟踪、类型元信息和 schema 演进</li>
<li>在流式序列化中支持增量写入共享元信息</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="类型系统">类型系统<a href="#类型系统" class="hash-link" aria-label="类型系统的直接链接" title="类型系统的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据类型">数据类型<a href="#数据类型" class="hash-link" aria-label="数据类型的直接链接" title="数据类型的直接链接">​</a></h3>
<p>xlang 类型分为：</p>
<ul>
<li>基础类型：bool、整数、浮点、string、binary</li>
<li>容器类型：list、set、map、array</li>
<li>结构类型：enum、struct、union、ext</li>
<li>时间类型：duration、timestamp、date</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="polymorphisms">Polymorphisms<a href="#polymorphisms" class="hash-link" aria-label="Polymorphisms的直接链接" title="Polymorphisms的直接链接">​</a></h3>
<p>协议支持多态对象。解码端可依据 type meta 判断运行时真实类型，并选择对应 serializer。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-disambiguation">Type disambiguation<a href="#type-disambiguation" class="hash-link" aria-label="Type disambiguation的直接链接" title="Type disambiguation的直接链接">​</a></h3>
<p>当某语言类型可映射到多个 Fory 类型（如 fixed/varint/tagged 整数）时，必须通过字段元信息或类型注解消歧。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-id">Type ID<a href="#type-id" class="hash-link" aria-label="Type ID的直接链接" title="Type ID的直接链接">​</a></h3>
<p>类型由 <code>internal_type_id</code> 与（可选）<code>user_type_id</code> 共同表达：</p>
<ul>
<li>内建类型通常直接由 internal ID 唯一表示</li>
<li>用户类型通过 internal kind + user ID（或命名类型）表示</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="internal-type-id-table">Internal Type ID Table<a href="#internal-type-id-table" class="hash-link" aria-label="Internal Type ID Table的直接链接" title="Internal Type ID Table的直接链接">​</a></h4>
<p>核心 internal IDs（示例）：</p>
<table><thead><tr><th>ID</th><th>类型</th></tr></thead><tbody><tr><td>1</td><td>bool</td></tr><tr><td>2-20</td><td>各类数字类型</td></tr><tr><td>21</td><td>string</td></tr><tr><td>22</td><td>list</td></tr><tr><td>23</td><td>set</td></tr><tr><td>24</td><td>map</td></tr><tr><td>25</td><td>enum</td></tr><tr><td>27</td><td>struct</td></tr><tr><td>28</td><td>compatible_struct</td></tr><tr><td>31</td><td>ext</td></tr><tr><td>33</td><td>union</td></tr><tr><td>36</td><td>none</td></tr><tr><td>37</td><td>duration</td></tr><tr><td>38</td><td>timestamp</td></tr><tr><td>39</td><td>date</td></tr><tr><td>40+</td><td>decimal/binary/array 等</td></tr></tbody></table>
<p>完整映射见 <a href="/zh-CN/docs/next/specification/xlang_type_mapping">Xlang 类型映射</a>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-id-encoding-for-user-types">Type ID Encoding for User Types<a href="#type-id-encoding-for-user-types" class="hash-link" aria-label="Type ID Encoding for User Types的直接链接" title="Type ID Encoding for User Types的直接链接">​</a></h4>
<p>用户类型采用拆分编码：</p>
<ul>
<li>先写 internal type ID（8-bit kind）</li>
<li>再写 <code>user_type_id</code>（varuint32）</li>
</ul>
<p>不做 bit packing，便于实现与调试。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-mapping">Type mapping<a href="#type-mapping" class="hash-link" aria-label="Type mapping的直接链接" title="Type mapping的直接链接">​</a></h3>
<p>跨语言类型映射总表见 <a href="/zh-CN/docs/next/specification/xlang_type_mapping">xlang_type_mapping.md</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="规范概览">规范概览<a href="#规范概览" class="hash-link" aria-label="规范概览的直接链接" title="规范概览的直接链接">​</a></h2>
<p>顶层布局：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| fory header | reference meta | type meta | value payload |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>协议默认 little-endian。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fory-头部">Fory 头部<a href="#fory-头部" class="hash-link" aria-label="Fory 头部的直接链接" title="Fory 头部的直接链接">​</a></h2>
<p>头部是 1-byte bitmap：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| reserved(5) | oob(1) | xlang(1) | null(1) |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>null=1</code> 时值为空，不再写值数据</li>
<li><code>xlang=1</code> 表示采用 xlang 格式</li>
<li><code>oob=1</code> 表示存在 out-of-band 缓冲区引用</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference-meta">Reference Meta<a href="#reference-meta" class="hash-link" aria-label="Reference Meta的直接链接" title="Reference Meta的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference-flags">Reference Flags<a href="#reference-flags" class="hash-link" aria-label="Reference Flags的直接链接" title="Reference Flags的直接链接">​</a></h3>
<table><thead><tr><th>标记</th><th>值</th><th>含义</th></tr></thead><tbody><tr><td>NULL_FLAG</td><td>-3</td><td>null</td></tr><tr><td>REF_FLAG</td><td>-2</td><td>已出现对象，后接 ref id</td></tr><tr><td>NOT_NULL_VALUE_FLAG</td><td>-1</td><td>非空但不跟踪引用</td></tr><tr><td>REF_VALUE_FLAG</td><td>0</td><td>首次出现的可引用对象</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference-tracking-algorithm">Reference Tracking Algorithm<a href="#reference-tracking-algorithm" class="hash-link" aria-label="Reference Tracking Algorithm的直接链接" title="Reference Tracking Algorithm的直接链接">​</a></h3>
<p>写侧：</p>
<ol>
<li>先判断 null</li>
<li>若可引用且已出现，写 <code>REF_FLAG + ref_id</code></li>
<li>若可引用且首次出现，写 <code>REF_VALUE_FLAG</code> 并登记</li>
<li>若不可引用，写 <code>NOT_NULL_VALUE_FLAG</code></li>
</ol>
<p>读侧：</p>
<ol>
<li>读取标记</li>
<li><code>REF_FLAG</code> 时按 ref_id 回表</li>
<li><code>REF_VALUE_FLAG</code> 时先构造对象再登记</li>
<li><code>NOT_NULL_VALUE_FLAG</code> 时直接读值</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference-id-assignment">Reference ID Assignment<a href="#reference-id-assignment" class="hash-link" aria-label="Reference ID Assignment的直接链接" title="Reference ID Assignment的直接链接">​</a></h3>
<p>ref id 按对象首次出现顺序递增分配，从 0 开始。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-reference-tracking-is-disabled">When Reference Tracking is Disabled<a href="#when-reference-tracking-is-disabled" class="hash-link" aria-label="When Reference Tracking is Disabled的直接链接" title="When Reference Tracking is Disabled的直接链接">​</a></h3>
<p>禁用引用跟踪时，仅使用 null / not-null 两类标记，不维护 ref 表。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="language-specific-considerations">Language-Specific Considerations<a href="#language-specific-considerations" class="hash-link" aria-label="Language-Specific Considerations的直接链接" title="Language-Specific Considerations的直接链接">​</a></h3>
<p>不同语言应保证：</p>
<ul>
<li>对象身份判定一致（身份而非值相等）</li>
<li>容器元素引用语义一致</li>
<li>循环引用场景先占位后填充</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-meta">Type Meta<a href="#type-meta" class="hash-link" aria-label="Type Meta的直接链接" title="Type Meta的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-id-encoding">Type ID encoding<a href="#type-id-encoding" class="hash-link" aria-label="Type ID encoding的直接链接" title="Type ID encoding的直接链接">​</a></h3>
<p>type id 使用 varuint 编码写入。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-meta-payload">Type meta payload<a href="#type-meta-payload" class="hash-link" aria-label="Type meta payload的直接链接" title="Type meta payload的直接链接">​</a></h3>
<p>在以下情况写额外 type meta：</p>
<ul>
<li>命名类型（<code>NAMED_*</code>）</li>
<li>compatible struct 需要 TypeDef</li>
<li>运行时未声明类型需要动态 type info</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared-type-meta-streaming">Shared Type Meta (streaming)<a href="#shared-type-meta-streaming" class="hash-link" aria-label="Shared Type Meta (streaming)的直接链接" title="Shared Type Meta (streaming)的直接链接">​</a></h3>
<p>共享 type meta 采用“索引 + 可选定义体”流式写法：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">index_marker = (index &lt;&lt; 1) | is_ref</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>is_ref=1</code>：引用已有 type</li>
<li><code>is_ref=0</code>：新 type，后接定义体</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="typedef-schema-evolution-metadata">TypeDef (schema evolution metadata)<a href="#typedef-schema-evolution-metadata" class="hash-link" aria-label="TypeDef (schema evolution metadata)的直接链接" title="TypeDef (schema evolution metadata)的直接链接">​</a></h3>
<p>TypeDef 用于描述 compatible 模式的字段元信息（字段名/tag、nullable/ref、字段类型）。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="global-header">Global header<a href="#global-header" class="hash-link" aria-label="Global header的直接链接" title="Global header的直接链接">​</a></h4>
<p>TypeDef 头部包含：</p>
<ul>
<li>payload size</li>
<li>flags（如 compress、has_fields_meta）</li>
<li>payload hash</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="typedef-body">TypeDef body<a href="#typedef-body" class="hash-link" aria-label="TypeDef body的直接链接" title="TypeDef body的直接链接">​</a></h4>
<p>主体包含：</p>
<ul>
<li>class 层次信息（父类到子类）</li>
<li>每层字段数量与类型标识</li>
<li>字段级元信息（名称编码/tag、nullable/ref、field type）</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="meta-string">Meta String<a href="#meta-string" class="hash-link" aria-label="Meta String的直接链接" title="Meta String的直接链接">​</a></h2>
<p>meta string 用于 namespace、typename、fieldname 的压缩表示。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-type-ids">Encoding Type IDs<a href="#encoding-type-ids" class="hash-link" aria-label="Encoding Type IDs的直接链接" title="Encoding Type IDs的直接链接">​</a></h3>
<p>常见编码族：</p>
<ul>
<li>UTF8</li>
<li>LOWER_SPECIAL</li>
<li>LOWER_UPPER_DIGIT_SPECIAL</li>
<li>FIRST_TO_LOWER_SPECIAL</li>
<li>ALL_TO_LOWER_SPECIAL</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="character-mapping-tables">Character Mapping Tables<a href="#character-mapping-tables" class="hash-link" aria-label="Character Mapping Tables的直接链接" title="Character Mapping Tables的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lower_special-5-bits-per-character">LOWER_SPECIAL (5 bits per character)<a href="#lower_special-5-bits-per-character" class="hash-link" aria-label="LOWER_SPECIAL (5 bits per character)的直接链接" title="LOWER_SPECIAL (5 bits per character)的直接链接">​</a></h4>
<p>适用于小写字母 + 高频特殊字符集合。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lower_upper_digit_special-6-bits-per-character">LOWER_UPPER_DIGIT_SPECIAL (6 bits per character)<a href="#lower_upper_digit_special-6-bits-per-character" class="hash-link" aria-label="LOWER_UPPER_DIGIT_SPECIAL (6 bits per character)的直接链接" title="LOWER_UPPER_DIGIT_SPECIAL (6 bits per character)的直接链接">​</a></h4>
<p>适用于大小写字母、数字与特殊字符混合场景。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-algorithms">Encoding Algorithms<a href="#encoding-algorithms" class="hash-link" aria-label="Encoding Algorithms的直接链接" title="Encoding Algorithms的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lower_special-encoding">LOWER_SPECIAL Encoding<a href="#lower_special-encoding" class="hash-link" aria-label="LOWER_SPECIAL Encoding的直接链接" title="LOWER_SPECIAL Encoding的直接链接">​</a></h4>
<p>按 5-bit 映射逐字符编码，无法映射的字符需回退至其他编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="first_to_lower_special-encoding">FIRST_TO_LOWER_SPECIAL Encoding<a href="#first_to_lower_special-encoding" class="hash-link" aria-label="FIRST_TO_LOWER_SPECIAL Encoding的直接链接" title="FIRST_TO_LOWER_SPECIAL Encoding的直接链接">​</a></h4>
<p>首字符单独处理，其余字符按 LOWER_SPECIAL 编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="all_to_lower_special-encoding">ALL_TO_LOWER_SPECIAL Encoding<a href="#all_to_lower_special-encoding" class="hash-link" aria-label="ALL_TO_LOWER_SPECIAL Encoding的直接链接" title="ALL_TO_LOWER_SPECIAL Encoding的直接链接">​</a></h4>
<p>先归一化，再按 LOWER_SPECIAL 编码。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-selection-algorithm">Encoding Selection Algorithm<a href="#encoding-selection-algorithm" class="hash-link" aria-label="Encoding Selection Algorithm的直接链接" title="Encoding Selection Algorithm的直接链接">​</a></h3>
<p>编码选择策略：</p>
<ol>
<li>尝试最紧凑编码</li>
<li>若字符集合不满足则降级</li>
<li>必要时回退 UTF8</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="meta-string-header-format">Meta String Header Format<a href="#meta-string-header-format" class="hash-link" aria-label="Meta String Header Format的直接链接" title="Meta String Header Format的直接链接">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| size_bits | encoding_bits |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>当 <code>size</code> 超过短头范围时追加 varuint 扩展长度。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-character-sets-by-context">Special Character Sets by Context<a href="#special-character-sets-by-context" class="hash-link" aria-label="Special Character Sets by Context的直接链接" title="Special Character Sets by Context的直接链接">​</a></h3>
<p>不同上下文（包名、类型名、字段名）允许字符集合可不同，编码器需按上下文选择合法表。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deduplication">Deduplication<a href="#deduplication" class="hash-link" aria-label="Deduplication的直接链接" title="Deduplication的直接链接">​</a></h3>
<p>meta string 可按会话去重，减少重复写入。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="value-format">Value Format<a href="#value-format" class="hash-link" aria-label="Value Format的直接链接" title="Value Format的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-types">Basic types<a href="#basic-types" class="hash-link" aria-label="Basic types的直接链接" title="Basic types的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bool">bool<a href="#bool" class="hash-link" aria-label="bool的直接链接" title="bool的直接链接">​</a></h4>
<p>1 字节：<code>0x00/0x01</code>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="int8">int8<a href="#int8" class="hash-link" aria-label="int8的直接链接" title="int8的直接链接">​</a></h4>
<p>1 字节有符号整型。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="int16">int16<a href="#int16" class="hash-link" aria-label="int16的直接链接" title="int16的直接链接">​</a></h4>
<p>2 字节 little-endian。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unsigned-int32">unsigned int32<a href="#unsigned-int32" class="hash-link" aria-label="unsigned int32的直接链接" title="unsigned int32的直接链接">​</a></h4>
<p>固定 4 字节无符号整型。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unsigned-varint32">unsigned varint32<a href="#unsigned-varint32" class="hash-link" aria-label="unsigned varint32的直接链接" title="unsigned varint32的直接链接">​</a></h4>
<p>varint32（无符号）编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signed-int32">signed int32<a href="#signed-int32" class="hash-link" aria-label="signed int32的直接链接" title="signed int32的直接链接">​</a></h4>
<p>固定 4 字节有符号整型。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signed-varint32">signed varint32<a href="#signed-varint32" class="hash-link" aria-label="signed varint32的直接链接" title="signed varint32的直接链接">​</a></h4>
<p>ZigZag + varint32。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unsigned-int64">unsigned int64<a href="#unsigned-int64" class="hash-link" aria-label="unsigned int64的直接链接" title="unsigned int64的直接链接">​</a></h4>
<p>固定 8 字节无符号整型。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unsigned-varint64">unsigned varint64<a href="#unsigned-varint64" class="hash-link" aria-label="unsigned varint64的直接链接" title="unsigned varint64的直接链接">​</a></h4>
<p>varint64（无符号）编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unsigned-hybrid-int64-tagged_uint64">unsigned hybrid int64 (TAGGED_UINT64)<a href="#unsigned-hybrid-int64-tagged_uint64" class="hash-link" aria-label="unsigned hybrid int64 (TAGGED_UINT64)的直接链接" title="unsigned hybrid int64 (TAGGED_UINT64)的直接链接">​</a></h4>
<p>tagged 编码，兼顾小值空间效率与大值表示范围。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="varuint36small">VarUint36Small<a href="#varuint36small" class="hash-link" aria-label="VarUint36Small的直接链接" title="VarUint36Small的直接链接">​</a></h4>
<p>用于字符串头等场景的紧凑长度编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signed-int64">signed int64<a href="#signed-int64" class="hash-link" aria-label="signed int64的直接链接" title="signed int64的直接链接">​</a></h4>
<p>固定 8 字节有符号整型。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signed-varint64">signed varint64<a href="#signed-varint64" class="hash-link" aria-label="signed varint64的直接链接" title="signed varint64的直接链接">​</a></h4>
<p>ZigZag + varint64。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="signed-hybrid-int64-tagged_int64">signed hybrid int64 (TAGGED_INT64)<a href="#signed-hybrid-int64-tagged_int64" class="hash-link" aria-label="signed hybrid int64 (TAGGED_INT64)的直接链接" title="signed hybrid int64 (TAGGED_INT64)的直接链接">​</a></h4>
<p>tagged int64 编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="float8">float8<a href="#float8" class="hash-link" aria-label="float8的直接链接" title="float8的直接链接">​</a></h4>
<p>预留/实验类型，生产互操作需谨慎。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="float16">float16<a href="#float16" class="hash-link" aria-label="float16的直接链接" title="float16的直接链接">​</a></h4>
<p>16-bit 浮点。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bfloat16">bfloat16<a href="#bfloat16" class="hash-link" aria-label="bfloat16的直接链接" title="bfloat16的直接链接">​</a></h4>
<p>bfloat16 表示。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="float32">float32<a href="#float32" class="hash-link" aria-label="float32的直接链接" title="float32的直接链接">​</a></h4>
<p>IEEE 754 float32 little-endian。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="float64">float64<a href="#float64" class="hash-link" aria-label="float64的直接链接" title="float64的直接链接">​</a></h4>
<p>IEEE 754 float64 little-endian。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="string">string<a href="#string" class="hash-link" aria-label="string的直接链接" title="string的直接链接">​</a></h3>
<p>字符串编码：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| header(varuint36_small) | bytes |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>header 中包含 byte length 与 coder 信息。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="string-header">String Header<a href="#string-header" class="hash-link" aria-label="String Header的直接链接" title="String Header的直接链接">​</a></h4>
<p><code>(byte_length &lt;&lt; 2) | coder</code>，coder 表示 UTF8/LATIN1/UTF16 等。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-algorithm">Encoding Algorithm<a href="#encoding-algorithm" class="hash-link" aria-label="Encoding Algorithm的直接链接" title="Encoding Algorithm的直接链接">​</a></h4>
<p>按候选编码尝试，优先选择更紧凑且可无损表示的编码。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-selection-by-language">Encoding Selection by Language<a href="#encoding-selection-by-language" class="hash-link" aria-label="Encoding Selection by Language的直接链接" title="Encoding Selection by Language的直接链接">​</a></h4>
<p>各语言实现可按本地字符串内部表示优化，但线上编码结果必须与规范一致。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="empty-string">Empty String<a href="#empty-string" class="hash-link" aria-label="Empty String的直接链接" title="Empty String的直接链接">​</a></h4>
<p>空串长度为 0，仍应写合法 header。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="duration">duration<a href="#duration" class="hash-link" aria-label="duration的直接链接" title="duration的直接链接">​</a></h3>
<p>通常写 <code>seconds + nanos</code>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="collectionlist">collection/list<a href="#collectionlist" class="hash-link" aria-label="collection/list的直接链接" title="collection/list的直接链接">​</a></h3>
<p>列表布局：</p>
<ol>
<li>长度</li>
<li>elements header</li>
<li>（可选）元素类型信息</li>
<li>元素数据</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="elements-header">Elements Header<a href="#elements-header" class="hash-link" aria-label="Elements Header的直接链接" title="Elements Header的直接链接">​</a></h4>
<p>header 位用于表达：</p>
<ul>
<li>是否跟踪元素引用</li>
<li>是否含 null</li>
<li>是否同构</li>
<li>是否使用声明类型</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-info-after-header">Type Info After Header<a href="#type-info-after-header" class="hash-link" aria-label="Type Info After Header的直接链接" title="Type Info After Header的直接链接">​</a></h4>
<p>在同构且非声明类型场景，可在 header 后一次性写 element type info。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="element-serialization-based-on-header">Element Serialization Based on Header<a href="#element-serialization-based-on-header" class="hash-link" aria-label="Element Serialization Based on Header的直接链接" title="Element Serialization Based on Header的直接链接">​</a></h4>
<p>根据 header 走不同元素序列化路径（同构快路径 / 异构慢路径）。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="elements-data">elements data<a href="#elements-data" class="hash-link" aria-label="elements data的直接链接" title="elements data的直接链接">​</a></h4>
<p>元素数据按顺序编码；null 与 ref 标记按配置插入。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="array">array<a href="#array" class="hash-link" aria-label="array的直接链接" title="array的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="primitive-array">primitive array<a href="#primitive-array" class="hash-link" aria-label="primitive array的直接链接" title="primitive array的直接链接">​</a></h4>
<p>基础类型数组可直接按内存块拷贝（注意 endian 与对齐）。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-dimensional-arrays">Multi-dimensional arrays<a href="#multi-dimensional-arrays" class="hash-link" aria-label="Multi-dimensional arrays的直接链接" title="Multi-dimensional arrays的直接链接">​</a></h4>
<p>多维数组按嵌套 array/list 递归表达。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="object-array">object array<a href="#object-array" class="hash-link" aria-label="object array的直接链接" title="object array的直接链接">​</a></h4>
<p>对象数组元素逐个编码，支持引用与多态。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="map">map<a href="#map" class="hash-link" aria-label="map的直接链接" title="map的直接链接">​</a></h3>
<p>map 使用分块编码（chunk-based）。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="map-chunk-format">Map Chunk Format<a href="#map-chunk-format" class="hash-link" aria-label="Map Chunk Format的直接链接" title="Map Chunk Format的直接链接">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| map_size | chunk_1 | chunk_2 | ... |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kv-header-bits">KV Header Bits<a href="#kv-header-bits" class="hash-link" aria-label="KV Header Bits的直接链接" title="KV Header Bits的直接链接">​</a></h4>
<p>header 位描述 key/value 的：</p>
<ul>
<li>是否跟踪引用</li>
<li>是否含 null</li>
<li>是否使用声明类型</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="chunk-size">Chunk Size<a href="#chunk-size" class="hash-link" aria-label="Chunk Size的直接链接" title="Chunk Size的直接链接">​</a></h4>
<p>每个 chunk 大小上限通常为 255 entries。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-chunk-based-format">Why Chunk-Based Format?<a href="#why-chunk-based-format" class="hash-link" aria-label="Why Chunk-Based Format?的直接链接" title="Why Chunk-Based Format?的直接链接">​</a></h4>
<p>减少每个 entry 重复写 type info 的成本，提升吞吐。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-serialize-chunk-by-chunk">Why serialize chunk by chunk?<a href="#why-serialize-chunk-by-chunk" class="hash-link" aria-label="Why serialize chunk by chunk?的直接链接" title="Why serialize chunk by chunk?的直接链接">​</a></h4>
<p>在 key/value 类型局部一致时可批量走快路径，并简化解码分支。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enum">enum<a href="#enum" class="hash-link" aria-label="enum的直接链接" title="enum的直接链接">​</a></h3>
<p>enum 可按 ordinal 或名称编码（取决于配置与目标兼容要求）。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp">timestamp<a href="#timestamp" class="hash-link" aria-label="timestamp的直接链接" title="timestamp的直接链接">​</a></h3>
<p>通常写 <code>seconds + nanos</code> 或统一 epoch 精度表示。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="date">date<a href="#date" class="hash-link" aria-label="date的直接链接" title="date的直接链接">​</a></h3>
<p>通常写 epoch day。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="decimal">decimal<a href="#decimal" class="hash-link" aria-label="decimal的直接链接" title="decimal的直接链接">​</a></h3>
<p>decimal 由 scale + unscaled value 表示（实现可用大整数）。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="struct">struct<a href="#struct" class="hash-link" aria-label="struct的直接链接" title="struct的直接链接">​</a></h3>
<p>struct 编码：字段按稳定顺序写入。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="field-order">Field order<a href="#field-order" class="hash-link" aria-label="Field order的直接链接" title="Field order的直接链接">​</a></h4>
<p>推荐使用规范定义的稳定分组排序，避免语言实现差异导致 hash 不一致。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-field-identifier">Step 1: Field identifier<a href="#step-1-field-identifier" class="hash-link" aria-label="Step 1: Field identifier的直接链接" title="Step 1: Field identifier的直接链接">​</a></h5>
<p>字段标识优先使用 tag ID；否则使用标准化字段名（如 snake_case）。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-group-assignment">Step 2: Group assignment<a href="#step-2-group-assignment" class="hash-link" aria-label="Step 2: Group assignment的直接链接" title="Step 2: Group assignment的直接链接">​</a></h5>
<p>按字段类别分组（primitive、builtin、collection/map、other）。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-intra-group-ordering">Step 3: Intra-group ordering<a href="#step-3-intra-group-ordering" class="hash-link" aria-label="Step 3: Intra-group ordering的直接链接" title="Step 3: Intra-group ordering的直接链接">​</a></h5>
<p>组内使用稳定比较器（type + name/tag）排序。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Notes的直接链接" title="Notes的直接链接">​</a></h5>
<p>实现必须保证排序确定性（deterministic）。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="schema-consistent-meta-share-disabled">Schema consistent (meta share disabled)<a href="#schema-consistent-meta-share-disabled" class="hash-link" aria-label="Schema consistent (meta share disabled)的直接链接" title="Schema consistent (meta share disabled)的直接链接">​</a></h4>
<p>不共享 meta 时，双方 schema 需一致；通常直接按固定顺序写字段值。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compatible-mode-meta-share-enabled">Compatible mode (meta share enabled)<a href="#compatible-mode-meta-share-enabled" class="hash-link" aria-label="Compatible mode (meta share enabled)的直接链接" title="Compatible mode (meta share enabled)的直接链接">​</a></h4>
<p>共享 TypeDef 后可按字段名/tag 做映射，未知字 段跳过。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="union">Union<a href="#union" class="hash-link" aria-label="Union的直接链接" title="Union的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="idl-syntax">IDL syntax<a href="#idl-syntax" class="hash-link" aria-label="IDL syntax的直接链接" title="IDL syntax的直接链接">​</a></h4>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">union Animal </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token positional-class-name class-name">Dog</span><span class="token plain"> dog </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token positional-class-name class-name">Cat</span><span class="token plain"> cat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代  码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-ids-and-type-meta">Type IDs and type meta<a href="#type-ids-and-type-meta" class="hash-link" aria-label="Type IDs and type meta的直接链接" title="Type IDs and type meta的直接链接">​</a></h4>
<p>union 本体有独立 type id，case 使用 case id 区分分支。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="union-value-payload">Union value payload<a href="#union-value-payload" class="hash-link" aria-label="Union value payload的直接链接" title="Union value payload的直接链接">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| case_id | case_value |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="wire-layouts">Wire layouts<a href="#wire-layouts" class="hash-link" aria-label="Wire layouts的直接链接" title="Wire layouts的直接链接">​</a></h4>
<p>根据 case 类型是否需要引用/类型元信息决定具体布局。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="decoding-rules">Decoding rules<a href="#decoding-rules" class="hash-link" aria-label="Decoding rules的直接链接" title="Decoding rules的直接链接">​</a></h4>
<p>先读 case_id，再按 case 类型规则读 payload；未知 case 可按兼容策略跳过或报错。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-each-type-id">When to use each type ID<a href="#when-to-use-each-type-id" class="hash-link" aria-label="When to use each type ID的直接链接" title="When to use each type ID的直接链接">​</a></h4>
<ul>
<li>结构稳定、跨语言常驻类型：建议固定数值 type id</li>
<li>动态类型/未注册类型：使用命名类型路径</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility-notes">Compatibility notes<a href="#compatibility-notes" class="hash-link" aria-label="Compatibility notes的直接链接" title="Compatibility notes的直接链接">​</a></h4>
<p>新增 union case 应使用新 case id，不应复用旧 id。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type">Type<a href="#type" class="hash-link" aria-label="Type的直接链接" title="Type的直接链接">​</a></h3>
<p>动态 <code>type</code> 值应携带足够 type meta，确保接收端可判别并解码。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-pitfalls">Common Pitfalls<a href="#common-pitfalls" class="hash-link" aria-label="Common Pitfalls的直接链接" title="Common Pitfalls的直接链接">​</a></h2>
<p>常见问题：</p>
<ol>
<li>字段排序不稳定导致 schema/hash 不一致</li>
<li>varint 与 fixed/tagged 配置不一致</li>
<li>null 与空值语义混淆</li>
<li>引用跟踪开关两端不一致</li>
<li>命名类型 namespace/typename 不稳定</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="language-implementation-guidelines">Language Implementation Guidelines<a href="#language-implementation-guidelines" class="hash-link" aria-label="Language Implementation Guidelines的直接链接" title="Language Implementation Guidelines的直接链接">​</a></h2>
<ul>
<li>统一 little-endian</li>
<li>明确对象身份语义（用于 ref tracking）</li>
<li>对所有 offset/size 做边界与溢出检查</li>
<li>维护跨版本回归用例（含演进、循环引用、复杂容器）</li>
<li>与 Java/Python/C++/Rust/Go 做双向互测</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/specification/xlang_serialization_spec.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-CN/docs/next/specification/row_format_spec"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Row 格式</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-CN/docs/next/specification/xlang_type_mapping"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Xlang 类型映射</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#跨语言序列化规范" class="table-of-contents__link toc-highlight">跨语言序列化规范</a></li><li><a href="#类型系统" class="table-of-contents__link toc-highlight">类型系统</a><ul><li><a href="#数据类型" class="table-of-contents__link toc-highlight">数据类型</a></li><li><a href="#polymorphisms" class="table-of-contents__link toc-highlight">Polymorphisms</a></li><li><a href="#type-disambiguation" class="table-of-contents__link toc-highlight">Type disambiguation</a></li><li><a href="#type-id" class="table-of-contents__link toc-highlight">Type ID</a></li><li><a href="#type-mapping" class="table-of-contents__link toc-highlight">Type mapping</a></li></ul></li><li><a href="#规范概览" class="table-of-contents__link toc-highlight">规范概览</a></li><li><a href="#fory-头部" class="table-of-contents__link toc-highlight">Fory 头部</a></li><li><a href="#reference-meta" class="table-of-contents__link toc-highlight">Reference Meta</a><ul><li><a href="#reference-flags" class="table-of-contents__link toc-highlight">Reference Flags</a></li><li><a href="#reference-tracking-algorithm" class="table-of-contents__link toc-highlight">Reference Tracking Algorithm</a></li><li><a href="#reference-id-assignment" class="table-of-contents__link toc-highlight">Reference ID Assignment</a></li><li><a href="#when-reference-tracking-is-disabled" class="table-of-contents__link toc-highlight">When Reference Tracking is Disabled</a></li><li><a href="#language-specific-considerations" class="table-of-contents__link toc-highlight">Language-Specific Considerations</a></li></ul></li><li><a href="#type-meta" class="table-of-contents__link toc-highlight">Type Meta</a><ul><li><a href="#type-id-encoding" class="table-of-contents__link toc-highlight">Type ID encoding</a></li><li><a href="#type-meta-payload" class="table-of-contents__link toc-highlight">Type meta payload</a></li><li><a href="#shared-type-meta-streaming" class="table-of-contents__link toc-highlight">Shared Type Meta (streaming)</a></li><li><a href="#typedef-schema-evolution-metadata" class="table-of-contents__link toc-highlight">TypeDef (schema evolution metadata)</a></li></ul></li><li><a href="#meta-string" class="table-of-contents__link toc-highlight">Meta String</a><ul><li><a href="#encoding-type-ids" class="table-of-contents__link toc-highlight">Encoding Type IDs</a></li><li><a href="#character-mapping-tables" class="table-of-contents__link toc-highlight">Character Mapping Tables</a></li><li><a href="#encoding-algorithms" class="table-of-contents__link toc-highlight">Encoding Algorithms</a></li><li><a href="#encoding-selection-algorithm" class="table-of-contents__link toc-highlight">Encoding Selection Algorithm</a></li><li><a href="#meta-string-header-format" class="table-of-contents__link toc-highlight">Meta String Header Format</a></li><li><a href="#special-character-sets-by-context" class="table-of-contents__link toc-highlight">Special Character Sets by Context</a></li><li><a href="#deduplication" class="table-of-contents__link toc-highlight">Deduplication</a></li></ul></li><li><a href="#value-format" class="table-of-contents__link toc-highlight">Value Format</a><ul><li><a href="#basic-types" class="table-of-contents__link toc-highlight">Basic types</a></li><li><a href="#string" class="table-of-contents__link toc-highlight">string</a></li><li><a href="#duration" class="table-of-contents__link toc-highlight">duration</a></li><li><a href="#collectionlist" class="table-of-contents__link toc-highlight">collection/list</a></li><li><a href="#array" class="table-of-contents__link toc-highlight">array</a></li><li><a href="#map" class="table-of-contents__link toc-highlight">map</a></li><li><a href="#enum" class="table-of-contents__link toc-highlight">enum</a></li><li><a href="#timestamp" class="table-of-contents__link toc-highlight">timestamp</a></li><li><a href="#date" class="table-of-contents__link toc-highlight">date</a></li><li><a href="#decimal" class="table-of-contents__link toc-highlight">decimal</a></li><li><a href="#struct" class="table-of-contents__link toc-highlight">struct</a></li><li><a href="#union" class="table-of-contents__link toc-highlight">Union</a></li><li><a href="#type" class="table-of-contents__link toc-highlight">Type</a></li></ul></li><li><a href="#common-pitfalls" class="table-of-contents__link toc-highlight">Common Pitfalls</a></li><li><a href="#language-implementation-guidelines" class="table-of-contents__link toc-highlight">Language Implementation Guidelines</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://lists.apache.org/list.html?dev@fory.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">邮件列表<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/fory-project/shared_invite/zt-1u8soj4qc-ieYEu7ciHOqA2mo47llS8A" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ApacheFory" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/start/install">安装</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/start/usage">使用</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/introduction/benchmark">基准测试</a></li></ul></div><div class="col footer__col"><div class="footer__title">代码库</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/apache/fory" target="_blank" rel="noopener noreferrer" class="footer__link-item">Apache Fory™<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/fory-site" target="_blank" rel="noopener noreferrer" class="footer__link-item">网站<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/zh-CN/img/asf_logo.svg" alt="Apache Incubator 标志" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="200"><img src="/zh-CN/img/asf_logo.svg" alt="Apache Incubator 标志" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="200"></a></div><div class="footer__copyright"><div>
      <p> 版权所有 © 2025 The Apache Software Foundation，许可证：Apache License, Version 2.0。 <br>
        Apache Fory、Fory、Apache、Apache Logo、Apache Fory Logo 是 Apache 软件基金会在美国和/或其他国家的注册商标或商标。
      </p>
      </div></div></div></div></footer></div>
</body>
</html>