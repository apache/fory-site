"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[14779],{46681:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});var r=i(85893),s=i(11151);const l={title:"Struct \u6807\u7b7e",sidebar_position:60,id:"struct_tags",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},d=void 0,t={id:"guide/go/struct_tags",title:"Struct \u6807\u7b7e",description:"Fory Go \u901a\u8fc7 struct tag \u81ea\u5b9a\u4e49\u5b57\u6bb5\u7ea7\u5e8f\u5217\u5316\u884c\u4e3a\uff0c\u4ece\u800c\u7cbe\u7ec6\u63a7\u5236\u6bcf\u4e2a\u5b57\u6bb5\u5982\u4f55\u5e8f\u5217\u5316\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/go/struct-tags.md",sourceDirName:"guide/go",slug:"/guide/go/struct_tags",permalink:"/zh-CN/docs/next/guide/go/struct_tags",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/go/struct-tags.md",tags:[],version:"current",sidebarPosition:60,frontMatter:{title:"Struct \u6807\u7b7e",sidebar_position:60,id:"struct_tags",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"\u5f15\u7528\u5904\u7406",permalink:"/zh-CN/docs/next/guide/go/references"},next:{title:"Schema \u6f14\u8fdb",permalink:"/zh-CN/docs/next/guide/go/schema_evolution"}},c={},a=[{value:"\u6807\u7b7e\u8bed\u6cd5",id:"\u6807\u7b7e\u8bed\u6cd5",level:2},{value:"\u53ef\u7528\u6807\u7b7e",id:"\u53ef\u7528\u6807\u7b7e",level:2},{value:"\u5b57\u6bb5 ID",id:"\u5b57\u6bb5-id",level:3},{value:"\u5ffd\u7565\u5b57\u6bb5",id:"\u5ffd\u7565\u5b57\u6bb5",level:3},{value:"\u53ef\u7a7a\u63a7\u5236",id:"\u53ef\u7a7a\u63a7\u5236",level:3},{value:"\u5f15\u7528\u8ddf\u8e2a",id:"\u5f15\u7528\u8ddf\u8e2a",level:3},{value:"\u7f16\u7801\u63a7\u5236",id:"\u7f16\u7801\u63a7\u5236",level:3},{value:"\u7ec4\u5408\u6807\u7b7e",id:"\u7ec4\u5408\u6807\u7b7e",level:2},{value:"\u4e0e\u5176\u4ed6\u6807\u7b7e\u5171\u5b58",id:"\u4e0e\u5176\u4ed6\u6807\u7b7e\u5171\u5b58",level:2},{value:"\u5b57\u6bb5\u53ef\u89c1\u6027",id:"\u5b57\u6bb5\u53ef\u89c1\u6027",level:2},{value:"\u5b57\u6bb5\u987a\u5e8f",id:"\u5b57\u6bb5\u987a\u5e8f",level:2},{value:"Struct \u54c8\u5e0c",id:"struct-\u54c8\u5e0c",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"API \u54cd\u5e94\u7ed3\u6784",id:"api-\u54cd\u5e94\u7ed3\u6784",level:3},{value:"\u5e26\u5171\u4eab\u5f15\u7528\u7684\u7f13\u5b58\u7ed3\u6784",id:"\u5e26\u5171\u4eab\u5f15\u7528\u7684\u7f13\u5b58\u7ed3\u6784",level:3},{value:"\u5e26\u5faa\u73af\u5f15\u7528\u7684\u6587\u6863\u7ed3\u6784",id:"\u5e26\u5faa\u73af\u5f15\u7528\u7684\u6587\u6863\u7ed3\u6784",level:3},{value:"\u6807\u7b7e\u89e3\u6790\u9519\u8bef",id:"\u6807\u7b7e\u89e3\u6790\u9519\u8bef",level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u5e38\u89c1\u6a21\u5f0f",id:"\u5e38\u89c1\u6a21\u5f0f",level:2},{value:"\u5ffd\u7565\u8ba1\u7b97\u5b57\u6bb5",id:"\u5ffd\u7565\u8ba1\u7b97\u5b57\u6bb5",level:3},{value:"\u5e26\u7236\u6307\u9488\u7684\u5faa\u73af\u7ed3\u6784",id:"\u5e26\u7236\u6307\u9488\u7684\u5faa\u73af\u7ed3\u6784",level:3},{value:"\u6df7\u5408\u5e8f\u5217\u5316\u9700\u6c42",id:"\u6df7\u5408\u5e8f\u5217\u5316\u9700\u6c42",level:3},{value:"\u76f8\u5173\u4e3b\u9898",id:"\u76f8\u5173\u4e3b\u9898",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Fory Go \u901a\u8fc7 struct tag \u81ea\u5b9a\u4e49\u5b57\u6bb5\u7ea7\u5e8f\u5217\u5316\u884c\u4e3a\uff0c\u4ece\u800c\u7cbe\u7ec6\u63a7\u5236\u6bcf\u4e2a\u5b57\u6bb5\u5982\u4f55\u5e8f\u5217\u5316\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u6807\u7b7e\u8bed\u6cd5",children:"\u6807\u7b7e\u8bed\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"Fory struct tag \u7684\u901a\u7528\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type MyStruct struct {\n    Field Type `fory:"option1,option2=value"`\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u591a\u4e2a\u9009\u9879\u4f7f\u7528\u9017\u53f7\uff08",(0,r.jsx)(n.code,{children:","}),"\uff09\u5206\u9694\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u53ef\u7528\u6807\u7b7e",children:"\u53ef\u7528\u6807\u7b7e"}),"\n",(0,r.jsx)(n.h3,{id:"\u5b57\u6bb5-id",children:"\u5b57\u6bb5 ID"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"id=N"})," \u4e3a\u5b57\u6bb5\u5206\u914d\u6570\u503c ID\uff0c\u4ee5\u83b7\u5f97\u66f4\u7d27\u51d1\u7f16\u7801\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID   int64  `fory:"id=0"`\n    Name string `fory:"id=1"`\n    Age  int32  `fory:"id=2"`\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6536\u76ca\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5e8f\u5217\u5316\u4f53\u79ef\u66f4\u5c0f\uff08\u6570\u503c ID \u66ff\u4ee3\u5b57\u6bb5\u540d\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u66f4\u5feb"}),"\n",(0,r.jsx)(n.li,{children:"\u8de8\u8bed\u8a00\u517c\u5bb9\u573a\u666f\u4e0b\u66f4\u63a8\u8350"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u540c\u4e00 struct \u5185 ID \u5fc5\u987b\u552f\u4e00"}),"\n",(0,r.jsxs)(n.li,{children:["ID \u5fc5\u987b ",(0,r.jsx)(n.code,{children:">= 0"})]}),"\n",(0,r.jsx)(n.li,{children:"\u672a\u6307\u5b9a\u65f6\u4f7f\u7528\u5b57\u6bb5\u540d\uff08payload \u66f4\u5927\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5ffd\u7565\u5b57\u6bb5",children:"\u5ffd\u7565\u5b57\u6bb5"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"-"})," \u5c06\u5b57\u6bb5\u6392\u9664\u5728\u5e8f\u5217\u5316\u4e4b\u5916\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID       int64\n    Name     string\n    Password string `fory:"-"`  // Not serialized\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Password"})," \u4e0d\u4f1a\u8fdb\u5165\u5e8f\u5217\u5316\u7ed3\u679c\uff0c\u53cd\u5e8f\u5217\u5316\u540e\u5c06\u4fdd\u6301\u8be5\u7c7b\u578b\u96f6\u503c\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u53ef\u7a7a\u63a7\u5236",children:"\u53ef\u7a7a\u63a7\u5236"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"nullable"})," \u63a7\u5236\u662f\u5426\u4e3a\u6307\u9488\u5b57\u6bb5\u5199\u5165 null \u6807\u8bb0\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Record struct {\n    // Write null flag for this field (allows nil values)\n    OptionalData *Data `fory:"nullable"`\n\n    // Skip null flag (field must not be nil)\n    RequiredData *Data `fory:"nullable=false"`\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4ec5\u9002\u7528\u4e8e\u6307\u9488\u3001slice\u3001map \u5b57\u6bb5"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nullable=false"})," \u65f6\uff0c\u5e8f\u5217\u5316 nil \u4f1a\u62a5\u9519"]}),"\n",(0,r.jsxs)(n.li,{children:["\u9ed8\u8ba4\u662f ",(0,r.jsx)(n.code,{children:"false"}),"\uff08\u4e0d\u5199 null \u6807\u8bb0\uff09"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5f15\u7528\u8ddf\u8e2a",children:"\u5f15\u7528\u8ddf\u8e2a"}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4e3a slice\u3001map\u3001\u6216\u201c\u6307\u5411 struct \u7684\u6307\u9488\u5b57\u6bb5\u201d\u8bbe\u7f6e\u5b57\u6bb5\u7ea7\u5f15\u7528\u8ddf\u8e2a\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Container struct {\n    // Enable reference tracking for this field\n    SharedData *Data `fory:"ref"`\n\n    // Disable reference tracking for this field\n    SimpleData *Data `fory:"ref=false"`\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9002\u7528\u4e8e slice\u3001map \u4e0e\u201c\u6307\u5411 struct \u7684\u6307\u9488\u5b57\u6bb5\u201d"}),"\n",(0,r.jsxs)(n.li,{children:["\u6307\u5411\u539f\u751f\u7c7b\u578b\u7684\u6307\u9488\uff08\u5982 ",(0,r.jsx)(n.code,{children:"*int"}),"\u3001",(0,r.jsx)(n.code,{children:"*string"}),"\uff09\u4e0d\u80fd\u4f7f\u7528\u8be5\u6807\u7b7e"]}),"\n",(0,r.jsxs)(n.li,{children:["\u9ed8\u8ba4 ",(0,r.jsx)(n.code,{children:"ref=false"}),"\uff08\u4e0d\u5f00\u542f\u5f15\u7528\u8ddf\u8e2a\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5168\u5c40 ",(0,r.jsx)(n.code,{children:"WithTrackRef(false)"})," \u65f6\uff0c\u5b57\u6bb5\u7ea7 ref \u6807\u7b7e\u4f1a\u88ab\u5ffd\u7565"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5168\u5c40 ",(0,r.jsx)(n.code,{children:"WithTrackRef(true)"})," \u65f6\uff0c\u53ef\u7528 ",(0,r.jsx)(n.code,{children:"ref=false"})," \u5bf9\u5355\u5b57\u6bb5\u7981\u7528"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53ef\u80fd\u51fa\u73b0\u5171\u4eab\u6216\u5faa\u73af\u5f15\u7528\u7684\u5b57\u6bb5"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u660e\u786e\u552f\u4e00\u7684\u5b57\u6bb5\u53ef\u7981\u7528\uff08\u6027\u80fd\u4f18\u5316\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u7f16\u7801\u63a7\u5236",children:"\u7f16\u7801\u63a7\u5236"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"encoding"})," \u63a7\u5236\u6570\u503c\u5b57\u6bb5\u7f16\u7801\u65b9\u5f0f\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Metrics struct {\n    // Variable-length encoding (default, smaller for small values)\n    Count int64 `fory:"encoding=varint"`\n\n    // Fixed-length encoding (consistent size)\n    Timestamp int64 `fory:"encoding=fixed"`\n\n    // Tagged encoding (includes type tag)\n    Value int64 `fory:"encoding=tagged"`\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u652f\u6301\u7f16\u7801\uff1a"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(n.th,{children:"\u53ef\u9009\u503c"}),(0,r.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int32"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"varint"}),"\u3001",(0,r.jsx)(n.code,{children:"fixed"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"varint"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uint32"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"varint"}),"\u3001",(0,r.jsx)(n.code,{children:"fixed"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"varint"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int64"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"varint"}),"\u3001",(0,r.jsx)(n.code,{children:"fixed"}),"\u3001",(0,r.jsx)(n.code,{children:"tagged"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"varint"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uint64"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"varint"}),"\u3001",(0,r.jsx)(n.code,{children:"fixed"}),"\u3001",(0,r.jsx)(n.code,{children:"tagged"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"varint"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f55\u65f6\u4f7f\u7528\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"varint"}),"\uff1a\u9002\u5408\u5c0f\u503c\u5c45\u591a\uff08\u9ed8\u8ba4\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fixed"}),"\uff1a\u9002\u5408\u63a5\u8fd1\u5168\u503c\u57df\u5206\u5e03\uff08\u5982\u65f6\u95f4\u6233\u3001\u54c8\u5e0c\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tagged"}),"\uff1a\u9002\u5408\u9700\u4fdd\u7559\u7c7b\u578b\u4fe1\u606f\u7684\u573a\u666f"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"int32/uint32 \u7b80\u5199\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5bf9 int32/uint32 \u5b57\u6bb5\u53ef\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"compress"})," \u4f5c\u4e3a\u4fbf\u6377\u6807\u7b7e\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Data struct {\n    SmallValue int32  `fory:"compress"`        // Same as encoding=varint (default)\n    FixedValue uint32 `fory:"compress=false"`  // Same as encoding=fixed\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u7ec4\u5408\u6807\u7b7e",children:"\u7ec4\u5408\u6807\u7b7e"}),"\n",(0,r.jsx)(n.p,{children:"\u591a\u4e2a\u6807\u7b7e\u53ef\u4f7f\u7528\u9017\u53f7\u7ec4\u5408\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Document struct {\n    ID      int64  `fory:"id=0,encoding=fixed"`\n    Content string `fory:"id=1"`\n    Author  *User  `fory:"id=2,ref"`\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u4e0e\u5176\u4ed6\u6807\u7b7e\u5171\u5b58",children:"\u4e0e\u5176\u4ed6\u6807\u7b7e\u5171\u5b58"}),"\n",(0,r.jsx)(n.p,{children:"Fory \u6807\u7b7e\u53ef\u4e0e\u5176\u4ed6 struct tag \u5e76\u5b58\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID       int64  `json:"id" fory:"id=0"`\n    Name     string `json:"name,omitempty" fory:"id=1"`\n    Password string `json:"-" fory:"-"`\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5404\u6807\u7b7e\u547d\u540d\u7a7a\u95f4\u4e92\u4e0d\u5f71\u54cd\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u5b57\u6bb5\u53ef\u89c1\u6027",children:"\u5b57\u6bb5\u53ef\u89c1\u6027"}),"\n",(0,r.jsxs)(n.p,{children:["\u4ec5\u5904\u7406",(0,r.jsx)(n.strong,{children:"\u5bfc\u51fa\u5b57\u6bb5"}),"\uff08\u9996\u5b57\u6bcd\u5927\u5199\uff09\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"type User struct {\n    ID       int64  // Serialized\n    Name     string // Serialized\n    password string // NOT serialized (unexported, no tag needed)\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u672a\u5bfc\u51fa\u5b57\u6bb5\u59cb\u7ec8\u5ffd\u7565\uff0c\u4e0e\u662f\u5426\u914d\u7f6e tag \u65e0\u5173\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u5b57\u6bb5\u987a\u5e8f",children:"\u5b57\u6bb5\u987a\u5e8f"}),"\n",(0,r.jsx)(n.p,{children:"\u5b57\u6bb5\u4f1a\u6309\u7a33\u5b9a\u987a\u5e8f\u5e8f\u5217\u5316\uff0c\u4f9d\u636e\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u5b57\u6bb5\u540d\uff08snake_case \u5b57\u5178\u5e8f\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u5b57\u6bb5\u7c7b\u578b"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u53ef\u4fdd\u8bc1\u8de8\u8bed\u8a00\u573a\u666f\u4e0b\u7684\u5b57\u6bb5\u987a\u5e8f\u4e00\u81f4\u6027\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"struct-\u54c8\u5e0c",children:"Struct \u54c8\u5e0c"}),"\n",(0,r.jsx)(n.p,{children:"Fory \u4f1a\u57fa\u4e8e struct \u5b57\u6bb5\u8ba1\u7b97\u54c8\u5e0c\u7528\u4e8e\u7248\u672c\u6821\u9a8c\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u54c8\u5e0c\u5305\u542b\u5b57\u6bb5\u540d\u4e0e\u5b57\u6bb5\u7c7b\u578b"}),"\n",(0,r.jsx)(n.li,{children:"\u54c8\u5e0c\u4f1a\u5199\u5165\u5e8f\u5217\u5316\u6570\u636e"}),"\n",(0,r.jsxs)(n.li,{children:["\u4e0d\u5339\u914d\u4f1a\u89e6\u53d1 ",(0,r.jsx)(n.code,{children:"ErrKindHashMismatch"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u7ed3\u6784\u5b57\u6bb5\u53d8\u66f4\u4f1a\u5f71\u54cd\u54c8\u5e0c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// These produce different hashes\ntype V1 struct {\n    UserID int64\n}\n\ntype V2 struct {\n    UserId int64  // Different field name = different hash\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,r.jsx)(n.h3,{id:"api-\u54cd\u5e94\u7ed3\u6784",children:"API \u54cd\u5e94\u7ed3\u6784"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type APIResponse struct {\n    Status    int32  `json:"status" fory:"id=0"`\n    Message   string `json:"message" fory:"id=1"`\n    Data      any    `json:"data" fory:"id=2"`\n    Internal  string `json:"-" fory:"-"`  // Ignored in both JSON and Fory\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5e26\u5171\u4eab\u5f15\u7528\u7684\u7f13\u5b58\u7ed3\u6784",children:"\u5e26\u5171\u4eab\u5f15\u7528\u7684\u7f13\u5b58\u7ed3\u6784"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type CacheEntry struct {\n    Key       string\n    Value     *CachedData `fory:"ref"`      // May be shared\n    Metadata  *Metadata   `fory:"ref=false"` // Always unique\n    ExpiresAt int64\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5e26\u5faa\u73af\u5f15\u7528\u7684\u6587\u6863\u7ed3\u6784",children:"\u5e26\u5faa\u73af\u5f15\u7528\u7684\u6587\u6863\u7ed3\u6784"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Document struct {\n    ID       int64\n    Title    string\n    Parent   *Document   `fory:"ref"`  // May reference self or siblings\n    Children []*Document `fory:"ref"`\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6807\u7b7e\u89e3\u6790\u9519\u8bef",children:"\u6807\u7b7e\u89e3\u6790\u9519\u8bef"}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u518c\u9636\u6bb5\u82e5\u6807\u7b7e\u975e\u6cd5\u4f1a\u62a5\u9519\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type BadStruct struct {\n    Field int `fory:"invalid=option=format"`\n}\n\nf := fory.New()\nerr := f.RegisterStruct(BadStruct{}, 1)\n// Error: ErrKindInvalidTag\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["\u654f\u611f\u5b57\u6bb5\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"-"})]}),"\uff1a\u5982\u5bc6\u7801\u3001\u4ee4\u724c\u3001\u5185\u90e8\u72b6\u6001"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5171\u4eab\u5bf9\u8c61\u542f\u7528 ref"}),"\uff1a\u540c\u4e00\u6307\u9488\u53ef\u80fd\u591a\u6b21\u51fa\u73b0\u65f6\u5f00\u542f"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7b80\u5355\u552f\u4e00\u5b57\u6bb5\u7981\u7528 ref"}),"\uff1a\u53ef\u505a\u6027\u80fd\u4f18\u5316"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4fdd\u6301\u547d\u540d\u4e00\u81f4"}),"\uff1a\u8de8\u8bed\u8a00\u5b57\u6bb5\u540d\u5e94\u4fdd\u6301\u7a33\u5b9a"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8bb0\u5f55\u6807\u7b7e\u610f\u56fe"}),"\uff1a\u975e\u663e\u5f0f\u914d\u7f6e\u5efa\u8bae\u8865\u5145\u6ce8\u91ca\u8bf4\u660e"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5e38\u89c1\u6a21\u5f0f",children:"\u5e38\u89c1\u6a21\u5f0f"}),"\n",(0,r.jsx)(n.h3,{id:"\u5ffd\u7565\u8ba1\u7b97\u5b57\u6bb5",children:"\u5ffd\u7565\u8ba1\u7b97\u5b57\u6bb5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Rectangle struct {\n    Width  float64\n    Height float64\n    Area   float64 `fory:"-"`  // Computed, don\'t serialize\n}\n\nfunc (r *Rectangle) ComputeArea() {\n    r.Area = r.Width * r.Height\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5e26\u7236\u6307\u9488\u7684\u5faa\u73af\u7ed3\u6784",children:"\u5e26\u7236\u6307\u9488\u7684\u5faa\u73af\u7ed3\u6784"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type TreeNode struct {\n    Value    string\n    Parent   *TreeNode   `fory:"ref"`  // Circular back-reference\n    Children []*TreeNode `fory:"ref"`\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u6df7\u5408\u5e8f\u5217\u5316\u9700\u6c42",children:"\u6df7\u5408\u5e8f\u5217\u5316\u9700\u6c42"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Session struct {\n    ID        string\n    UserID    int64\n    Token     string    `fory:"-"`           // Security: don\'t serialize\n    User      *User     `fory:"ref"`    // May be shared across sessions\n    CreatedAt int64\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u76f8\u5173\u4e3b\u9898",children:"\u76f8\u5173\u4e3b\u9898"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/next/guide/go/references",children:"\u5f15\u7528"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/next/guide/go/basic_serialization",children:"\u57fa\u7840\u5e8f\u5217\u5316"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/next/guide/go/schema_evolution",children:"Schema \u6f14\u8fdb"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>t,a:()=>d});var r=i(67294);const s={},l=r.createContext(s);function d(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);