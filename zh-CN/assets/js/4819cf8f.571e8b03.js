"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[33960],{94258:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var r=n(85893),s=n(11151);const t={title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,a={id:"guide/swift/basic_serialization",title:"Basic Serialization",description:"This page covers object graph serialization and core API usage in Swift.",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/swift/basic-serialization.md",sourceDirName:"guide/swift",slug:"/guide/swift/basic_serialization",permalink:"/zh-CN/docs/next/guide/swift/basic_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/swift/basic-serialization.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Configuration",permalink:"/zh-CN/docs/next/guide/swift/configuration"},next:{title:"Type Registration",permalink:"/zh-CN/docs/next/guide/swift/type_registration"}},c={},d=[{value:"Object Graph Serialization",id:"object-graph-serialization",level:2},{value:"Working with Existing Buffers",id:"working-with-existing-buffers",level:2},{value:"Built-in Supported Types",id:"built-in-supported-types",level:2},{value:"Primitive and scalar",id:"primitive-and-scalar",level:3},{value:"Date and time",id:"date-and-time",level:3},{value:"Collections",id:"collections",level:3},{value:"Dynamic",id:"dynamic",level:3}];function l(e){const i={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{children:"This page covers object graph serialization and core API usage in Swift."}),"\n",(0,r.jsx)(i.h2,{id:"object-graph-serialization",children:"Object Graph Serialization"}),"\n",(0,r.jsxs)(i.p,{children:["Use ",(0,r.jsx)(i.code,{children:"@ForyObject"})," on structs/classes/enums, register types, then serialize and deserialize."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-swift",children:'import Foundation\nimport Fory\n\n@ForyObject\nstruct Address: Equatable {\n    var street: String = ""\n    var zip: Int32 = 0\n}\n\n@ForyObject\nstruct Person: Equatable {\n    var id: Int64 = 0\n    var name: String = ""\n    var nickname: String? = nil\n    var tags: Set<String> = []\n    var scores: [Int32] = []\n    var addresses: [Address] = []\n    var metadata: [Int8: Int32?] = [:]\n}\n\nlet fory = Fory()\nfory.register(Address.self, id: 100)\nfory.register(Person.self, id: 101)\n\nlet person = Person(\n    id: 42,\n    name: "Alice",\n    nickname: nil,\n    tags: ["swift", "xlang"],\n    scores: [10, 20, 30],\n    addresses: [Address(street: "Main", zip: 94107)],\n    metadata: [1: 100, 2: nil]\n)\n\nlet data = try fory.serialize(person)\nlet decoded: Person = try fory.deserialize(data)\nassert(decoded == person)\n'})}),"\n",(0,r.jsx)(i.h2,{id:"working-with-existing-buffers",children:"Working with Existing Buffers"}),"\n",(0,r.jsxs)(i.p,{children:["Append serialized bytes to an existing ",(0,r.jsx)(i.code,{children:"Data"})," and deserialize from ",(0,r.jsx)(i.code,{children:"ByteBuffer"}),"."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-swift",children:"var output = Data()\ntry fory.serialize(person, to: &output)\n\nlet inputBuffer = ByteBuffer(data: output)\nlet fromBuffer: Person = try fory.deserialize(from: inputBuffer)\nassert(fromBuffer == person)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"built-in-supported-types",children:"Built-in Supported Types"}),"\n",(0,r.jsx)(i.h3,{id:"primitive-and-scalar",children:"Primitive and scalar"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"Bool"})}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"Int8"}),", ",(0,r.jsx)(i.code,{children:"Int16"}),", ",(0,r.jsx)(i.code,{children:"Int32"}),", ",(0,r.jsx)(i.code,{children:"Int64"}),", ",(0,r.jsx)(i.code,{children:"Int"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"UInt8"}),", ",(0,r.jsx)(i.code,{children:"UInt16"}),", ",(0,r.jsx)(i.code,{children:"UInt32"}),", ",(0,r.jsx)(i.code,{children:"UInt64"}),", ",(0,r.jsx)(i.code,{children:"UInt"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"Float"}),", ",(0,r.jsx)(i.code,{children:"Double"})]}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"String"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"Data"})}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"date-and-time",children:"Date and time"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"Date"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"ForyDate"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"ForyTimestamp"})}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"collections",children:"Collections"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"[T]"})," where ",(0,r.jsx)(i.code,{children:"T: Serializer"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"Set<T>"})," where ",(0,r.jsx)(i.code,{children:"T: Serializer & Hashable"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"[K: V]"})," where ",(0,r.jsx)(i.code,{children:"K: Serializer & Hashable"}),", ",(0,r.jsx)(i.code,{children:"V: Serializer"})]}),"\n",(0,r.jsxs)(i.li,{children:["Optional variants (",(0,r.jsx)(i.code,{children:"T?"}),")"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"dynamic",children:"Dynamic"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"Any"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"AnyObject"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"any Serializer"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"AnyHashable"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"[Any]"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"[String: Any]"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"[Int32: Any]"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"[AnyHashable: Any]"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,s.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,i,n)=>{n.d(i,{Z:()=>a,a:()=>o});var r=n(67294);const s={},t=r.createContext(s);function o(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);