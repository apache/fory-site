"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[97136],{6005:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var t=i(85893),s=i(11151);const r={title:"Polymorphism and Dynamic Types",sidebar_position:7,id:"polymorphism",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,l={id:"guide/swift/polymorphism",title:"Polymorphism and Dynamic Types",description:"Fory Swift supports dynamic serialization for Any, AnyObject, and any Serializer.",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/swift/polymorphism.md",sourceDirName:"guide/swift",slug:"/guide/swift/polymorphism",permalink:"/zh-CN/docs/next/guide/swift/polymorphism",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/swift/polymorphism.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Polymorphism and Dynamic Types",sidebar_position:7,id:"polymorphism",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Shared and Circular References",permalink:"/zh-CN/docs/next/guide/swift/references"},next:{title:"Schema Evolution",permalink:"/zh-CN/docs/next/guide/swift/schema_evolution"}},c={},a=[{value:"Top-level Dynamic APIs",id:"top-level-dynamic-apis",level:2},{value:"Dynamic Fields in <code>@ForyObject</code> Types",id:"dynamic-fields-in-foryobject-types",level:2},{value:"Concrete Type Registration Still Applies",id:"concrete-type-registration-still-applies",level:2},{value:"Null Semantics",id:"null-semantics",level:2},{value:"Current Limitations",id:"current-limitations",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Fory Swift supports dynamic serialization for ",(0,t.jsx)(n.code,{children:"Any"}),", ",(0,t.jsx)(n.code,{children:"AnyObject"}),", and ",(0,t.jsx)(n.code,{children:"any Serializer"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"top-level-dynamic-apis",children:"Top-level Dynamic APIs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"let fory = Fory()\n\nlet dynamic: Any = Int32(7)\nlet data = try fory.serialize(dynamic)\nlet decoded: Any = try fory.deserialize(data)\n"})}),"\n",(0,t.jsx)(n.p,{children:"Equivalent overloads exist for:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"AnyObject"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"any Serializer"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"AnyHashable"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[Any]"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[String: Any]"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[Int32: Any]"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[AnyHashable: Any]"})}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"dynamic-fields-in-foryobject-types",children:["Dynamic Fields in ",(0,t.jsx)(n.code,{children:"@ForyObject"})," Types"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"@ForyObject\nstruct DynamicHolder {\n    var value: Any = ForyAnyNullValue()\n    var list: [Any] = []\n    var byName: [String: Any] = [:]\n    var byId: [Int32: Any] = [:]\n    var byDynamicKey: [AnyHashable: Any] = [:]\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"concrete-type-registration-still-applies",children:"Concrete Type Registration Still Applies"}),"\n",(0,t.jsx)(n.p,{children:"If dynamic values contain user-defined runtime types, register those concrete types."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'@ForyObject\nstruct Address {\n    var street: String = ""\n    var zip: Int32 = 0\n}\n\nlet fory = Fory()\nfory.register(Address.self, id: 100)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"null-semantics",children:"Null Semantics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Any"})," null representation: ",(0,t.jsx)(n.code,{children:"ForyAnyNullValue"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AnyObject"})," null representation: ",(0,t.jsx)(n.code,{children:"NSNull"})]}),"\n",(0,t.jsx)(n.li,{children:"Optional dynamic values map to the corresponding null representation on decode"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"current-limitations",children:"Current Limitations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AnyHashable"})," keys must wrap runtime values that are both ",(0,t.jsx)(n.code,{children:"Hashable"})," and supported by Fory dynamic serialization"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>o});var t=i(67294);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);