"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[55157],{80294:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>a});var r=i(85893),s=i(11151);const l={title:"Java \u5e8f\u5217\u5316",sidebar_position:0,id:"serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},t=void 0,o={id:"guide/serialization",title:"Java \u5e8f\u5217\u5316",description:"\u5f53\u53ea\u9700\u8981 Java \u5bf9\u8c61\u5e8f\u5217\u5316\u65f6\uff0c\u8be5\u6a21\u5f0f\u76f8\u6bd4\u8de8\u8bed\u8a00\u5bf9\u8c61\u56fe\u5e8f\u5217\u5316\u5177\u6709\u66f4\u4f18\u7684\u6027\u80fd\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.12/guide/java_serialization_guide.md",sourceDirName:"guide",slug:"/guide/serialization",permalink:"/zh-CN/docs/0.12/guide/serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.12/guide/java_serialization_guide.md",tags:[],version:"0.12",sidebarPosition:0,frontMatter:{title:"Java \u5e8f\u5217\u5316",sidebar_position:0,id:"serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"\u8de8\u8bed\u8a00\u7c7b\u578b\u6620\u5c04",permalink:"/zh-CN/docs/0.12/guide/xlang_type_mapping"},next:{title:"Scala \u5e8f\u5217\u5316",permalink:"/zh-CN/docs/0.12/guide/serialization"}},c={},a=[{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"ForyBuilder \u914d\u7f6e\u9009\u9879",id:"forybuilder-\u914d\u7f6e\u9009\u9879",level:2},{value:"\u9ad8\u7ea7\u7528\u6cd5",id:"\u9ad8\u7ea7\u7528\u6cd5",level:2},{value:"Apache Fory\u2122 \u521b\u5efa",id:"apache-fory-\u521b\u5efa",level:3},{value:"\u5e8f\u5217\u5316\u4e2d\u7684\u7c7b\u7ed3\u6784\u6f14\u5316",id:"\u5e8f\u5217\u5316\u4e2d\u7684\u7c7b\u7ed3\u6784\u6f14\u5316",level:3},{value:"\u538b\u7f29",id:"\u538b\u7f29",level:3},{value:"\u5bf9\u8c61\u6df1\u62f7\u8d1d",id:"\u5bf9\u8c61\u6df1\u62f7\u8d1d",level:3},{value:"\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",id:"\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",level:3},{value:"\u5b9e\u73b0\u96c6\u5408\u7c7b\u5e8f\u5217\u5316\u5668",id:"\u5b9e\u73b0\u96c6\u5408\u7c7b\u5e8f\u5217\u5316\u5668",level:3},{value:"\u652f\u6301 JIT \u7684\u96c6\u5408\u5e8f\u5217\u5316\u5668\u5b9e\u73b0",id:"\u652f\u6301-jit-\u7684\u96c6\u5408\u5e8f\u5217\u5316\u5668\u5b9e\u73b0",level:4},{value:"\u4e0d\u652f\u6301 JIT \u7684\u81ea\u5b9a\u4e49\u96c6\u5408\u5e8f\u5217\u5316\u5668",id:"\u4e0d\u652f\u6301-jit-\u7684\u81ea\u5b9a\u4e49\u96c6\u5408\u5e8f\u5217\u5316\u5668",level:4},{value:"\u5b9e\u73b0 collection-like \u7c7b\u578b\u5e8f\u5217\u5316\u5668",id:"\u5b9e\u73b0-collection-like-\u7c7b\u578b\u5e8f\u5217\u5316\u5668",level:4},{value:"\u81ea\u5b9a\u4e49 Map \u5e8f\u5217\u5316\u5668",id:"\u81ea\u5b9a\u4e49-map-\u5e8f\u5217\u5316\u5668",level:3},{value:"\u652f\u6301 JIT \u7684 Map \u5e8f\u5217\u5316\u5668\u793a\u4f8b",id:"\u652f\u6301-jit-\u7684-map-\u5e8f\u5217\u5316\u5668\u793a\u4f8b",level:4},{value:"\u4e0d\u652f\u6301 JIT \u7684\u81ea\u5b9a\u4e49 Map \u5e8f\u5217\u5316\u5668",id:"\u4e0d\u652f\u6301-jit-\u7684\u81ea\u5b9a\u4e49-map-\u5e8f\u5217\u5316\u5668",level:4},{value:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",id:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",level:3},{value:"\u5b89\u5168\u4e0e\u7c7b\u6ce8\u518c",id:"\u5b89\u5168\u4e0e\u7c7b\u6ce8\u518c",level:3},{value:"\u6309\u540d\u79f0\u6ce8\u518c\u7c7b",id:"\u6309\u540d\u79f0\u6ce8\u518c\u7c7b",level:3},{value:"\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316",id:"\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316",level:3},{value:"\u5143\u6570\u636e\u5171\u4eab\uff08Meta Sharing\uff09",id:"\u5143\u6570\u636e\u5171\u4eabmeta-sharing",level:3},{value:"\u53cd\u5e8f\u5217\u5316\u4e0d\u5b58\u5728\u7684\u7c7b",id:"\u53cd\u5e8f\u5217\u5316\u4e0d\u5b58\u5728\u7684\u7c7b",level:3},{value:"\u7c7b\u578b\u6620\u5c04\uff08\u8de8\u7c7b\u578b\u6df1\u62f7\u8d1d/\u6620\u5c04\uff09",id:"\u7c7b\u578b\u6620\u5c04\u8de8\u7c7b\u578b\u6df1\u62f7\u8d1d\u6620\u5c04",level:3},{value:"\u8fc1\u79fb",id:"\u8fc1\u79fb",level:2},{value:"JDK \u5e8f\u5217\u5316\u8fc1\u79fb",id:"jdk-\u5e8f\u5217\u5316\u8fc1\u79fb",level:3},{value:"Apache Fory\u2122 \u7248\u672c\u5347\u7ea7",id:"apache-fory-\u7248\u672c\u5347\u7ea7",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:2},{value:"\u7c7b\u7ed3\u6784\u4e0d\u4e00\u81f4\u4e0e\u7248\u672c\u6821\u9a8c",id:"\u7c7b\u7ed3\u6784\u4e0d\u4e00\u81f4\u4e0e\u7248\u672c\u6821\u9a8c",level:3},{value:"POJO \u8de8\u7c7b\u578b\u53cd\u5e8f\u5217\u5316",id:"pojo-\u8de8\u7c7b\u578b\u53cd\u5e8f\u5217\u5316",level:3},{value:"\u53cd\u5e8f\u5217\u5316 API \u4f7f\u7528\u9519\u8bef",id:"\u53cd\u5e8f\u5217\u5316-api-\u4f7f\u7528\u9519\u8bef",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u5f53\u53ea\u9700\u8981 Java \u5bf9\u8c61\u5e8f\u5217\u5316\u65f6\uff0c\u8be5\u6a21\u5f0f\u76f8\u6bd4\u8de8\u8bed\u8a00\u5bf9\u8c61\u56fe\u5e8f\u5217\u5316\u5177\u6709\u66f4\u4f18\u7684\u6027\u80fd\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),"\n",(0,r.jsxs)(n.p,{children:["\u6ce8\u610f\uff0cFory \u5b9e\u4f8b\u7684\u521b\u5efa\u5f00\u9500\u8f83\u5927\uff0c",(0,r.jsx)(n.strong,{children:"Fory \u5b9e\u4f8b\u5e94\u5728\u591a\u6b21\u5e8f\u5217\u5316\u95f4\u590d\u7528"}),"\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u65b0\u5efa\u3002\n\u5efa\u8bae\u5c06 Fory \u4fdd\u5b58\u5728\u9759\u6001\u5168\u5c40\u53d8\u91cf\u3001\u5355\u4f8b\u5bf9\u8c61\u6216\u6709\u9650\u6570\u91cf\u7684\u5b9e\u4f8b\u53d8\u91cf\u4e2d\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u5355\u7ebf\u7a0b\u573a\u666f\u4e0b Fory \u7684\u7528\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"import java.util.List;\nimport java.util.Arrays;\n\nimport org.apache.fory.*;\nimport org.apache.fory.config.*;\n\npublic class Example {\n  public static void main(String[] args) {\n    SomeClass object = new SomeClass();\n    // \u6ce8\u610f\uff1aFory \u5b9e\u4f8b\u5e94\u5728\u591a\u6b21\u5e8f\u5217\u5316\u95f4\u590d\u7528\n    Fory fory = Fory.builder().withLanguage(Language.JAVA)\n      .requireClassRegistration(true)\n      .build();\n    // \u6ce8\u518c\u7c7b\u578b\u53ef\u51cf\u5c11\u7c7b\u540d\u5e8f\u5217\u5316\u5f00\u9500\uff0c\u4f46\u4e0d\u662f\u5f3a\u5236\u7684\u3002\n    // \u542f\u7528\u7c7b\u6ce8\u518c\u540e\uff0c\u6240\u6709\u81ea\u5b9a\u4e49\u7c7b\u578b\u90fd\u5fc5\u987b\u6ce8\u518c\u3002\n    fory.register(SomeClass.class);\n    byte[] bytes = fory.serialize(object);\n    System.out.println(fory.deserialize(bytes));\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u591a\u7ebf\u7a0b\u573a\u666f\u4e0b Fory \u7684\u7528\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"import java.util.List;\nimport java.util.Arrays;\n\nimport org.apache.fory.*;\nimport org.apache.fory.config.*;\n\npublic class Example {\n  public static void main(String[] args) {\n    SomeClass object = new SomeClass();\n    // \u6ce8\u610f\uff1aFory \u5b9e\u4f8b\u5e94\u5728\u591a\u6b21\u5e8f\u5217\u5316\u95f4\u590d\u7528\n    ThreadSafeFory fory = new ThreadLocalFory(classLoader -> {\n      Fory f = Fory.builder().withLanguage(Language.JAVA)\n        .withClassLoader(classLoader).build();\n      f.register(SomeClass.class);\n      return f;\n    });\n    byte[] bytes = fory.serialize(object);\n    System.out.println(fory.deserialize(bytes));\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fory \u5b9e\u4f8b\u590d\u7528\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"import java.util.List;\nimport java.util.Arrays;\n\nimport org.apache.fory.*;\nimport org.apache.fory.config.*;\n\npublic class Example {\n  // \u590d\u7528 fory \u5b9e\u4f8b\n  private static final ThreadSafeFory fory = new ThreadLocalFory(classLoader -> {\n    Fory f = Fory.builder().withLanguage(Language.JAVA)\n      .withClassLoader(classLoader).build();\n    f.register(SomeClass.class);\n    return f;\n  });\n\n  public static void main(String[] args) {\n    SomeClass object = new SomeClass();\n    byte[] bytes = fory.serialize(object);\n    System.out.println(fory.deserialize(bytes));\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"forybuilder-\u914d\u7f6e\u9009\u9879",children:"ForyBuilder \u914d\u7f6e\u9009\u9879"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u9009\u9879\u540d"}),(0,r.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,r.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timeRefIgnored"})}),(0,r.jsxs)(n.td,{children:["\u662f\u5426\u5ffd\u7565\u6240\u6709\u5728 ",(0,r.jsx)(n.code,{children:"TimeSerializers"})," \u6ce8\u518c\u7684\u65f6\u95f4\u7c7b\u578b\u53ca\u5176\u5b50\u7c7b\u7684\u5f15\u7528\u8ddf\u8e2a\uff08\u5f53\u5f15\u7528\u8ddf\u8e2a\u5f00\u542f\u65f6\uff09\u3002\u5982\u9700\u5bf9\u65f6\u95f4\u7c7b\u578b\u542f\u7528\u5f15\u7528\u8ddf\u8e2a\uff0c\u53ef\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"Fory#registerSerializer(Class, Serializer)"})," \u6ce8\u518c\u3002\u4f8b\u5982\uff1a",(0,r.jsx)(n.code,{children:"fory.registerSerializer(Date.class, new DateSerializer(fory, true))"}),"\u3002\u6ce8\u610f\uff0c\u542f\u7528\u5f15\u7528\u8ddf\u8e2a\u9700\u5728\u5305\u542b\u65f6\u95f4\u5b57\u6bb5\u7684\u7c7b\u578b\u4ee3\u7801\u751f\u6210\u524d\u5b8c\u6210\uff0c\u5426\u5219\u8fd9\u4e9b\u5b57\u6bb5\u4ecd\u4f1a\u8df3\u8fc7\u5f15\u7528\u8ddf\u8e2a\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"compressInt"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528 int \u538b\u7f29\u4ee5\u51cf\u5c0f\u5e8f\u5217\u5316\u4f53\u79ef\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"compressLong"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528 long \u538b\u7f29\u4ee5\u51cf\u5c0f\u5e8f\u5217\u5316\u4f53\u79ef\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"compressString"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528\u5b57\u7b26\u4e32\u538b\u7f29\u4ee5\u51cf\u5c0f\u5e8f\u5217\u5316\u4f53\u79ef\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"classLoader"})}),(0,r.jsxs)(n.td,{children:["\u7c7b\u52a0\u8f7d\u5668\u4e0d\u5efa\u8bae\u52a8\u6001\u53d8\u66f4\uff0cFory \u4f1a\u7f13\u5b58\u7c7b\u5143\u6570\u636e\u3002\u5982\u9700\u53d8\u66f4\u7c7b\u52a0\u8f7d\u5668\uff0c\u8bf7\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"LoaderBinding"})," \u6216 ",(0,r.jsx)(n.code,{children:"ThreadSafeFory"}),"\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Thread.currentThread().getContextClassLoader()"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"compatibleMode"})}),(0,r.jsxs)(n.td,{children:["\u7c7b\u578b\u524d\u5411/\u540e\u5411\u517c\u5bb9\u6027\u914d\u7f6e\u3002\u4e0e ",(0,r.jsx)(n.code,{children:"checkClassVersion"})," \u914d\u7f6e\u76f8\u5173\u3002",(0,r.jsx)(n.code,{children:"SCHEMA_CONSISTENT"}),"\uff1a\u5e8f\u5217\u5316\u7aef\u4e0e\u53cd\u5e8f\u5217\u5316\u7aef\u7c7b\u7ed3\u6784\u9700\u4e00\u81f4\u3002",(0,r.jsx)(n.code,{children:"COMPATIBLE"}),"\uff1a\u5e8f\u5217\u5316\u7aef\u4e0e\u53cd\u5e8f\u5217\u5316\u7aef\u7c7b\u7ed3\u6784\u53ef\u4e0d\u540c\uff0c\u53ef\u72ec\u7acb\u589e\u5220\u5b57\u6bb5\u3002",(0,r.jsx)(n.a,{href:"#%E7%B1%BB%E7%BB%93%E6%9E%84%E4%B8%8D%E4%B8%80%E8%87%B4%E4%B8%8E%E7%89%88%E6%9C%AC%E6%A0%A1%E9%AA%8C",children:"\u8be6\u89c1"}),"\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CompatibleMode.SCHEMA_CONSISTENT"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"checkClassVersion"})}),(0,r.jsxs)(n.td,{children:["\u662f\u5426\u6821\u9a8c\u7c7b\u7ed3\u6784\u4e00\u81f4\u6027\u3002\u542f\u7528\u540e\uff0cFory \u4f1a\u5199\u5165\u5e76\u6821\u9a8c ",(0,r.jsx)(n.code,{children:"classVersionHash"}),"\u3002\u82e5\u542f\u7528 ",(0,r.jsx)(n.code,{children:"CompatibleMode#COMPATIBLE"}),"\uff0c\u6b64\u9879\u4f1a\u81ea\u52a8\u5173\u95ed\u3002\u9664\u975e\u80fd\u786e\u4fdd\u7c7b\u4e0d\u4f1a\u6f14\u5316\uff0c\u5426\u5219\u4e0d\u5efa\u8bae\u5173\u95ed\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"checkJdkClassSerializable"})}),(0,r.jsxs)(n.td,{children:["\u662f\u5426\u6821\u9a8c ",(0,r.jsx)(n.code,{children:"java.*"})," \u4e0b\u7684\u7c7b\u5b9e\u73b0\u4e86 ",(0,r.jsx)(n.code,{children:"Serializable"})," \u63a5\u53e3\u3002\u82e5\u672a\u5b9e\u73b0\uff0cFory \u4f1a\u629b\u51fa ",(0,r.jsx)(n.code,{children:"UnsupportedOperationException"}),"\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"registerGuavaTypes"})}),(0,r.jsxs)(n.td,{children:["\u662f\u5426\u9884\u6ce8\u518c Guava \u7c7b\u578b\uff08\u5982 ",(0,r.jsx)(n.code,{children:"RegularImmutableMap"}),"/",(0,r.jsx)(n.code,{children:"RegularImmutableList"}),"\uff09\u3002\u8fd9\u4e9b\u7c7b\u578b\u867d\u975e\u516c\u5f00 API\uff0c\u4f46\u8f83\u4e3a\u7a33\u5b9a\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requireClassRegistration"})}),(0,r.jsx)(n.td,{children:"\u5173\u95ed\u540e\u53ef\u53cd\u5e8f\u5217\u5316\u672a\u77e5\u7c7b\u578b\uff0c\u7075\u6d3b\u6027\u66f4\u9ad8\uff0c\u4f46\u5b58\u5728\u5b89\u5168\u98ce\u9669\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"suppressClassRegistrationWarnings"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u5c4f\u853d\u7c7b\u6ce8\u518c\u8b66\u544a\u3002\u8b66\u544a\u53ef\u7528\u4e8e\u5b89\u5168\u5ba1\u8ba1\uff0c\u4f46\u53ef\u80fd\u5f71\u54cd\u4f53\u9a8c\uff0c\u9ed8\u8ba4\u5f00\u542f\u5c4f\u853d\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metaShareEnabled"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528\u5143\u6570\u636e\u5171\u4eab\u6a21\u5f0f\u3002"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"true"}),"\uff08\u82e5\u8bbe\u7f6e\u4e86 ",(0,r.jsx)(n.code,{children:"CompatibleMode.Compatible"}),"\uff0c\u5426\u5219\u4e3a false\uff09"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scopedMetaShareEnabled"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528\u5355\u6b21\u5e8f\u5217\u5316\u8303\u56f4\u5185\u7684\u5143\u6570\u636e\u72ec\u4eab\u3002\u8be5\u5143\u6570\u636e\u4ec5\u5728\u672c\u6b21\u5e8f\u5217\u5316\u4e2d\u6709\u6548\uff0c\u4e0d\u4e0e\u5176\u4ed6\u5e8f\u5217\u5316\u5171\u4eab\u3002"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"true"}),"\uff08\u82e5\u8bbe\u7f6e\u4e86 ",(0,r.jsx)(n.code,{children:"CompatibleMode.Compatible"}),"\uff0c\u5426\u5219\u4e3a false\uff09"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metaCompressor"})}),(0,r.jsxs)(n.td,{children:["\u8bbe\u7f6e\u5143\u6570\u636e\u538b\u7f29\u5668\u3002\u9ed8\u8ba4\u4f7f\u7528\u57fa\u4e8e ",(0,r.jsx)(n.code,{children:"Deflater"})," \u7684 ",(0,r.jsx)(n.code,{children:"DeflaterMetaCompressor"}),"\uff0c\u53ef\u81ea\u5b9a\u4e49\u5982 ",(0,r.jsx)(n.code,{children:"zstd"})," \u7b49\u66f4\u9ad8\u538b\u7f29\u6bd4\u7684\u538b\u7f29\u5668\u3002\u9700\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u3002"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DeflaterMetaCompressor"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"deserializeNonexistentClass"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u5141\u8bb8\u53cd\u5e8f\u5217\u5316/\u8df3\u8fc7\u4e0d\u5b58\u5728\u7684\u7c7b\u7684\u6570\u636e\u3002"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"true"}),"\uff08\u82e5\u8bbe\u7f6e\u4e86 ",(0,r.jsx)(n.code,{children:"CompatibleMode.Compatible"}),"\uff0c\u5426\u5219\u4e3a false\uff09"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"codeGenEnabled"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528\u4ee3\u7801\u751f\u6210\u3002\u5173\u95ed\u540e\u9996\u6b21\u5e8f\u5217\u5316\u66f4\u5feb\uff0c\u4f46\u540e\u7eed\u5e8f\u5217\u5316\u6027\u80fd\u8f83\u4f4e\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"asyncCompilationEnabled"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528\u5f02\u6b65\u7f16\u8bd1\u3002\u542f\u7528\u540e\uff0c\u5e8f\u5217\u5316\u5148\u7528\u89e3\u91ca\u6a21\u5f0f\uff0cJIT \u5b8c\u6210\u540e\u5207\u6362\u4e3a JIT \u6a21\u5f0f\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scalaOptimizationEnabled"})}),(0,r.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528 Scala \u7279\u5b9a\u4f18\u5316\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"copyRef"})}),(0,r.jsx)(n.td,{children:"\u5173\u95ed\u540e\uff0c\u6df1\u62f7\u8d1d\u6027\u80fd\u66f4\u597d\uff0c\u4f46\u4f1a\u5ffd\u7565\u5faa\u73af\u548c\u5171\u4eab\u5f15\u7528\u3002\u5bf9\u8c61\u56fe\u4e2d\u7684\u540c\u4e00\u5f15\u7528\u4f1a\u88ab\u62f7\u8d1d\u4e3a\u4e0d\u540c\u5bf9\u8c61\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"serializeEnumByName"})}),(0,r.jsx)(n.td,{children:"\u542f\u7528\u540e\uff0c\u679a\u4e3e\u6309\u540d\u79f0\u5e8f\u5217\u5316\uff0c\u5426\u5219\u6309 ordinal\u3002"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u9ad8\u7ea7\u7528\u6cd5",children:"\u9ad8\u7ea7\u7528\u6cd5"}),"\n",(0,r.jsx)(n.h3,{id:"apache-fory-\u521b\u5efa",children:"Apache Fory\u2122 \u521b\u5efa"}),"\n",(0,r.jsx)(n.p,{children:"\u5355\u7ebf\u7a0b Fory \u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = Fory.builder()\n  .withLanguage(Language.JAVA)\n  // \u542f\u7528\u5171\u4eab/\u5faa\u73af\u5f15\u7528\u8ddf\u8e2a\u3002\u82e5\u65e0\u91cd\u590d\u5f15\u7528\u53ef\u5173\u95ed\u4ee5\u63d0\u5347\u6027\u80fd\u3002\n  .withRefTracking(false)\n  .withCompatibleMode(CompatibleMode.SCHEMA_CONSISTENT)\n  // \u542f\u7528\u7c7b\u578b\u524d\u5411/\u540e\u5411\u517c\u5bb9\n  // \u82e5\u8ffd\u6c42\u66f4\u5c0f\u4f53\u79ef\u548c\u66f4\u9ad8\u6027\u80fd\u53ef\u5173\u95ed\n  // .withCompatibleMode(CompatibleMode.COMPATIBLE)\n  // \u542f\u7528\u5f02\u6b65\u591a\u7ebf\u7a0b\u7f16\u8bd1\n  .withAsyncCompilation(true)\n  .build();\nbyte[] bytes = fory.serialize(object);\nSystem.out.println(fory.deserialize(bytes));\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7ebf\u7a0b\u5b89\u5168 Fory \u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"ThreadSafeFory fory = Fory.builder()\n  .withLanguage(Language.JAVA)\n  // \u542f\u7528\u5171\u4eab/\u5faa\u73af\u5f15\u7528\u8ddf\u8e2a\u3002\u82e5\u65e0\u91cd\u590d\u5f15\u7528\u53ef\u5173\u95ed\u4ee5\u63d0\u5347\u6027\u80fd\u3002\n  .withRefTracking(false)\n  // \u542f\u7528 int \u538b\u7f29\n  // .withIntCompressed(true)\n  // \u542f\u7528 long \u538b\u7f29\n  // .withLongCompressed(true)\n  .withCompatibleMode(CompatibleMode.SCHEMA_CONSISTENT)\n  // \u542f\u7528\u7c7b\u578b\u524d\u5411/\u540e\u5411\u517c\u5bb9\n  // \u82e5\u8ffd\u6c42\u66f4\u5c0f\u4f53\u79ef\u548c\u66f4\u9ad8\u6027\u80fd\u53ef\u5173\u95ed\n  // .withCompatibleMode(CompatibleMode.COMPATIBLE)\n  // \u542f\u7528\u5f02\u6b65\u591a\u7ebf\u7a0b\u7f16\u8bd1\n  .withAsyncCompilation(true)\n  .buildThreadSafeFory();\nbyte[] bytes = fory.serialize(object);\nSystem.out.println(fory.deserialize(bytes));\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5e8f\u5217\u5316\u4e2d\u7684\u7c7b\u7ed3\u6784\u6f14\u5316",children:"\u5e8f\u5217\u5316\u4e2d\u7684\u7c7b\u7ed3\u6784\u6f14\u5316"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u5b9e\u9645\u7cfb\u7edf\u4e2d\uff0c\u5e8f\u5217\u5316\u7528\u5230\u7684\u7c7b\u7ed3\u6784\u53ef\u80fd\u4f1a\u968f\u65f6\u95f4\u53d8\u5316\uff0c\u6bd4\u5982\u5b57\u6bb5\u7684\u589e\u5220\u3002\u5f53\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7aef\u4f7f\u7528\u4e0d\u540c\u7248\u672c\u7684 jar \u65f6\uff0c\u7c7b\u7ed3\u6784\u53ef\u80fd\u4e0d\u4e00\u81f4\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["Fory \u9ed8\u8ba4\u91c7\u7528 ",(0,r.jsx)(n.code,{children:"CompatibleMode.SCHEMA_CONSISTENT"}),"\uff0c\u5373\u8981\u6c42\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7aef\u7c7b\u7ed3\u6784\u4e00\u81f4\uff0c\u4ee5\u83b7\u5f97\u6700\u5c0f\u7684\u5e8f\u5217\u5316\u4f53\u79ef\u548c\u6700\u9ad8\u6027\u80fd\u3002\u5982\u679c\u7ed3\u6784\u4e0d\u4e00\u81f4\uff0c\u53cd\u5e8f\u5217\u5316\u4f1a\u5931\u8d25\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u9700\u652f\u6301\u7c7b\u7ed3\u6784\u6f14\u5316\uff08\u524d\u5411/\u540e\u5411\u517c\u5bb9\uff09\uff0c\u9700\u5c06 Fory \u914d\u7f6e\u4e3a ",(0,r.jsx)(n.code,{children:"CompatibleMode.COMPATIBLE"}),"\uff0c\u5141\u8bb8\u5b57\u6bb5\u589e\u5220\uff0c\u53cd\u5e8f\u5217\u5316\u7aef\u53ef\u81ea\u52a8\u9002\u914d\u4e0d\u540c\u7ed3\u6784\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = Fory.builder()\n  .withCompatibleMode(CompatibleMode.COMPATIBLE)\n  .build();\n\nbyte[] bytes = fory.serialize(object);\nSystem.out.println(fory.deserialize(bytes));\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u517c\u5bb9\u6a21\u5f0f\u4e0b\uff0c\u7c7b\u5143\u6570\u636e\u4f1a\u5199\u5165\u5e8f\u5217\u5316\u7ed3\u679c\u3002Apache Fory\u2122 \u91c7\u7528\u9ad8\u6548\u538b\u7f29\u7b97\u6cd5\u964d\u4f4e\u5143\u6570\u636e\u5f00\u9500\uff0c\u4f46\u4ecd\u4f1a\u6709\u4e00\u5b9a\u4f53\u79ef\u589e\u52a0\u3002\u4e3a\u8fdb\u4e00\u6b65\u964d\u4f4e\u5143\u6570\u636e\u6210\u672c\uff0cApache Fory\u2122 \u652f\u6301\u5143\u6570\u636e\u5171\u4eab\u673a\u5236\uff0c\u8be6\u60c5\u89c1",(0,r.jsx)(n.a,{href:"https://fory.apache.org/docs/specification/fory_java_serialization_spec#meta-share",children:"Meta Sharing"}),"\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u538b\u7f29",children:"\u538b\u7f29"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ForyBuilder#withIntCompressed"}),"/",(0,r.jsx)(n.code,{children:"ForyBuilder#withLongCompressed"})," \u53ef\u7528\u4e8e\u538b\u7f29 int/long \u7c7b\u578b\u4ee5\u51cf\u5c0f\u4f53\u79ef\u3002\u9ed8\u8ba4\u5747\u4e3a\u5f00\u542f\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u5e8f\u5217\u5316\u4f53\u79ef\u4e0d\u654f\u611f\uff08\u5982\u4e4b\u524d\u7528 flatbuffers \u7b49\u65e0\u538b\u7f29\u683c\u5f0f\uff09\uff0c\u5efa\u8bae\u5173\u95ed\u538b\u7f29\u4ee5\u63d0\u5347\u6027\u80fd\u3002\u5bf9\u4e8e\u5168\u4e3a\u6570\u5b57\u7684\u6570\u636e\uff0c\u538b\u7f29\u53ef\u80fd\u5e26\u6765 80% \u7684\u6027\u80fd\u635f\u5931\u3002"}),"\n",(0,r.jsx)(n.p,{children:"int \u538b\u7f29\u91c7\u7528 1~5 \u5b57\u8282\u53d8\u957f\u7f16\u7801\uff0clong \u538b\u7f29\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["SLI\uff08Small long as int\uff0c\u9ed8\u8ba4\uff09\uff1along \u5728 ",(0,r.jsx)(n.code,{children:"[-1073741824, 1073741823]"})," \u8303\u56f4\u5185\u7528 4 \u5b57\u8282\u7f16\u7801\uff0c\u5426\u5219\u7528 9 \u5b57\u8282\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["PVL\uff08Progressive Variable-length Long\uff09\uff1a\u91c7\u7528\u53d8\u957f\u7f16\u7801\uff0c\u8d1f\u6570\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"(v << 1) ^ (v >> 63)"})," \u8f6c\u6362\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982 long \u7c7b\u578b\u6570\u636e\u65e0\u6cd5\u6709\u6548\u538b\u7f29\uff0c\u5efa\u8bae\u5173\u95ed long \u538b\u7f29\u4ee5\u63d0\u5347\u6027\u80fd\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5bf9\u8c61\u6df1\u62f7\u8d1d",children:"\u5bf9\u8c61\u6df1\u62f7\u8d1d"}),"\n",(0,r.jsx)(n.p,{children:"\u6df1\u62f7\u8d1d\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = Fory.builder().withRefCopy(true).build();\nSomeClass a = xxx;\nSomeClass copied = fory.copy(a);\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u9700\u5ffd\u7565\u5faa\u73af\u548c\u5171\u4eab\u5f15\u7528\uff08\u5373\u5bf9\u8c61\u56fe\u4e2d\u540c\u4e00\u5f15\u7528\u4f1a\u88ab\u62f7\u8d1d\u4e3a\u4e0d\u540c\u5bf9\u8c61\uff09\uff0c\u53ef\u5173\u95ed refCopy\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = Fory.builder().withRefCopy(false).build();\nSomeClass a = xxx;\nSomeClass copied = fory.copy(a);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",children:"\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsxs)(n.p,{children:["\u67d0\u4e9b\u573a\u666f\u4e0b\u9700\u4e3a\u7279\u5b9a\u7c7b\u578b\u5b9e\u73b0\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\uff0c\u5c24\u5176\u662f JDK ",(0,r.jsx)(n.code,{children:"writeObject/writeReplace/readObject/readResolve"})," \u65b9\u5f0f\u6548\u7387\u8f83\u4f4e\u65f6\u3002\u5982\u4e0b\u4f8b\uff0c\u907f\u514d ",(0,r.jsx)(n.code,{children:"Foo#writeObject"})," \u88ab\u8c03\u7528\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class Foo {\n  public long f1;\n\n  private void writeObject(ObjectOutputStream s) throws IOException {\n    System.out.println(f1);\n    s.defaultWriteObject();\n  }\n}\n\nclass FooSerializer extends Serializer<Foo> {\n  public FooSerializer(Fory fory) {\n    super(fory, Foo.class);\n  }\n\n  @Override\n  public void write(MemoryBuffer buffer, Foo value) {\n    buffer.writeInt64(value.f1);\n  }\n\n  @Override\n  public Foo read(MemoryBuffer buffer) {\n    Foo foo = new Foo();\n    foo.f1 = buffer.readInt64();\n    return foo;\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = getFory();\nfory.registerSerializer(Foo.class, new FooSerializer(fory));\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5b9e\u73b0\u96c6\u5408\u7c7b\u5e8f\u5217\u5316\u5668",children:"\u5b9e\u73b0\u96c6\u5408\u7c7b\u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e0e Map \u7c7b\u4f3c\uff0c\u5b9e\u73b0\u81ea\u5b9a\u4e49 Collection \u7c7b\u578b\u7684\u5e8f\u5217\u5316\u5668\u65f6\uff0c\u9700\u7ee7\u627f ",(0,r.jsx)(n.code,{children:"CollectionSerializer"})," \u6216 ",(0,r.jsx)(n.code,{children:"AbstractCollectionSerializer"}),"\u3002\u4e8c\u8005\u533a\u522b\u5728\u4e8e\uff0c",(0,r.jsx)(n.code,{children:"AbstractCollectionSerializer"})," \u53ef\u7528\u4e8e\u5e8f\u5217\u5316\u7c7b\u4f3c\u96c6\u5408\u7ed3\u6784\u4f46\u4e0d\u662f Java Collection \u5b50\u7c7b\u7684\u7c7b\u578b\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5bf9\u4e8e\u96c6\u5408\u5e8f\u5217\u5316\u5668\uff0c\u6709\u4e00\u4e2a\u7279\u6b8a\u53c2\u6570 ",(0,r.jsx)(n.code,{children:"supportCodegenHook"})," \u9700\u8981\u914d\u7f6e\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8bbe\u4e3a ",(0,r.jsx)(n.code,{children:"true"})," \u65f6\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u7528\u96c6\u5408\u5143\u7d20\u7684\u9ad8\u6548\u8bbf\u95ee\u548c JIT \u7f16\u8bd1\uff0c\u63d0\u5347\u6027\u80fd"}),"\n",(0,r.jsx)(n.li,{children:"\u76f4\u63a5\u5e8f\u5217\u5316\u8c03\u7528\uff0c\u5185\u8054 map \u7684 key-value\uff0c\u65e0\u52a8\u6001\u5206\u53d1\u5f00\u9500"}),"\n",(0,r.jsx)(n.li,{children:"\u63a8\u8350\u7528\u4e8e\u6807\u51c6\u96c6\u5408\u7c7b\u578b"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u8bbe\u4e3a ",(0,r.jsx)(n.code,{children:"false"})," \u65f6\uff1a","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u91c7\u7528\u63a5\u53e3\u65b9\u5f0f\u8bbf\u95ee\u5143\u7d20\uff0c\u52a8\u6001\u5206\u53d1\uff0c\u7075\u6d3b\u6027\u66f4\u9ad8"}),"\n",(0,r.jsx)(n.li,{children:"\u9002\u5408\u6709\u7279\u6b8a\u5e8f\u5217\u5316\u9700\u6c42\u7684\u81ea\u5b9a\u4e49\u96c6\u5408"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u5904\u7406\u590d\u6742\u96c6\u5408\u5b9e\u73b0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u652f\u6301-jit-\u7684\u96c6\u5408\u5e8f\u5217\u5316\u5668\u5b9e\u73b0",children:"\u652f\u6301 JIT \u7684\u96c6\u5408\u5e8f\u5217\u5316\u5668\u5b9e\u73b0"}),"\n",(0,r.jsxs)(n.p,{children:["\u5b9e\u73b0\u652f\u6301 JIT \u7684\u96c6\u5408\u5e8f\u5217\u5316\u5668\u65f6\uff0c\u53ef\u5229\u7528 Fory \u73b0\u6709\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\u548c\u96c6\u5408\u5e8f\u5217\u5316\u57fa\u7840\u8bbe\u65bd\u3002\u5173\u952e\u5728\u4e8e\u6b63\u786e\u5b9e\u73b0 ",(0,r.jsx)(n.code,{children:"onCollectionWrite"})," \u548c ",(0,r.jsx)(n.code,{children:"newCollection"})," \u65b9\u6cd5\u4ee5\u5904\u7406\u5143\u6570\u636e\uff0c\u5176\u4f59\u5143\u7d20\u5e8f\u5217\u5316\u7531 Fory \u81ea\u52a8\u5b8c\u6210\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class CustomCollectionSerializer<T extends Collection> extends CollectionSerializer<T> {\n    public CustomCollectionSerializer(Fory fory, Class<T> cls) {\n        // supportCodegenHook \u63a7\u5236\u662f\u5426\u542f\u7528 JIT \u7f16\u8bd1\n        super(fory, cls, true);\n    }\n\n    @Override\n    public Collection onCollectionWrite(MemoryBuffer buffer, T value) {\n        // \u5199\u5165\u96c6\u5408\u5927\u5c0f\n        buffer.writeVarUint32Small7(value.size());\n        // \u53ef\u5199\u5165\u989d\u5916\u96c6\u5408\u5143\u6570\u636e\n        return value;\n    }\n\n    @Override\n    public Collection newCollection(MemoryBuffer buffer) {\n        // \u521b\u5efa\u65b0\u96c6\u5408\u5b9e\u4f8b\n        Collection collection = super.newCollection(buffer);\n        // \u8bfb\u53d6\u5e76\u8bbe\u7f6e\u96c6\u5408\u5927\u5c0f\n        int numElements = getAndClearNumElements();\n        setNumElements(numElements);\n        return collection;\n    }\n}\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6ce8\u610f\uff1a\u5b9e\u73b0 ",(0,r.jsx)(n.code,{children:"newCollection"})," \u65f6\u9700\u8c03\u7528 ",(0,r.jsx)(n.code,{children:"setNumElements"}),"\uff0c\u4ee5\u544a\u77e5 Fory \u53cd\u5e8f\u5217\u5316\u591a\u5c11\u5143\u7d20\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u4e0d\u652f\u6301-jit-\u7684\u81ea\u5b9a\u4e49\u96c6\u5408\u5e8f\u5217\u5316\u5668",children:"\u4e0d\u652f\u6301 JIT \u7684\u81ea\u5b9a\u4e49\u96c6\u5408\u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsxs)(n.p,{children:["\u6709\u65f6\u9700\u5e8f\u5217\u5316\u5e95\u5c42\u4e3a\u539f\u59cb\u6570\u7ec4\u6216\u6709\u7279\u6b8a\u9700\u6c42\u7684\u96c6\u5408\u7c7b\u578b\uff0c\u6b64\u65f6\u53ef\u7981\u7528 JIT\uff0c\u76f4\u63a5\u91cd\u5199 ",(0,r.jsx)(n.code,{children:"write"})," \u548c ",(0,r.jsx)(n.code,{children:"read"})," \u65b9\u6cd5\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u79cd\u65b9\u5f0f\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5b8c\u5168\u63a7\u5236\u5e8f\u5217\u5316\u683c\u5f0f"}),"\n",(0,r.jsx)(n.li,{children:"\u9002\u5408\u539f\u59cb\u6570\u7ec4"}),"\n",(0,r.jsx)(n.li,{children:"\u8df3\u8fc7\u96c6\u5408\u8fed\u4ee3\u5f00\u9500"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u793a\u4f8b\uff08\u539f\u59cb int \u6570\u7ec4\uff09\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class IntList extends AbstractCollection<Integer> {\n    private final int[] elements;\n    private final int size;\n\n    public IntList(int size) {\n        this.elements = new int[size];\n        this.size = size;\n    }\n\n    public IntList(int[] elements, int size) {\n        this.elements = elements;\n        this.size = size;\n    }\n\n    @Override\n    public Iterator<Integer> iterator() {\n        return new Iterator<Integer>() {\n            private int index = 0;\n            @Override\n            public boolean hasNext() { return index < size; }\n            @Override\n            public Integer next() {\n                if (!hasNext()) throw new NoSuchElementException();\n                return elements[index++];\n            }\n        };\n    }\n\n    @Override\n    public int size() { return size; }\n\n    public int get(int index) {\n        if (index >= size) throw new IndexOutOfBoundsException();\n        return elements[index];\n    }\n\n    public void set(int index, int value) {\n        if (index >= size) throw new IndexOutOfBoundsException();\n        elements[index] = value;\n    }\n\n    public int[] getElements() { return elements; }\n}\n\nclass IntListSerializer extends AbstractCollectionSerializer<IntList> {\n    public IntListSerializer(Fory fory) {\n        // \u7981\u7528 JIT\uff0c\u5b8c\u5168\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\n        super(fory, IntList.class, false);\n    }\n\n    @Override\n    public void write(MemoryBuffer buffer, IntList value) {\n        buffer.writeVarUint32Small7(value.size());\n        int[] elements = value.getElements();\n        for (int i = 0; i < value.size(); i++) {\n            buffer.writeVarInt32(elements[i]);\n        }\n    }\n\n    @Override\n    public IntList read(MemoryBuffer buffer) {\n        int size = buffer.readVarUint32Small7();\n        int[] elements = new int[size];\n        for (int i = 0; i < size; i++) {\n            elements[i] = buffer.readVarInt32();\n        }\n        return new IntList(elements, size);\n    }\n\n    // JIT \u7981\u7528\u65f6\u4ee5\u4e0b\u65b9\u6cd5\u4e0d\u4f7f\u7528\n    @Override public Collection onCollectionWrite(MemoryBuffer buffer, IntList value) { throw new UnsupportedOperationException(); }\n    @Override public Collection newCollection(MemoryBuffer buffer) { throw new UnsupportedOperationException(); }\n    @Override public IntList onCollectionRead(Collection collection) { throw new UnsupportedOperationException(); }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u952e\u70b9\u8bf4\u660e\uff1a"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u59cb\u6570\u7ec4\u5b58\u50a8"}),"\uff1a\u76f4\u63a5\u7528 int[]\uff0c\u907f\u514d\u88c5\u7bb1/\u62c6\u7bb1\uff0c\u5185\u5b58\u5e03\u5c40\u9ad8\u6548\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u76f4\u63a5\u5e8f\u5217\u5316"}),"\uff1a\u5148\u5199 size\uff0c\u518d\u5199\u539f\u59cb\u503c\uff0c\u65e0\u9700\u8fed\u4ee3\uff0c\u65e0\u88c5\u7bb1/\u62c6\u7bb1\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u76f4\u63a5\u53cd\u5e8f\u5217\u5316"}),"\uff1a\u5148\u8bfb size\uff0c\u518d\u8bfb\u539f\u59cb\u503c\u586b\u5145\u6570\u7ec4\uff0c\u6700\u540e\u6784\u9020\u5bf9\u8c61\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7981\u7528 JIT"}),"\uff1a",(0,r.jsx)(n.code,{children:"supportCodegenHook=false"}),"\uff0c\u91cd\u5199 ",(0,r.jsx)(n.code,{children:"write/read"}),"\uff0c\u5b8c\u5168\u81ea\u5b9a\u4e49\u683c\u5f0f\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53ea\u5904\u7406\u539f\u59cb\u7c7b\u578b"}),"\n",(0,r.jsx)(n.li,{children:"\u6027\u80fd\u6781\u81f4\u8981\u6c42"}),"\n",(0,r.jsx)(n.li,{children:"\u9700\u6700\u5c0f\u5185\u5b58\u5f00\u9500"}),"\n",(0,r.jsx)(n.li,{children:"\u6709\u7279\u6b8a\u5e8f\u5217\u5316\u9700\u6c42"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528\u793a\u4f8b\uff1a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"IntList list = new IntList(3);\nlist.set(0, 1); list.set(1, 2); list.set(2, 3);\nbyte[] bytes = fory.serialize(list);\nIntList newList = (IntList) fory.deserialize(bytes);\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u867d\u7136\u653e\u5f03\u4e86 Fory \u7684\u90e8\u5206\u4f18\u5316\uff0c\u4f46\u5bf9\u539f\u59cb\u7c7b\u578b\u548c\u76f4\u63a5\u6570\u7ec4\u8bbf\u95ee\u573a\u666f\u6027\u80fd\u6781\u9ad8\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u5b9e\u73b0-collection-like-\u7c7b\u578b\u5e8f\u5217\u5316\u5668",children:"\u5b9e\u73b0 collection-like \u7c7b\u578b\u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsx)(n.p,{children:"\u6709\u65f6\u9700\u4e3a\u7c7b\u4f3c\u96c6\u5408\u4f46\u975e\u6807\u51c6 Java Collection \u7684\u7c7b\u578b\u5b9e\u73b0\u5e8f\u5217\u5316\u5668\u3002\u539f\u5219\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7ee7\u627f ",(0,r.jsx)(n.code,{children:"AbstractCollectionSerializer"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u542f\u7528 JIT \u4f18\u5316\uff08",(0,r.jsx)(n.code,{children:"supportCodegenHook=true"}),"\uff09"]}),"\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7\u89c6\u56fe\u7c7b\u9ad8\u6548\u8bbf\u95ee\u5143\u7d20"}),"\n",(0,r.jsx)(n.li,{children:"\u6b63\u786e\u7ba1\u7406 size"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'class CustomCollectionLike {\n    private final Object[] elements;\n    private final int size;\n    public CustomCollectionLike(int size) { this.elements = new Object[size]; this.size = size; }\n    public CustomCollectionLike(Object[] elements, int size) { this.elements = elements; this.size = size; }\n    public Object get(int index) { if (index >= size) throw new IndexOutOfBoundsException(); return elements[index]; }\n    public int size() { return size; }\n    public Object[] getElements() { return elements; }\n}\n\nclass CollectionView extends AbstractCollection<Object> {\n    private final Object[] elements;\n    private final int size;\n    private int writeIndex;\n    public CollectionView(CustomCollectionLike collection) { this.elements = collection.getElements(); this.size = collection.size(); }\n    public CollectionView(int size) { this.size = size; this.elements = new Object[size]; }\n    @Override public Iterator<Object> iterator() { return new Iterator<Object>() { private int index = 0; @Override public boolean hasNext() { return index < size; } @Override public Object next() { if (!hasNext()) throw new NoSuchElementException(); return elements[index++]; } }; }\n    @Override public boolean add(Object element) { if (writeIndex >= size) throw new IllegalStateException("Collection is full"); elements[writeIndex++] = element; return true; }\n    @Override public int size() { return size; }\n    public Object[] getElements() { return elements; }\n}\n\nclass CustomCollectionSerializer extends AbstractCollectionSerializer<CustomCollectionLike> {\n    public CustomCollectionSerializer(Fory fory) { super(fory, CustomCollectionLike.class, true); }\n    @Override public Collection onCollectionWrite(MemoryBuffer buffer, CustomCollectionLike value) { buffer.writeVarUint32Small7(value.size()); return new CollectionView(value); }\n    @Override public Collection newCollection(MemoryBuffer buffer) { int numElements = buffer.readVarUint32Small7(); setNumElements(numElements); return new CollectionView(numElements); }\n    @Override public CustomCollectionLike onCollectionRead(Collection collection) { CollectionView view = (CollectionView) collection; return new CustomCollectionLike(view.getElements(), view.size()); }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u952e\u70b9\u8bf4\u660e\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6570\u7ec4\u5b58\u50a8\uff0c\u5b9a\u957f\uff0c\u76f4\u63a5\u8bbf\u95ee"}),"\n",(0,r.jsxs)(n.li,{children:["\u89c6\u56fe\u7c7b\u7ee7\u627f ",(0,r.jsx)(n.code,{children:"AbstractCollection"}),"\uff0c\u5b9e\u73b0\u8fed\u4ee3\u548c add"]}),"\n",(0,r.jsx)(n.li,{children:"\u652f\u6301 JIT \u4f18\u5316\uff0c\u6570\u7ec4\u96f6\u62f7\u8d1d"}),"\n",(0,r.jsx)(n.li,{children:"\u6027\u80fd\u4f18\u5148\uff0c\u7075\u6d3b\u6027\u7565\u4f4e"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:'\u5982\u9700\u7ee7\u7eed\u8865\u5145 map-like \u7c7b\u578b\u3001\u6ce8\u518c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\u3001Externalizable \u652f\u6301\u7b49\u5185\u5bb9\uff0c\u8bf7\u56de\u590d"\u7ee7\u7eed"\uff01'}),"\n",(0,r.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49-map-\u5e8f\u5217\u5316\u5668",children:"\u81ea\u5b9a\u4e49 Map \u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsxs)(n.p,{children:["\u81ea\u5b9a\u4e49 Map \u7c7b\u578b\u5e8f\u5217\u5316\u5668\u9700\u7ee7\u627f ",(0,r.jsx)(n.code,{children:"MapSerializer"})," \u6216 ",(0,r.jsx)(n.code,{children:"AbstractMapSerializer"}),"\u3002\u4e8c\u8005\u533a\u522b\u7c7b\u4f3c\u96c6\u5408\u5e8f\u5217\u5316\u5668\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"supportCodegenHook=true"}),"\uff1a\u63a8\u8350\u7528\u4e8e\u6807\u51c6 Map\uff0c\u652f\u6301 JIT \u4f18\u5316"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"supportCodegenHook=false"}),"\uff1a\u9002\u5408\u7279\u6b8a\u9700\u6c42\uff0c\u9700\u624b\u52a8\u5b9e\u73b0\u5e8f\u5217\u5316\u903b\u8f91"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u652f\u6301-jit-\u7684-map-\u5e8f\u5217\u5316\u5668\u793a\u4f8b",children:"\u652f\u6301 JIT \u7684 Map \u5e8f\u5217\u5316\u5668\u793a\u4f8b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class CustomMapSerializer<T extends Map> extends MapSerializer<T> {\n    public CustomMapSerializer(Fory fory, Class<T> cls) {\n        super(fory, cls, true);\n    }\n\n    @Override\n    public Map onMapWrite(MemoryBuffer buffer, T value) {\n        buffer.writeVarUint32Small7(value.size());\n        return value;\n    }\n\n    @Override\n    public Map newMap(MemoryBuffer buffer) {\n        int numElements = buffer.readVarUint32Small7();\n        setNumElements(numElements);\n        return new HashMap(numElements);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u4e0d\u652f\u6301-jit-\u7684\u81ea\u5b9a\u4e49-map-\u5e8f\u5217\u5316\u5668",children:"\u4e0d\u652f\u6301 JIT \u7684\u81ea\u5b9a\u4e49 Map \u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsx)(n.p,{children:"\u9002\u7528\u4e8e\u6709\u7279\u6b8a\u5b57\u6bb5\u6216\u81ea\u5b9a\u4e49\u4e8c\u8fdb\u5236\u683c\u5f0f\u7684 Map \u7c7b\u578b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class FixedValueMap extends AbstractMap<String, Integer> {\n    // ... \u7701\u7565\u5b9e\u73b0 ...\n}\n\nclass FixedValueMapSerializer extends AbstractMapSerializer<FixedValueMap> {\n    public FixedValueMapSerializer(Fory fory) {\n        super(fory, FixedValueMap.class, false);\n    }\n\n    @Override\n    public void write(MemoryBuffer buffer, FixedValueMap value) {\n        buffer.writeInt32(value.getFixedValue());\n        buffer.writeVarUint32Small7(value.getKeys().size());\n        for (String key : value.getKeys()) {\n            buffer.writeString(key);\n        }\n    }\n\n    @Override\n    public FixedValueMap read(MemoryBuffer buffer) {\n        int fixedValue = buffer.readInt32();\n        int size = buffer.readVarUint32Small7();\n        Set<String> keys = new HashSet<>(size);\n        for (int i = 0; i < size; i++) {\n            keys.add(buffer.readString());\n        }\n        return new FixedValueMap(keys, fixedValue);\n    }\n\n    @Override\n    public Map onMapWrite(MemoryBuffer buffer, FixedValueMap value) {\n        throw new UnsupportedOperationException();\n    }\n\n    @Override\n    public FixedValueMap onMapRead(Map map) {\n        throw new UnsupportedOperationException();\n    }\n\n    @Override\n    public FixedValueMap onMapCopy(Map map) {\n        throw new UnsupportedOperationException();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",children:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668"}),"\n",(0,r.jsx)(n.p,{children:"\u5b9e\u73b0\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\u540e\uff0c\u9700\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u6ce8\u518c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = Fory.builder()\n    .withLanguage(Language.JAVA)\n    .build();\n\n// \u6ce8\u518c Map \u5e8f\u5217\u5316\u5668\nfory.registerSerializer(CustomMap.class, new CustomMapSerializer<>(fory, CustomMap.class));\n\n// \u6ce8\u518c\u96c6\u5408\u5e8f\u5217\u5316\u5668\nfory.registerSerializer(CustomCollection.class, new CustomCollectionSerializer<>(fory, CustomCollection.class));\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u59cb\u7ec8\u7ee7\u627f\u5408\u9002\u7684\u57fa\u7c7b\uff08Map \u7528 ",(0,r.jsx)(n.code,{children:"MapSerializer"}),"/",(0,r.jsx)(n.code,{children:"AbstractMapSerializer"}),"\uff0c\u96c6\u5408\u7528 ",(0,r.jsx)(n.code,{children:"CollectionSerializer"}),"/",(0,r.jsx)(n.code,{children:"AbstractCollectionSerializer"}),"\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6839\u636e ",(0,r.jsx)(n.code,{children:"supportCodegenHook"})," \u9009\u62e9\u6027\u80fd\u4e0e\u7075\u6d3b\u6027"]}),"\n",(0,r.jsx)(n.li,{children:"\u5982\u9700\u5f15\u7528\u8ddf\u8e2a\uff0c\u9700\u6b63\u786e\u5904\u7406"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"supportCodegenHook=true"})," \u65f6\uff0c\u9700\u7528 ",(0,r.jsx)(n.code,{children:"setNumElements"}),"/",(0,r.jsx)(n.code,{children:"getAndClearNumElements"})," \u7ba1\u7406\u5143\u7d20\u6570\u91cf"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u5168\u4e0e\u7c7b\u6ce8\u518c",children:"\u5b89\u5168\u4e0e\u7c7b\u6ce8\u518c"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ForyBuilder#requireClassRegistration"})," \u53ef\u5173\u95ed\u7c7b\u6ce8\u518c\u6821\u9a8c\uff0c\u5141\u8bb8\u53cd\u5e8f\u5217\u5316\u672a\u77e5\u7c7b\u578b\uff0c\u7075\u6d3b\u4f46\u6709\u5b89\u5168\u98ce\u9669\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5982\u65e0\u6cd5\u786e\u4fdd\u73af\u5883\u5b89\u5168\uff0c\u5207\u52ff\u5173\u95ed\u7c7b\u6ce8\u518c\u3002"}),(0,r.jsx)(n.br,{}),"\n","\u53cd\u5e8f\u5217\u5316\u672a\u77e5/\u4e0d\u53d7\u4fe1\u4efb\u7c7b\u578b\u65f6\uff0c\u6076\u610f\u4ee3\u7801\u53ef\u80fd\u5728 ",(0,r.jsx)(n.code,{children:"init/equals/hashCode"})," \u7b49\u65b9\u6cd5\u4e2d\u88ab\u6267\u884c\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u7c7b\u6ce8\u518c\u4e0d\u4ec5\u63d0\u5347\u5b89\u5168\u6027\uff0c\u8fd8\u53ef\u51cf\u5c11\u7c7b\u540d\u5e8f\u5217\u5316\u5f00\u9500\u3002\u6ce8\u518c\u987a\u5e8f\u9700\u4fdd\u6301\u5e8f\u5217\u5316\u7aef\u4e0e\u53cd\u5e8f\u5217\u5316\u7aef\u4e00\u81f4\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = xxx;\nfory.register(SomeClass.class);\nfory.register(SomeClass1.class, 200);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u9700\u5173\u95ed\u6ce8\u518c\u6821\u9a8c\uff0c\u53ef\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"ClassResolver#setClassChecker"})," \u81ea\u5b9a\u4e49\u5141\u8bb8\u7684\u7c7b\u540d\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Fory fory = xxx;\nfory.getClassResolver().setClassChecker(\n  (classResolver, className) -> className.startsWith("org.example."));\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u6216\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"AllowListChecker"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'AllowListChecker checker = new AllowListChecker(AllowListChecker.CheckLevel.STRICT);\nThreadSafeFory fory = new ThreadLocalFory(classLoader -> {\n  Fory f = Fory.builder().requireClassRegistration(true).withClassLoader(classLoader).build();\n  f.getClassResolver().setClassChecker(checker);\n  checker.addListener(f.getClassResolver());\n  return f;\n});\nchecker.allowClass("org.example.*");\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Fory \u63d0\u4f9b\u4e86 ",(0,r.jsx)(n.code,{children:"org.apache.fory.resolver.AllowListChecker"}),"\uff0c\u4e5f\u53ef\u81ea\u884c\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u6821\u9a8c\u903b\u8f91\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6309\u540d\u79f0\u6ce8\u518c\u7c7b",children:"\u6309\u540d\u79f0\u6ce8\u518c\u7c7b"}),"\n",(0,r.jsxs)(n.p,{children:["\u6309 id \u6ce8\u518c\u7c7b\u6027\u80fd\u548c\u4f53\u79ef\u66f4\u4f18\uff0c\u4f46\u5982\u9700\u7ba1\u7406\u5927\u91cf\u7c7b\u578b id\uff0c\u53ef\u7528 ",(0,r.jsx)(n.code,{children:"register(Class<?> cls, String namespace, String typeName)"})," \u6309\u540d\u79f0\u6ce8\u518c\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'fory.register(Foo.class, "demo", "Foo");\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u65e0\u91cd\u540d\uff0c",(0,r.jsx)(n.code,{children:"namespace"})," \u53ef\u4e3a\u7a7a\u4ee5\u51cf\u5c11\u4f53\u79ef\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e0d\u5efa\u8bae\u7528\u540d\u79f0\u6ce8\u518c\uff0c\u56e0\u5e8f\u5217\u5316\u4f53\u79ef\u4f1a\u663e\u8457\u589e\u52a0\u3002"})}),"\n",(0,r.jsx)(n.h3,{id:"\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316",children:"\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316"}),"\n",(0,r.jsx)(n.p,{children:"Apache Fory\u2122 \u652f\u6301\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316\uff0c\u53ef\u9ad8\u6548\u5904\u7406\u5927\u5bf9\u8c61\u6216\u76f4\u63a5\u5185\u5b58\u7f13\u51b2\u533a\u3002\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'import org.apache.fory.*;\nimport org.apache.fory.config.*;\nimport org.apache.fory.serializer.BufferObject;\nimport org.apache.fory.memory.MemoryBuffer;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\npublic class ZeroCopyExample {\n  // \u6ce8\u610f\uff1aFory \u5b9e\u4f8b\u5e94\u590d\u7528\uff0c\u4e0d\u8981\u6bcf\u6b21\u65b0\u5efa\n  static Fory fory = Fory.builder()\n    .withLanguage(Language.JAVA)\n    .build();\n\n  // mvn exec:java -Dexec.mainClass="io.ray.fory.examples.ZeroCopyExample"\n  public static void main(String[] args) {\n    List<Object> list = Arrays.asList("str", new byte[1000], new int[100], new double[100]);\n    Collection<BufferObject> bufferObjects = new ArrayList<>();\n    byte[] bytes = fory.serialize(list, e -> !bufferObjects.add(e));\n    List<MemoryBuffer> buffers = bufferObjects.stream()\n      .map(BufferObject::toBuffer).collect(Collectors.toList());\n    System.out.println(fory.deserialize(bytes, buffers));\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5143\u6570\u636e\u5171\u4eabmeta-sharing",children:"\u5143\u6570\u636e\u5171\u4eab\uff08Meta Sharing\uff09"}),"\n",(0,r.jsx)(n.p,{children:"Apache Fory\u2122 \u652f\u6301\u5728\u540c\u4e00\u4e0a\u4e0b\u6587\uff08\u5982 TCP \u8fde\u63a5\uff09\u5185\u5171\u4eab\u7c7b\u578b\u5143\u6570\u636e\uff08\u7c7b\u540d\u3001\u5b57\u6bb5\u540d\u3001\u6700\u7ec8\u5b57\u6bb5\u7c7b\u578b\u7b49\uff09\u3002\u9996\u6b21\u5e8f\u5217\u5316\u65f6\u5143\u6570\u636e\u4f1a\u53d1\u9001\u5230\u5bf9\u7aef\uff0c\u5bf9\u7aef\u53ef\u57fa\u4e8e\u5143\u6570\u636e\u91cd\u5efa\u53cd\u5e8f\u5217\u5316\u5668\uff0c\u540e\u7eed\u5e8f\u5217\u5316\u65e0\u9700\u91cd\u590d\u4f20\u8f93\u5143\u6570\u636e\uff0c\u4ece\u800c\u51cf\u5c11\u7f51\u7edc\u6d41\u91cf\u5e76\u81ea\u52a8\u652f\u6301\u7c7b\u578b\u524d\u5411/\u540e\u5411\u517c\u5bb9\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// Fory.builder()\n//   .withLanguage(Language.JAVA)\n//   .withRefTracking(false)\n//   // \u8de8\u5e8f\u5217\u5316\u5171\u4eab\u5143\u6570\u636e\n//   .withMetaContextShare(true)\n// \u975e\u7ebf\u7a0b\u5b89\u5168 Fory\nMetaContext context = xxx;\nfory.getSerializationContext().setMetaContext(context);\nbyte[] bytes = fory.serialize(o);\n// \u975e\u7ebf\u7a0b\u5b89\u5168 Fory\nMetaContext context = xxx;\nfory.getSerializationContext().setMetaContext(context);\nfory.deserialize(bytes);\n\n// \u7ebf\u7a0b\u5b89\u5168 Fory\nfory.setClassLoader(beanA.getClass().getClassLoader());\nbyte[] serialized = fory.execute(\n  f -> {\n    f.getSerializationContext().setMetaContext(context);\n    return f.serialize(beanA);\n  }\n);\n// \u7ebf\u7a0b\u5b89\u5168 Fory\nfory.setClassLoader(beanA.getClass().getClassLoader());\nObject newObj = fory.execute(\n  f -> {\n    f.getSerializationContext().setMetaContext(context);\n    return f.deserialize(serialized);\n  }\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u53cd\u5e8f\u5217\u5316\u4e0d\u5b58\u5728\u7684\u7c7b",children:"\u53cd\u5e8f\u5217\u5316\u4e0d\u5b58\u5728\u7684\u7c7b"}),"\n",(0,r.jsxs)(n.p,{children:["Apache Fory\u2122 \u652f\u6301\u53cd\u5e8f\u5217\u5316\u4e0d\u5b58\u5728\u7684\u7c7b\u3002\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"ForyBuilder#deserializeNonexistentClass(true)"})," \u542f\u7528\u3002\u5f53\u542f\u7528\u4e14\u5143\u6570\u636e\u5171\u4eab\u5f00\u542f\u65f6\uff0cFory \u4f1a\u5c06\u8be5\u7c7b\u578b\u7684\u6570\u636e\u5b58\u50a8\u4e3a Map \u7684\u60f0\u6027\u5b50\u7c7b\uff0c\u907f\u514d\u53cd\u5e8f\u5217\u5316\u65f6\u586b\u5145 Map \u7684\u91cd\u6392\u5f00\u9500\uff0c\u63d0\u5347\u6027\u80fd\u3002\u5982\u679c\u6570\u636e\u88ab\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4e14\u8be5\u7c7b\u5b58\u5728\uff0c\u5219\u53ef\u65e0\u635f\u8fd8\u539f\u4e3a\u539f\u7c7b\u578b\u5bf9\u8c61\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u82e5\u672a\u542f\u7528\u5143\u6570\u636e\u5171\u4eab\uff0c\u5219\u65b0\u7c7b\u6570\u636e\u4f1a\u88ab\u8df3\u8fc7\uff0c\u8fd4\u56de ",(0,r.jsx)(n.code,{children:"NonexistentSkipClass"})," \u5360\u4f4d\u5bf9\u8c61\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u7c7b\u578b\u6620\u5c04\u8de8\u7c7b\u578b\u6df1\u62f7\u8d1d\u6620\u5c04",children:"\u7c7b\u578b\u6620\u5c04\uff08\u8de8\u7c7b\u578b\u6df1\u62f7\u8d1d/\u6620\u5c04\uff09"}),"\n",(0,r.jsx)(n.p,{children:"Apache Fory\u2122 \u652f\u6301\u5c06\u4e00\u4e2a\u7c7b\u578b\u7684\u5bf9\u8c61\u6df1\u62f7\u8d1d/\u6620\u5c04\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u578b\u3002\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8be5\u6620\u5c04\u4f1a\u6267\u884c\u6df1\u62f7\u8d1d\uff0c\u6240\u6709\u6620\u5c04\u5b57\u6bb5\u4f1a\u5148\u5e8f\u5217\u5316\u4e3a\u4e8c\u8fdb\u5236\uff0c\u518d\u53cd\u5e8f\u5217\u5316\u4e3a\u76ee\u6807\u7c7b\u578b\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u6240\u6709\u7ed3\u6784\u4f53\u7c7b\u578b\u5fc5\u987b\u7528\u76f8\u540c ID \u6ce8\u518c\uff0c\u5426\u5219\u65e0\u6cd5\u6b63\u786e\u6620\u5c04\u3002\u52a1\u5fc5\u4fdd\u8bc1\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7aef\u6ce8\u518c\u987a\u5e8f\u4e00\u81f4\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class StructMappingExample {\n  static class Struct1 {\n    int f1;\n    String f2;\n\n    public Struct1(int f1, String f2) {\n      this.f1 = f1;\n      this.f2 = f2;\n    }\n  }\n\n  static class Struct2 {\n    int f1;\n    String f2;\n    double f3;\n  }\n\n  static ThreadSafeFory fory1 = Fory.builder()\n    .withCompatibleMode(CompatibleMode.COMPATIBLE).buildThreadSafeFory();\n  static ThreadSafeFory fory2 = Fory.builder()\n    .withCompatibleMode(CompatibleMode.COMPATIBLE).buildThreadSafeFory();\n\n  static {\n    fory1.register(Struct1.class);\n    fory2.register(Struct2.class);\n  }\n\n  public static void main(String[] args) {\n    Struct1 struct1 = new Struct1(10, "abc");\n    Struct2 struct2 = (Struct2) fory2.deserialize(fory1.serialize(struct1));\n    Assert.assertEquals(struct2.f1, struct1.f1);\n    Assert.assertEquals(struct2.f2, struct1.f2);\n    struct1 = (Struct1) fory1.deserialize(fory2.serialize(struct2));\n    Assert.assertEquals(struct1.f1, struct2.f1);\n    Assert.assertEquals(struct1.f2, struct2.f2);\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u8fc1\u79fb",children:"\u8fc1\u79fb"}),"\n",(0,r.jsx)(n.h3,{id:"jdk-\u5e8f\u5217\u5316\u8fc1\u79fb",children:"JDK \u5e8f\u5217\u5316\u8fc1\u79fb"}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u4e4b\u524d\u4f7f\u7528 JDK \u5e8f\u5217\u5316\uff0c\u4e14\u65e0\u6cd5\u540c\u65f6\u5347\u7ea7\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\uff08\u5982\u7ebf\u4e0a\u5e94\u7528\u5e38\u89c1\u573a\u666f\uff09\uff0cFory \u63d0\u4f9b ",(0,r.jsx)(n.code,{children:"org.apache.fory.serializer.JavaSerializer.serializedByJDK"})," \u5de5\u5177\u65b9\u6cd5\u5224\u65ad\u4e8c\u8fdb\u5236\u6570\u636e\u662f\u5426\u4e3a JDK \u5e8f\u5217\u5316\u751f\u6210\u3002\u53ef\u7528\u5982\u4e0b\u6a21\u5f0f\u5b9e\u73b0\u534f\u8bae\u517c\u5bb9\uff0c\u652f\u6301\u5f02\u6b65\u6eda\u52a8\u5347\u7ea7\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"if (JavaSerializer.serializedByJDK(bytes)) {\n  ObjectInputStream objectInputStream=xxx;\n  return objectInputStream.readObject();\n} else {\n  return fory.deserialize(bytes);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"apache-fory-\u7248\u672c\u5347\u7ea7",children:"Apache Fory\u2122 \u7248\u672c\u5347\u7ea7"}),"\n",(0,r.jsxs)(n.p,{children:["\u76ee\u524d\u4ec5\u4fdd\u8bc1\u5c0f\u7248\u672c\u95f4\u7684\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\u3002\u4f8b\u5982\uff0cfory ",(0,r.jsx)(n.code,{children:"v0.11.1"})," \u5347\u7ea7\u5230 ",(0,r.jsx)(n.code,{children:"v0.11.2"})," \u53ef\u76f4\u63a5\u517c\u5bb9\uff0c\u5347\u7ea7\u5230 ",(0,r.jsx)(n.code,{children:"v0.12.0"})," \u5219\u4e0d\u4fdd\u8bc1\u517c\u5bb9\u3002\u5927\u591a\u6570\u573a\u666f\u65e0\u9700\u9891\u7e41\u5347\u7ea7\u4e3b\u7248\u672c\uff0c\u5f53\u524d\u7248\u672c\u5df2\u8db3\u591f\u9ad8\u6548\u7d27\u51d1\uff0c\u8001\u7248\u672c\u4e5f\u4f1a\u6301\u7eed\u7ef4\u62a4 bugfix\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,r.jsx)(n.h3,{id:"\u7c7b\u7ed3\u6784\u4e0d\u4e00\u81f4\u4e0e\u7248\u672c\u6821\u9a8c",children:"\u7c7b\u7ed3\u6784\u4e0d\u4e00\u81f4\u4e0e\u7248\u672c\u6821\u9a8c"}),"\n",(0,r.jsxs)(n.p,{children:["\u82e5\u672a\u8bbe\u7f6e ",(0,r.jsx)(n.code,{children:"CompatibleMode"})," \u4e3a ",(0,r.jsx)(n.code,{children:"org.apache.fory.config.CompatibleMode.COMPATIBLE"}),"\uff0c\u51fa\u73b0\u5e8f\u5217\u5316\u5f02\u5e38\uff0c\u53ef\u80fd\u662f\u5e8f\u5217\u5316\u7aef\u548c\u53cd\u5e8f\u5217\u5316\u7aef\u7c7b\u7ed3\u6784\u4e0d\u4e00\u81f4\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u6b64\u65f6\u53ef\u7528 ",(0,r.jsx)(n.code,{children:"ForyBuilder#withClassVersionCheck"})," \u521b\u5efa Fory \u8fdb\u884c\u6821\u9a8c\uff0c\u82e5\u53cd\u5e8f\u5217\u5316\u629b\u51fa ",(0,r.jsx)(n.code,{children:"org.apache.fory.exception.ClassNotCompatibleException"}),"\uff0c\u8bf4\u660e\u7c7b\u7ed3\u6784\u4e0d\u4e00\u81f4\uff0c\u5e94\u6539\u7528 ",(0,r.jsx)(n.code,{children:"ForyBuilder#withCompaibleMode(CompatibleMode.COMPATIBLE)"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CompatibleMode.COMPATIBLE"})," \u4f1a\u5e26\u6765\u4e00\u5b9a\u6027\u80fd\u548c\u4f53\u79ef\u5f00\u9500\uff0c\u82e5\u7c7b\u7ed3\u6784\u59cb\u7ec8\u4e00\u81f4\uff0c\u4e0d\u5efa\u8bae\u9ed8\u8ba4\u5f00\u542f\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"pojo-\u8de8\u7c7b\u578b\u53cd\u5e8f\u5217\u5316",children:"POJO \u8de8\u7c7b\u578b\u53cd\u5e8f\u5217\u5316"}),"\n",(0,r.jsxs)(n.p,{children:["Apache Fory\u2122 \u652f\u6301\u5c06\u4e00\u4e2a POJO \u5e8f\u5217\u5316\u540e\u53cd\u5e8f\u5217\u5316\u4e3a\u4e0d\u540c\u7ed3\u6784\u7684 POJO\u3002\u6b64\u65f6\u9700\u5c06 ",(0,r.jsx)(n.code,{children:"CompatibleMode"})," \u8bbe\u4e3a ",(0,r.jsx)(n.code,{children:"org.apache.fory.config.CompatibleMode.COMPATIBLE"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class DeserializeIntoType {\n  static class Struct1 {\n    int f1;\n    String f2;\n\n    public Struct1(int f1, String f2) {\n      this.f1 = f1;\n      this.f2 = f2;\n    }\n  }\n\n  static class Struct2 {\n    int f1;\n    String f2;\n    double f3;\n  }\n\n  static ThreadSafeFory fory = Fory.builder()\n    .withCompatibleMode(CompatibleMode.COMPATIBLE).buildThreadSafeFory();\n\n  public static void main(String[] args) {\n    Struct1 struct1 = new Struct1(10, "abc");\n    byte[] data = fory.serializeJavaObject(struct1);\n    Struct2 struct2 = (Struct2) fory.deserializeJavaObject(bytes, Struct2.class);\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u53cd\u5e8f\u5217\u5316-api-\u4f7f\u7528\u9519\u8bef",children:"\u53cd\u5e8f\u5217\u5316 API \u4f7f\u7528\u9519\u8bef"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7528 ",(0,r.jsx)(n.code,{children:"Fory#serialize"})," \u5e8f\u5217\u5316\u7684\u5bf9\u8c61\uff0c\u9700\u7528 ",(0,r.jsx)(n.code,{children:"Fory#deserialize"})," \u53cd\u5e8f\u5217\u5316\uff0c\u4e0d\u80fd\u7528 ",(0,r.jsx)(n.code,{children:"Fory#deserializeJavaObject"}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u7528 ",(0,r.jsx)(n.code,{children:"Fory#serializeJavaObject"})," \u5e8f\u5217\u5316\u7684\u5bf9\u8c61\uff0c\u9700\u7528 ",(0,r.jsx)(n.code,{children:"Fory#deserializeJavaObject"})," \u53cd\u5e8f\u5217\u5316\uff0c\u4e0d\u80fd\u7528 ",(0,r.jsx)(n.code,{children:"Fory#deserializeJavaObjectAndClass"})," \u6216 ",(0,r.jsx)(n.code,{children:"Fory#deserialize"}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u7528 ",(0,r.jsx)(n.code,{children:"Fory#serializeJavaObjectAndClass"})," \u5e8f\u5217\u5316\u7684\u5bf9\u8c61\uff0c\u9700\u7528 ",(0,r.jsx)(n.code,{children:"Fory#deserializeJavaObjectAndClass"})," \u53cd\u5e8f\u5217\u5316\uff0c\u4e0d\u80fd\u7528\u5176\u4ed6 API\u3002"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>t});var r=i(67294);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);