"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[8544],{62237:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>f,frontMatter:()=>t,metadata:()=>s,toc:()=>c});var a=r(85893),i=r(11151);const t={title:"\u5e8f\u5217\u5316",sidebar_position:3,id:"xlang_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,s={id:"guide/xlang/xlang_serialization",title:"\u5e8f\u5217\u5316",description:"\u672c\u9875\u6f14\u793a\u4e86\u6240\u6709\u652f\u6301\u8bed\u8a00\u7684\u8de8\u8bed\u8a00\u5e8f\u5217\u5316\u6a21\u5f0f\u793a\u4f8b\u3002\u5728\u4e00\u79cd\u8bed\u8a00\u4e2d\u5e8f\u5217\u5316\u7684\u6570\u636e\u53ef\u4ee5\u5728\u4efb\u4f55\u5176\u4ed6\u652f\u6301\u7684\u8bed\u8a00\u4e2d\u53cd\u5e8f\u5217\u5316\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.14/guide/xlang/serialization.md",sourceDirName:"guide/xlang",slug:"/guide/xlang/xlang_serialization",permalink:"/zh-CN/docs/0.14/guide/xlang/xlang_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.14/guide/xlang/serialization.md",tags:[],version:"0.14",sidebarPosition:3,frontMatter:{title:"\u5e8f\u5217\u5316",sidebar_position:3,id:"xlang_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"\u5165\u95e8\u6307\u5357",permalink:"/zh-CN/docs/0.14/guide/xlang/xlang_getting_started"},next:{title:"\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316",permalink:"/zh-CN/docs/0.14/guide/xlang/xlang_zero_copy"}},l={},c=[{value:"\u5e8f\u5217\u5316\u5185\u7f6e\u7c7b\u578b",id:"\u5e8f\u5217\u5316\u5185\u7f6e\u7c7b\u578b",level:2},{value:"Java",id:"java",level:3},{value:"Python",id:"python",level:3},{value:"Go",id:"go",level:3},{value:"JavaScript",id:"javascript",level:3},{value:"Rust",id:"rust",level:3},{value:"\u5e8f\u5217\u5316\u81ea\u5b9a\u4e49\u7c7b\u578b",id:"\u5e8f\u5217\u5316\u81ea\u5b9a\u4e49\u7c7b\u578b",level:2},{value:"Java",id:"java-1",level:3},{value:"Python",id:"python-1",level:3},{value:"Go",id:"go-1",level:3},{value:"JavaScript",id:"javascript-1",level:3},{value:"Rust",id:"rust-1",level:3},{value:"\u5e8f\u5217\u5316\u5171\u4eab\u5f15\u7528\u548c\u5faa\u73af\u5f15\u7528",id:"\u5e8f\u5217\u5316\u5171\u4eab\u5f15\u7528\u548c\u5faa\u73af\u5f15\u7528",level:2},{value:"Java",id:"java-2",level:3},{value:"Python",id:"python-2",level:3},{value:"Go",id:"go-2",level:3},{value:"JavaScript",id:"javascript-2",level:3},{value:"Rust",id:"rust-2",level:3},{value:"\u53e6\u8bf7\u53c2\u9605",id:"\u53e6\u8bf7\u53c2\u9605",level:2}];function p(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"\u672c\u9875\u6f14\u793a\u4e86\u6240\u6709\u652f\u6301\u8bed\u8a00\u7684\u8de8\u8bed\u8a00\u5e8f\u5217\u5316\u6a21\u5f0f\u793a\u4f8b\u3002\u5728\u4e00\u79cd\u8bed\u8a00\u4e2d\u5e8f\u5217\u5316\u7684\u6570\u636e\u53ef\u4ee5\u5728\u4efb\u4f55\u5176\u4ed6\u652f\u6301\u7684\u8bed\u8a00\u4e2d\u53cd\u5e8f\u5217\u5316\u3002"}),"\n",(0,a.jsx)(e.h2,{id:"\u5e8f\u5217\u5316\u5185\u7f6e\u7c7b\u578b",children:"\u5e8f\u5217\u5316\u5185\u7f6e\u7c7b\u578b"}),"\n",(0,a.jsx)(e.p,{children:"\u5e38\u89c1\u7c7b\u578b\u53ef\u4ee5\u81ea\u52a8\u5e8f\u5217\u5316\uff0c\u65e0\u9700\u6ce8\u518c\uff1a\u539f\u59cb\u6570\u503c\u7c7b\u578b\u3001\u5b57\u7b26\u4e32\u3001\u4e8c\u8fdb\u5236\u3001\u6570\u7ec4\u3001\u5217\u8868\u3001\u6620\u5c04\u7b49\u3002"}),"\n",(0,a.jsx)(e.h3,{id:"java",children:"Java"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'import org.apache.fory.*;\nimport org.apache.fory.config.*;\n\nimport java.util.*;\n\npublic class Example1 {\n  public static void main(String[] args) {\n    Fory fory = Fory.builder().withLanguage(Language.XLANG).build();\n    List<Object> list = ofArrayList(true, false, "str", -1.1, 1, new int[100], new double[20]);\n    byte[] bytes = fory.serialize(list);\n    // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n    fory.deserialize(bytes);\n    Map<Object, Object> map = new HashMap<>();\n    map.put("k1", "v1");\n    map.put("k2", list);\n    map.put("k3", -1);\n    bytes = fory.serialize(map);\n    // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n    fory.deserialize(bytes);\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"python",children:"Python"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'import pyfory\nimport numpy as np\n\nfory = pyfory.Fory()\nobject_list = [True, False, "str", -1.1, 1,\n               np.full(100, 0, dtype=np.int32), np.full(20, 0.0, dtype=np.double)]\ndata = fory.serialize(object_list)\n# bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\nnew_list = fory.deserialize(data)\nobject_map = {"k1": "v1", "k2": object_list, "k3": -1}\ndata = fory.serialize(object_map)\n# bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\nnew_map = fory.deserialize(data)\nprint(new_map)\n'})}),"\n",(0,a.jsx)(e.h3,{id:"go",children:"Go"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'package main\n\nimport forygo "github.com/apache/fory/go/fory"\nimport "fmt"\n\nfunc main() {\n  list := []interface{}{true, false, "str", -1.1, 1, make([]int32, 10), make([]float64, 20)}\n  fory := forygo.NewFory()\n  bytes, err := fory.Marshal(list)\n  if err != nil {\n    panic(err)\n  }\n  var newValue interface{}\n  // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n  if err := fory.Unmarshal(bytes, &newValue); err != nil {\n    panic(err)\n  }\n  fmt.Println(newValue)\n  dict := map[string]interface{}{\n    "k1": "v1",\n    "k2": list,\n    "k3": -1,\n  }\n  bytes, err = fory.Marshal(dict)\n  if err != nil {\n    panic(err)\n  }\n  // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n  if err := fory.Unmarshal(bytes, &newValue); err != nil {\n    panic(err)\n  }\n  fmt.Println(newValue)\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"javascript",children:"JavaScript"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-javascript",children:'import Fory from "@apache-fory/fory";\n\n/**\n * @apache-fory/hps \u4f7f\u7528 v8 \u7684 fast-calls-api\uff0c\u53ef\u4ee5\u76f4\u63a5\u88ab jit \u8c03\u7528\uff0c\n * \u786e\u4fdd Node \u7248\u672c\u4e3a 20 \u6216\u66f4\u9ad8\u3002\n * \u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u76ee\u524d\u65e0\u6cd5\u4fdd\u8bc1\u5b89\u88c5\u6210\u529f\u3002\n * \u5982\u679c\u65e0\u6cd5\u5b89\u88c5\u8be5\u6a21\u5757\uff0c\u8bf7\u5c06\u5176\u66ff\u6362\u4e3a `const hps = null;`\n **/\nimport hps from "@apache-fory/hps";\n\nconst fory = new Fory({ hps });\nconst input = fory.serialize("hello fory");\nconst result = fory.deserialize(input);\nconsole.log(result);\n'})}),"\n",(0,a.jsx)(e.h3,{id:"rust",children:"Rust"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-rust",children:'use fory::{from_buffer, to_buffer, Fory};\nuse std::collections::HashMap;\n\nfn run() {\n    let bin: Vec<u8> = to_buffer(&"hello".to_string());\n    let obj: String = from_buffer(&bin).expect("should success");\n    assert_eq!("hello".to_string(), obj);\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u5e8f\u5217\u5316\u81ea\u5b9a\u4e49\u7c7b\u578b",children:"\u5e8f\u5217\u5316\u81ea\u5b9a\u4e49\u7c7b\u578b"}),"\n",(0,a.jsx)(e.p,{children:"\u7528\u6237\u5b9a\u4e49\u7684\u7c7b\u578b\u5fc5\u987b\u4f7f\u7528 register API \u8fdb\u884c\u6ce8\u518c\uff0c\u4ee5\u5efa\u7acb\u4e0d\u540c\u8bed\u8a00\u4e2d\u7c7b\u578b\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\u8bf7\u5728\u6240\u6709\u8bed\u8a00\u4e2d\u4f7f\u7528\u4e00\u81f4\u7684\u7c7b\u578b\u540d\u79f0\u3002"}),"\n",(0,a.jsx)(e.h3,{id:"java-1",children:"Java"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'import org.apache.fory.*;\nimport org.apache.fory.config.*;\nimport java.util.*;\n\npublic class Example2 {\n  public static class SomeClass1 {\n    Object f1;\n    Map<Byte, Integer> f2;\n  }\n\n  public static class SomeClass2 {\n    Object f1;\n    String f2;\n    List<Object> f3;\n    Map<Byte, Integer> f4;\n    Byte f5;\n    Short f6;\n    Integer f7;\n    Long f8;\n    Float f9;\n    Double f10;\n    short[] f11;\n    List<Short> f12;\n  }\n\n  public static Object createObject() {\n    SomeClass1 obj1 = new SomeClass1();\n    obj1.f1 = true;\n    obj1.f2 = ofHashMap((byte) -1, 2);\n    SomeClass2 obj = new SomeClass2();\n    obj.f1 = obj1;\n    obj.f2 = "abc";\n    obj.f3 = ofArrayList("abc", "abc");\n    obj.f4 = ofHashMap((byte) 1, 2);\n    obj.f5 = Byte.MAX_VALUE;\n    obj.f6 = Short.MAX_VALUE;\n    obj.f7 = Integer.MAX_VALUE;\n    obj.f8 = Long.MAX_VALUE;\n    obj.f9 = 1.0f / 2;\n    obj.f10 = 1 / 3.0;\n    obj.f11 = new short[]{(short) 1, (short) 2};\n    obj.f12 = ofArrayList((short) -1, (short) 4);\n    return obj;\n  }\n\n  // mvn exec:java -Dexec.mainClass="org.apache.fory.examples.Example2"\n  public static void main(String[] args) {\n    Fory fory = Fory.builder().withLanguage(Language.XLANG).build();\n    fory.register(SomeClass1.class, "example.SomeClass1");\n    fory.register(SomeClass2.class, "example.SomeClass2");\n    byte[] bytes = fory.serialize(createObject());\n    // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n    System.out.println(fory.deserialize(bytes));\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"python-1",children:"Python"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'from dataclasses import dataclass\nfrom typing import List, Dict, Any\nimport pyfory, array\n\n\n@dataclass\nclass SomeClass1:\n    f1: Any\n    f2: Dict[pyfory.Int8Type, pyfory.Int32Type]\n\n\n@dataclass\nclass SomeClass2:\n    f1: Any = None\n    f2: str = None\n    f3: List[str] = None\n    f4: Dict[pyfory.Int8Type, pyfory.Int32Type] = None\n    f5: pyfory.Int8Type = None\n    f6: pyfory.Int16Type = None\n    f7: pyfory.Int32Type = None\n    # int \u7c7b\u578b\u5c06\u88ab\u89c6\u4e3a `pyfory.Int64Type`\u3002\n    # \u5982\u679c\u5bf9\u7b49\u65b9\u4f7f\u7528\u66f4\u7a84\u7684\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528 `pyfory.Int32Type` \u8fdb\u884c\u7c7b\u578b\u63d0\u793a\u3002\n    f8: int = None\n    f9: pyfory.Float32Type = None\n    # float \u7c7b\u578b\u5c06\u88ab\u89c6\u4e3a `pyfory.Float64Type`\n    f10: float = None\n    f11: pyfory.Int16ArrayType = None\n    f12: List[pyfory.Int16Type] = None\n\n\nif __name__ == "__main__":\n    f = pyfory.Fory()\n    f.register_type(SomeClass1, typename="example.SomeClass1")\n    f.register_type(SomeClass2, typename="example.SomeClass2")\n    obj1 = SomeClass1(f1=True, f2={-1: 2})\n    obj = SomeClass2(\n        f1=obj1,\n        f2="abc",\n        f3=["abc", "abc"],\n        f4={1: 2},\n        f5=2 ** 7 - 1,\n        f6=2 ** 15 - 1,\n        f7=2 ** 31 - 1,\n        f8=2 ** 63 - 1,\n        f9=1.0 / 2,\n        f10=1 / 3.0,\n        f11=array.array("h", [1, 2]),\n        f12=[-1, 4],\n    )\n    data = f.serialize(obj)\n    # bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n    print(f.deserialize(data))\n'})}),"\n",(0,a.jsx)(e.h3,{id:"go-1",children:"Go"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'package main\n\nimport forygo "github.com/apache/fory/go/fory"\nimport "fmt"\n\nfunc main() {\n  type SomeClass1 struct {\n    F1  interface{}\n    F2  string\n    F3  []interface{}\n    F4  map[int8]int32\n    F5  int8\n    F6  int16\n    F7  int32\n    F8  int64\n    F9  float32\n    F10 float64\n    F11 []int16\n    F12 fory.Int16Slice\n  }\n\n  type SomeClass2 struct {\n    F1 interface{}\n    F2 map[int8]int32\n  }\n  fory := forygo.NewFory()\n  if err := fory.RegisterTagType("example.SomeClass1", SomeClass1{}); err != nil {\n    panic(err)\n  }\n  if err := fory.RegisterTagType("example.SomeClass2", SomeClass2{}); err != nil {\n    panic(err)\n  }\n  obj1 := &SomeClass1{}\n  obj1.F1 = true\n  obj1.F2 = map[int8]int32{-1: 2}\n  obj := &SomeClass1{}\n  obj.F1 = obj1\n  obj.F2 = "abc"\n  obj.F3 = []interface{}{"abc", "abc"}\n  f4 := map[int8]int32{1: 2}\n  obj.F4 = f4\n  obj.F5 = fory.MaxInt8\n  obj.F6 = fory.MaxInt16\n  obj.F7 = fory.MaxInt32\n  obj.F8 = fory.MaxInt64\n  obj.F9 = 1.0 / 2\n  obj.F10 = 1 / 3.0\n  obj.F11 = []int16{1, 2}\n  obj.F12 = []int16{-1, 4}\n  bytes, err := fory.Marshal(obj);\n  if err != nil {\n    panic(err)\n  }\n  var newValue interface{}\n  // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n  if err := fory.Unmarshal(bytes, &newValue); err != nil {\n    panic(err)\n  }\n  fmt.Println(newValue)\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"javascript-1",children:"JavaScript"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-javascript",children:'import Fory, { Type, InternalSerializerType } from "@apache-fory/fory";\n\n/**\n * @apache-fory/hps \u4f7f\u7528 v8 \u7684 fast-calls-api\uff0c\u53ef\u4ee5\u76f4\u63a5\u88ab jit \u8c03\u7528\uff0c\n * \u786e\u4fdd Node \u7248\u672c\u4e3a 20 \u6216\u66f4\u9ad8\u3002\n * \u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u76ee\u524d\u65e0\u6cd5\u4fdd\u8bc1\u5b89\u88c5\u6210\u529f\u3002\n * \u5982\u679c\u65e0\u6cd5\u5b89\u88c5\u8be5\u6a21\u5757\uff0c\u8bf7\u5c06\u5176\u66ff\u6362\u4e3a `const hps = null;`\n **/\nimport hps from "@apache-fory/hps";\n\n// \u4f7f\u7528 JSON schema \u63cf\u8ff0\u6570\u636e\u7ed3\u6784\nconst description = Type.object("example.foo", {\n  foo: Type.string(),\n});\nconst fory = new Fory({ hps });\nconst { serialize, deserialize } = fory.registerSerializer(description);\nconst input = serialize({ foo: "hello fory" });\nconst result = deserialize(input);\nconsole.log(result);\n'})}),"\n",(0,a.jsx)(e.h3,{id:"rust-1",children:"Rust"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-rust",children:'use chrono::{NaiveDate, NaiveDateTime};\nuse fory::{from_buffer, to_buffer, Fory};\nuse std::collections::HashMap;\n\n#[test]\nfn complex_struct() {\n    #[derive(Fory, Debug, PartialEq)]\n    #[tag("example.foo2")]\n    struct Animal {\n        category: String,\n    }\n\n    #[derive(Fory, Debug, PartialEq)]\n    #[tag("example.foo")]\n    struct Person {\n        c1: Vec<u8>,  // binary\n        c2: Vec<i16>, // primitive array\n        animal: Vec<Animal>,\n        c3: Vec<Vec<u8>>,\n        name: String,\n        c4: HashMap<String, String>,\n        age: u16,\n        op: Option<String>,\n        op2: Option<String>,\n        date: NaiveDate,\n        time: NaiveDateTime,\n        c5: f32,\n        c6: f64,\n    }\n    let person: Person = Person {\n        c1: vec![1, 2, 3],\n        c2: vec![5, 6, 7],\n        c3: vec![vec![1, 2], vec![1, 3]],\n        animal: vec![Animal {\n            category: "Dog".to_string(),\n        }],\n        c4: HashMap::from([\n            ("hello1".to_string(), "hello2".to_string()),\n            ("hello2".to_string(), "hello3".to_string()),\n        ]),\n        age: 12,\n        name: "helo".to_string(),\n        op: Some("option".to_string()),\n        op2: None,\n        date: NaiveDate::from_ymd_opt(2025, 12, 12).unwrap(),\n        time: NaiveDateTime::from_timestamp_opt(1689912359, 0).unwrap(),\n        c5: 2.0,\n        c6: 4.0,\n    };\n\n    let bin: Vec<u8> = to_buffer(&person);\n    let obj: Person = from_buffer(&bin).expect("should success");\n    assert_eq!(person, obj);\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u5e8f\u5217\u5316\u5171\u4eab\u5f15\u7528\u548c\u5faa\u73af\u5f15\u7528",children:"\u5e8f\u5217\u5316\u5171\u4eab\u5f15\u7528\u548c\u5faa\u73af\u5f15\u7528"}),"\n",(0,a.jsx)(e.p,{children:"\u5171\u4eab\u5f15\u7528\u548c\u5faa\u73af\u5f15\u7528\u53ef\u4ee5\u81ea\u52a8\u5e8f\u5217\u5316\uff0c\u4e0d\u4f1a\u6709\u91cd\u590d\u6570\u636e\u6216\u9012\u5f52\u9519\u8bef\u3002\u542f\u7528\u5f15\u7528\u8ddf\u8e2a\u5373\u53ef\u4f7f\u7528\u6b64\u529f\u80fd\u3002"}),"\n",(0,a.jsx)(e.h3,{id:"java-2",children:"Java"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'import org.apache.fory.*;\nimport org.apache.fory.config.*;\nimport java.util.*;\n\npublic class ReferenceExample {\n  public static class SomeClass {\n    SomeClass f1;\n    Map<String, String> f2;\n    Map<String, String> f3;\n  }\n\n  public static Object createObject() {\n    SomeClass obj = new SomeClass();\n    obj.f1 = obj;\n    obj.f2 = ofHashMap("k1", "v1", "k2", "v2");\n    obj.f3 = obj.f2;\n    return obj;\n  }\n\n  // mvn exec:java -Dexec.mainClass="org.apache.fory.examples.ReferenceExample"\n  public static void main(String[] args) {\n    Fory fory = Fory.builder().withLanguage(Language.XLANG)\n      .withRefTracking(true).build();\n    fory.register(SomeClass.class, "example.SomeClass");\n    byte[] bytes = fory.serialize(createObject());\n    // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n    System.out.println(fory.deserialize(bytes));\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"python-2",children:"Python"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'from typing import Dict\nimport pyfory\n\nclass SomeClass:\n    f1: "SomeClass"\n    f2: Dict[str, str]\n    f3: Dict[str, str]\n\nfory = pyfory.Fory(ref_tracking=True)\nfory.register_type(SomeClass, typename="example.SomeClass")\nobj = SomeClass()\nobj.f2 = {"k1": "v1", "k2": "v2"}\nobj.f1, obj.f3 = obj, obj.f2\ndata = fory.serialize(obj)\n# bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\nprint(fory.deserialize(data))\n'})}),"\n",(0,a.jsx)(e.h3,{id:"go-2",children:"Go"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'package main\n\nimport forygo "github.com/apache/fory/go/fory"\nimport "fmt"\n\nfunc main() {\n  type SomeClass struct {\n    F1 *SomeClass\n    F2 map[string]string\n    F3 map[string]string\n  }\n  fory := forygo.NewFory(true)\n  if err := fory.Register(SomeClass{}, 65); err != nil {\n    panic(err)\n  }\n  value := &SomeClass{F2: map[string]string{"k1": "v1", "k2": "v2"}}\n  value.F3 = value.F2\n  value.F1 = value\n  bytes, err := fory.Marshal(value)\n  if err != nil {\n    panic(err)\n  }\n  var newValue interface{}\n  // bytes \u53ef\u4ee5\u88ab\u5176\u4ed6\u8bed\u8a00\u53cd\u5e8f\u5217\u5316\n  if err := fory.Unmarshal(bytes, &newValue); err != nil {\n    panic(err)\n  }\n  fmt.Println(newValue)\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"javascript-2",children:"JavaScript"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-javascript",children:'import Fory, { Type } from "@apache-fory/fory";\n/**\n * @apache-fory/hps \u4f7f\u7528 v8 \u7684 fast-calls-api\uff0c\u53ef\u4ee5\u76f4\u63a5\u88ab jit \u8c03\u7528\uff0c\n * \u786e\u4fdd Node \u7248\u672c\u4e3a 20 \u6216\u66f4\u9ad8\u3002\n * \u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u76ee\u524d\u65e0\u6cd5\u4fdd\u8bc1\u5b89\u88c5\u6210\u529f\u3002\n * \u5982\u679c\u65e0\u6cd5\u5b89\u88c5\u8be5\u6a21\u5757\uff0c\u8bf7\u5c06\u5176\u66ff\u6362\u4e3a `const hps = null;`\n **/\nimport hps from "@apache-fory/hps";\n\nconst description = Type.object("example.foo", {\n  foo: Type.string(),\n  bar: Type.object("example.foo"),\n});\n\nconst fory = new Fory({ hps });\nconst { serialize, deserialize } = fory.registerSerializer(description);\nconst data: any = {\n  foo: "hello fory",\n};\ndata.bar = data;\nconst input = serialize(data);\nconst result = deserialize(input);\nconsole.log(result.bar.foo === result.foo);\n'})}),"\n",(0,a.jsx)(e.h3,{id:"rust-2",children:"Rust"}),"\n",(0,a.jsx)(e.p,{children:"\u7531\u4e8e\u6240\u6709\u6743\u9650\u5236\uff0cRust \u4e2d\u65e0\u6cd5\u5b9e\u73b0\u5faa\u73af\u5f15\u7528\u3002"}),"\n",(0,a.jsx)(e.h2,{id:"\u53e6\u8bf7\u53c2\u9605",children:"\u53e6\u8bf7\u53c2\u9605"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/zh-CN/docs/0.14/guide/xlang/xlang_zero_copy",children:"\u96f6\u62f7\u8d1d\u5e8f\u5217\u5316"})," - \u5927\u578b\u6570\u636e\u7684\u5e26\u5916\u5e8f\u5217\u5316"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"https://fory.apache.org/docs/specification/xlang_type_mapping",children:"\u7c7b\u578b\u6620\u5c04"})," - \u8de8\u8bed\u8a00\u7c7b\u578b\u6620\u5c04\u53c2\u8003"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/zh-CN/docs/0.14/guide/xlang/xlang_getting_started",children:"\u5165\u95e8\u6307\u5357"})," - \u5b89\u88c5\u548c\u8bbe\u7f6e"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"https://fory.apache.org/docs/next/specification/fory_xlang_serialization_spec",children:"Xlang \u5e8f\u5217\u5316\u89c4\u8303"})," - \u4e8c\u8fdb\u5236\u534f\u8bae\u8be6\u60c5"]}),"\n"]})]})}function f(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(p,{...n})}):p(n)}},11151:(n,e,r)=>{r.d(e,{Z:()=>s,a:()=>o});var a=r(67294);const i={},t=a.createContext(i);function o(n){const e=a.useContext(t);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),a.createElement(t.Provider,{value:e},n.children)}}}]);