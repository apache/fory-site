"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[27425],{13249:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var i=r(85893),s=r(11151);const l={title:"GraalVM \u6307\u5357",sidebar_position:19,id:"graalvm_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},a=void 0,t={id:"guide/graalvm_serialization",title:"GraalVM \u6307\u5357",description:"GraalVM Native Image",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/graalvm_guide.md",sourceDirName:"guide",slug:"/guide/graalvm_serialization",permalink:"/zh-CN/docs/next/guide/graalvm_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/graalvm_guide.md",tags:[],version:"current",sidebarPosition:19,frontMatter:{title:"GraalVM \u6307\u5357",sidebar_position:19,id:"graalvm_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"\u5b57\u6bb5\u7c7b\u578b\u5143\u4fe1\u606f",permalink:"/zh-CN/docs/next/guide/xlang/field_type_meta"},next:{title:"\u5f00\u53d1\u6307\u5357",permalink:"/zh-CN/docs/next/guide/development"}},o={},d=[{value:"GraalVM Native Image",id:"graalvm-native-image",level:2},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:2},{value:"\u6b65\u9aa4 1\uff1a\u521b\u5efa Fory \u5e76\u6ce8\u518c\u7c7b",id:"\u6b65\u9aa4-1\u521b\u5efa-fory-\u5e76\u6ce8\u518c\u7c7b",level:3},{value:"\u6b65\u9aa4 2\uff1a\u914d\u7f6e\u6784\u5efa\u65f6\u521d\u59cb\u5316",id:"\u6b65\u9aa4-2\u914d\u7f6e\u6784\u5efa\u65f6\u521d\u59cb\u5316",level:3},{value:"ForyGraalVMFeature\uff08\u53ef\u9009\uff09",id:"forygraalvmfeature\u53ef\u9009",level:2},{value:"\u6dfb\u52a0\u4f9d\u8d56",id:"\u6dfb\u52a0\u4f9d\u8d56",level:3},{value:"\u542f\u7528\u529f\u80fd",id:"\u542f\u7528\u529f\u80fd",level:3},{value:"ForyGraalVMFeature \u5904\u7406\u7684\u5185\u5bb9",id:"forygraalvmfeature-\u5904\u7406\u7684\u5185\u5bb9",level:3},{value:"\u79c1\u6709\u8bb0\u5f55\u793a\u4f8b",id:"\u79c1\u6709\u8bb0\u5f55\u793a\u4f8b",level:3},{value:"\u52a8\u6001\u4ee3\u7406\u793a\u4f8b",id:"\u52a8\u6001\u4ee3\u7406\u793a\u4f8b",level:3},{value:"\u7ebf\u7a0b\u5b89\u5168\u7684 Fory",id:"\u7ebf\u7a0b\u5b89\u5168\u7684-fory",level:2},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:2},{value:"&quot;Type is instantiated reflectively but was never registered&quot;",id:"type-is-instantiated-reflectively-but-was-never-registered",level:3},{value:"\u6846\u67b6\u96c6\u6210",id:"\u6846\u67b6\u96c6\u6210",level:2},{value:"\u57fa\u51c6\u6d4b\u8bd5",id:"\u57fa\u51c6\u6d4b\u8bd5",level:2},{value:"Struct \u57fa\u51c6\u6d4b\u8bd5",id:"struct-\u57fa\u51c6\u6d4b\u8bd5",level:3},{value:"\u7c7b\u5b57\u6bb5",id:"\u7c7b\u5b57\u6bb5",level:4},{value:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c",id:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c",level:4},{value:"Pojo \u57fa\u51c6\u6d4b\u8bd5",id:"pojo-\u57fa\u51c6\u6d4b\u8bd5",level:3},{value:"\u7c7b\u5b57\u6bb5",id:"\u7c7b\u5b57\u6bb5-1",level:4},{value:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c",id:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c-1",level:4}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"graalvm-native-image",children:"GraalVM Native Image"}),"\n",(0,i.jsxs)(n.p,{children:["GraalVM ",(0,i.jsx)(n.code,{children:"native image"})," \u63d0\u524d\u5c06 Java \u4ee3\u7801\u7f16\u8bd1\u4e3a\u672c\u5730\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4ece\u800c\u5b9e\u73b0\u66f4\u5feb\u7684\u542f\u52a8\u901f\u5ea6\u548c\u66f4\u4f4e\u7684\u5185\u5b58\u4f7f\u7528\u3002\u4f46\u662f\uff0c\u672c\u5730\u955c\u50cf\u4e0d\u652f\u6301\u8fd0\u884c\u65f6 JIT \u7f16\u8bd1\u6216\u53cd\u5c04\uff0c\u9664\u975e\u8fdb\u884c\u663e\u5f0f\u914d\u7f6e\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["Apache Fory\u2122 \u901a\u8fc7",(0,i.jsx)(n.strong,{children:"\u4f7f\u7528\u4ee3\u7801\u751f\u6210\u800c\u975e\u53cd\u5c04"}),"\uff0c\u53ef\u4ee5\u5b8c\u7f8e\u5730\u4e0e GraalVM native image \u914d\u5408\u4f7f\u7528\u3002\u6240\u6709\u5e8f\u5217\u5316\u5668\u4ee3\u7801\u90fd\u5728\u6784\u5efa\u65f6\u751f\u6210\uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u65e0\u9700\u53cd\u5c04\u914d\u7f6e\u6587\u4ef6\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5de5\u4f5c\u539f\u7406",children:"\u5de5\u4f5c\u539f\u7406"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u60a8\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u65f6\uff0cFory \u4f1a\u5728 GraalVM \u6784\u5efa\u65f6\u751f\u6210\u5e8f\u5217\u5316\u4ee3\u7801\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5c06 Fory \u521b\u5efa\u4e3a",(0,i.jsx)(n.strong,{children:"\u9759\u6001"}),"\u5b57\u6bb5"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5728\u9759\u6001\u521d\u59cb\u5316\u5668\u4e2d",(0,i.jsx)(n.strong,{children:"\u6ce8\u518c"}),"\u6240\u6709\u7c7b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"fory.ensureSerializersCompiled()"})," \u6765\u7f16\u8bd1\u5e8f\u5217\u5316\u5668"]}),"\n",(0,i.jsxs)(n.li,{children:["\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"native-image.properties"})," \u914d\u7f6e\u8be5\u7c7b\u5728\u6784\u5efa\u65f6\u521d\u59cb\u5316"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u8981\u4f18\u52bf"}),"\uff1a\u5bf9\u4e8e\u5927\u591a\u6570\u53ef\u5e8f\u5217\u5316\u7684\u7c7b\uff0c\u60a8\u65e0\u9700\u914d\u7f6e",(0,i.jsx)(n.a,{href:"https://www.graalvm.org/latest/reference-manual/native-image/metadata/#specifying-reflection-metadata-in-json",children:"\u53cd\u5c04 json"})," \u6216",(0,i.jsx)(n.a,{href:"https://www.graalvm.org/latest/reference-manual/native-image/metadata/#serialization",children:"\u5e8f\u5217\u5316 json"}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6ce8\u610f\uff1aFory \u7684 ",(0,i.jsx)(n.code,{children:"asyncCompilationEnabled"})," \u9009\u9879\u5728 GraalVM native image \u4e2d\u4f1a\u81ea\u52a8\u7981\u7528\uff0c\u56e0\u4e3a\u4e0d\u652f\u6301\u8fd0\u884c\u65f6 JIT\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,i.jsx)(n.h3,{id:"\u6b65\u9aa4-1\u521b\u5efa-fory-\u5e76\u6ce8\u518c\u7c7b",children:"\u6b65\u9aa4 1\uff1a\u521b\u5efa Fory \u5e76\u6ce8\u518c\u7c7b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"import org.apache.fory.Fory;\n\npublic class Example {\n  // \u5fc5\u987b\u662f\u9759\u6001\u5b57\u6bb5\n  static Fory fory;\n\n  static {\n    fory = Fory.builder().build();\n    fory.register(MyClass.class);\n    fory.register(AnotherClass.class);\n    // \u5728\u6784\u5efa\u65f6\u7f16\u8bd1\u6240\u6709\u5e8f\u5217\u5316\u5668\n    fory.ensureSerializersCompiled();\n  }\n\n  public static void main(String[] args) {\n    byte[] bytes = fory.serialize(new MyClass());\n    MyClass obj = (MyClass) fory.deserialize(bytes);\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u6b65\u9aa4-2\u914d\u7f6e\u6784\u5efa\u65f6\u521d\u59cb\u5316",children:"\u6b65\u9aa4 2\uff1a\u914d\u7f6e\u6784\u5efa\u65f6\u521d\u59cb\u5316"}),"\n",(0,i.jsxs)(n.p,{children:["\u521b\u5efa ",(0,i.jsx)(n.code,{children:"resources/META-INF/native-image/your-group/your-artifact/native-image.properties"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"Args = --initialize-at-build-time=com.example.Example\n"})}),"\n",(0,i.jsx)(n.h2,{id:"forygraalvmfeature\u53ef\u9009",children:"ForyGraalVMFeature\uff08\u53ef\u9009\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e\u5927\u591a\u6570\u5177\u6709\u516c\u5171\u6784\u9020\u51fd\u6570\u7684\u7c7b\u578b\uff0c\u4e0a\u8ff0\u57fa\u672c\u8bbe\u7f6e\u5c31\u8db3\u591f\u4e86\u3002\u4f46\u662f\uff0c\u4e00\u4e9b\u9ad8\u7ea7\u60c5\u51b5\u9700\u8981\u53cd\u5c04\u6ce8\u518c\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u79c1\u6709\u6784\u9020\u51fd\u6570"}),"\uff08\u6ca1\u6709\u53ef\u8bbf\u95ee\u7684\u65e0\u53c2\u6784\u9020\u51fd\u6570\u7684\u7c7b\uff09"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u79c1\u6709\u5185\u90e8\u7c7b/\u8bb0\u5f55"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u52a8\u6001\u4ee3\u7406\u5e8f\u5217\u5316"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"fory-graalvm-feature"})," \u6a21\u5757\u4f1a\u81ea\u52a8\u5904\u7406\u8fd9\u4e9b\u60c5\u51b5\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e ",(0,i.jsx)(n.code,{children:"reflect-config.json"}),"\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6dfb\u52a0\u4f9d\u8d56",children:"\u6dfb\u52a0\u4f9d\u8d56"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.apache.fory</groupId>\n  <artifactId>fory-graalvm-feature</artifactId>\n  <version>${fory.version}</version>\n</dependency>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u542f\u7528\u529f\u80fd",children:"\u542f\u7528\u529f\u80fd"}),"\n",(0,i.jsxs)(n.p,{children:["\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230\u60a8\u7684 ",(0,i.jsx)(n.code,{children:"native-image.properties"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"Args = --initialize-at-build-time=com.example.Example \\\n       --features=org.apache.fory.graalvm.feature.ForyGraalVMFeature\n"})}),"\n",(0,i.jsx)(n.h3,{id:"forygraalvmfeature-\u5904\u7406\u7684\u5185\u5bb9",children:"ForyGraalVMFeature \u5904\u7406\u7684\u5185\u5bb9"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u573a\u666f"}),(0,i.jsx)(n.th,{children:"\u4e0d\u4f7f\u7528 Feature"}),(0,i.jsx)(n.th,{children:"\u4f7f\u7528 Feature"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u5177\u6709\u65e0\u53c2\u6784\u9020\u51fd\u6570\u7684\u516c\u5171\u7c7b"}),(0,i.jsx)(n.td,{children:"\u2705 \u53ef\u5de5\u4f5c"}),(0,i.jsx)(n.td,{children:"\u2705 \u53ef\u5de5\u4f5c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u79c1\u6709\u6784\u9020\u51fd\u6570"}),(0,i.jsx)(n.td,{children:"\u274c \u9700\u8981 reflect-config.json"}),(0,i.jsx)(n.td,{children:"\u2705 \u81ea\u52a8\u6ce8\u518c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u79c1\u6709\u5185\u90e8\u8bb0\u5f55"}),(0,i.jsx)(n.td,{children:"\u274c \u9700\u8981 reflect-config.json"}),(0,i.jsx)(n.td,{children:"\u2705 \u81ea\u52a8\u6ce8\u518c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u52a8\u6001\u4ee3\u7406"}),(0,i.jsx)(n.td,{children:"\u274c \u9700\u8981\u624b\u52a8\u914d\u7f6e"}),(0,i.jsx)(n.td,{children:"\u2705 \u81ea\u52a8\u6ce8\u518c"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u79c1\u6709\u8bb0\u5f55\u793a\u4f8b",children:"\u79c1\u6709\u8bb0\u5f55\u793a\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Example {\n  // \u79c1\u6709\u5185\u90e8\u8bb0\u5f55 - \u9700\u8981 ForyGraalVMFeature\n  private record PrivateRecord(int id, String name) {}\n\n  static Fory fory;\n\n  static {\n    fory = Fory.builder().build();\n    fory.register(PrivateRecord.class);\n    fory.ensureSerializersCompiled();\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u52a8\u6001\u4ee3\u7406\u793a\u4f8b",children:"\u52a8\u6001\u4ee3\u7406\u793a\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"import org.apache.fory.util.GraalvmSupport;\n\npublic class ProxyExample {\n  public interface MyService {\n    String execute();\n  }\n\n  static Fory fory;\n\n  static {\n    fory = Fory.builder().build();\n    // \u4e3a\u5e8f\u5217\u5316\u6ce8\u518c\u4ee3\u7406\u63a5\u53e3\n    GraalvmSupport.registerProxySupport(MyService.class);\n    fory.ensureSerializersCompiled();\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u7ebf\u7a0b\u5b89\u5168\u7684-fory",children:"\u7ebf\u7a0b\u5b89\u5168\u7684 Fory"}),"\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u4e8e\u591a\u7ebf\u7a0b\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"ThreadLocalFory"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.apache.fory.Fory;\nimport org.apache.fory.ThreadLocalFory;\nimport org.apache.fory.ThreadSafeFory;\n\npublic class ThreadSafeExample {\n  public record Foo(int f1, String f2, List<String> f3) {}\n\n  static ThreadSafeFory fory;\n\n  static {\n    fory = new ThreadLocalFory(classLoader -> {\n      Fory f = Fory.builder().build();\n      f.register(Foo.class);\n      f.ensureSerializersCompiled();\n      return f;\n    });\n  }\n\n  public static void main(String[] args) {\n    Foo foo = new Foo(10, "abc", List.of("str1", "str2"));\n    byte[] bytes = fory.serialize(foo);\n    Foo result = (Foo) fory.deserialize(bytes);\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,i.jsx)(n.h3,{id:"type-is-instantiated-reflectively-but-was-never-registered",children:'"Type is instantiated reflectively but was never registered"'}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u60a8\u770b\u5230\u6b64\u9519\u8bef\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Type com.example.MyClass is instantiated reflectively but was never registered\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a\u4f7f\u7528 Fory \u6ce8\u518c\u8be5\u7c7b\uff08\u4e0d\u8981\u6dfb\u52a0\u5230 reflect-config.json\uff09\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"fory.register(MyClass.class);\nfory.ensureSerializersCompiled();\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u8be5\u7c7b\u5177\u6709\u79c1\u6709\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u6dfb\u52a0 ",(0,i.jsx)(n.code,{children:"fory-graalvm-feature"})," \u4f9d\u8d56\uff0c\u6216"]}),"\n",(0,i.jsxs)(n.li,{children:["\u4e3a\u8be5\u7279\u5b9a\u7c7b\u521b\u5efa ",(0,i.jsx)(n.code,{children:"reflect-config.json"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6846\u67b6\u96c6\u6210",children:"\u6846\u67b6\u96c6\u6210"}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e\u96c6\u6210 Fory \u7684\u6846\u67b6\u5f00\u53d1\u8005\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e3a\u7528\u6237\u63d0\u4f9b\u914d\u7f6e\u6587\u4ef6\u4ee5\u5217\u51fa\u53ef\u5e8f\u5217\u5316\u7684\u7c7b"}),"\n",(0,i.jsxs)(n.li,{children:["\u52a0\u8f7d\u8fd9\u4e9b\u7c7b\u5e76\u4e3a\u6bcf\u4e2a\u7c7b\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"fory.register(Class<?>)"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u5b8c\u6210\u6240\u6709\u6ce8\u518c\u540e\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"fory.ensureSerializersCompiled()"})]}),"\n",(0,i.jsx)(n.li,{children:"\u914d\u7f6e\u60a8\u7684\u96c6\u6210\u7c7b\u4ee5\u5728\u6784\u5efa\u65f6\u521d\u59cb\u5316"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u57fa\u51c6\u6d4b\u8bd5",children:"\u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.p,{children:"Fory \u4e0e GraalVM JDK \u5e8f\u5217\u5316\u7684\u6027\u80fd\u6bd4\u8f83\uff1a"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,i.jsx)(n.th,{children:"\u538b\u7f29"}),(0,i.jsx)(n.th,{children:"\u901f\u5ea6"}),(0,i.jsx)(n.th,{children:"\u5927\u5c0f"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Struct"}),(0,i.jsx)(n.td,{children:"\u5173\u95ed"}),(0,i.jsx)(n.td,{children:"46 \u500d\u66f4\u5feb"}),(0,i.jsx)(n.td,{children:"43%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Struct"}),(0,i.jsx)(n.td,{children:"\u5f00\u542f"}),(0,i.jsx)(n.td,{children:"24 \u500d\u66f4\u5feb"}),(0,i.jsx)(n.td,{children:"31%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Pojo"}),(0,i.jsx)(n.td,{children:"\u5173\u95ed"}),(0,i.jsx)(n.td,{children:"12 \u500d\u66f4\u5feb"}),(0,i.jsx)(n.td,{children:"56%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Pojo"}),(0,i.jsx)(n.td,{children:"\u5f00\u542f"}),(0,i.jsx)(n.td,{children:"12 \u500d\u66f4\u5feb"}),(0,i.jsx)(n.td,{children:"48%"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["\u67e5\u770b ",(0,i.jsx)(n.a,{href:"https://github.com/apache/fory/blob/main/integration_tests/graalvm_tests/src/main/java/org/apache/fory/graalvm/Benchmark.java",children:"Benchmark.java"})," \u83b7\u53d6\u57fa\u51c6\u6d4b\u8bd5\u4ee3\u7801\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"struct-\u57fa\u51c6\u6d4b\u8bd5",children:"Struct \u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.h4,{id:"\u7c7b\u5b57\u6bb5",children:"\u7c7b\u5b57\u6bb5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Struct implements Serializable {\n  public int f1;\n  public long f2;\n  public float f3;\n  public double f4;\n  public int f5;\n  public long f6;\n  public float f7;\n  public double f8;\n  public int f9;\n  public long f10;\n  public float f11;\n  public double f12;\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c",children:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c"}),"\n",(0,i.jsx)(n.p,{children:"\u65e0\u538b\u7f29\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Benchmark repeat number: 400000\nObject type: class org.apache.fory.graalvm.Struct\nCompress number: false\nFory size: 76.0\nJDK size: 178.0\nFory serialization took mills: 49\nJDK serialization took mills: 2254\nCompare speed: Fory is 45.70x speed of JDK\nCompare size: Fory is 0.43x size of JDK\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6570\u5b57\u538b\u7f29\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Benchmark repeat number: 400000\nObject type: class org.apache.fory.graalvm.Struct\nCompress number: true\nFory size: 55.0\nJDK size: 178.0\nFory serialization took mills: 130\nJDK serialization took mills: 3161\nCompare speed: Fory is 24.16x speed of JDK\nCompare size: Fory is 0.31x size of JDK\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pojo-\u57fa\u51c6\u6d4b\u8bd5",children:"Pojo \u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.h4,{id:"\u7c7b\u5b57\u6bb5-1",children:"\u7c7b\u5b57\u6bb5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Foo implements Serializable {\n  int f1;\n  String f2;\n  List<String> f3;\n  Map<String, Long> f4;\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c-1",children:"\u57fa\u51c6\u6d4b\u8bd5\u7ed3\u679c"}),"\n",(0,i.jsx)(n.p,{children:"\u65e0\u538b\u7f29\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Benchmark repeat number: 400000\nObject type: class org.apache.fory.graalvm.Foo\nCompress number: false\nFory size: 541.0\nJDK size: 964.0\nFory serialization took mills: 1663\nJDK serialization took mills: 16266\nCompare speed: Fory is 12.19x speed of JDK\nCompare size: Fory is 0.56x size of JDK\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6570\u5b57\u538b\u7f29\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Benchmark repeat number: 400000\nObject type: class org.apache.fory.graalvm.Foo\nCompress number: true\nFory size: 459.0\nJDK size: 964.0\nFory serialization took mills: 1289\nJDK serialization took mills: 15069\nCompare speed: Fory is 12.11x speed of JDK\nCompare size: Fory is 0.48x size of JDK\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>t,a:()=>a});var i=r(67294);const s={},l=i.createContext(s);function a(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);