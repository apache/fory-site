"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[32942],{19800:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>o});var d=i(85893),l=i(11151);const r={title:"\u5b57\u6bb5\u914d\u7f6e",sidebar_position:5,id:"field_configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},s=void 0,c={id:"guide/python/field_configuration",title:"\u5b57\u6bb5\u914d\u7f6e",description:"\u672c\u9875\u8bf4\u660e\u5982\u4f55\u5728 Python \u4e2d\u914d\u7f6e\u5e8f\u5217\u5316\u5b57\u6bb5\u7ea7\u5143\u4fe1\u606f\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/python/field-configuration.md",sourceDirName:"guide/python",slug:"/guide/python/field_configuration",permalink:"/zh-CN/docs/next/guide/python/field_configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/python/field-configuration.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"\u5b57\u6bb5\u914d\u7f6e",sidebar_position:5,id:"field_configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",permalink:"/zh-CN/docs/next/guide/python/custom_serializers"},next:{title:"Python \u539f\u751f\u6a21\u5f0f",permalink:"/zh-CN/docs/next/guide/python/native_mode"}},t={},o=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u57fa\u672c\u8bed\u6cd5",id:"\u57fa\u672c\u8bed\u6cd5",level:2},{value:"<code>pyfory.field()</code> \u51fd\u6570",id:"pyforyfield-\u51fd\u6570",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u5b57\u6bb5 ID\uff08<code>id</code>\uff09",id:"\u5b57\u6bb5-idid",level:2},{value:"\u53ef\u7a7a\u5b57\u6bb5\uff08<code>nullable</code>\uff09",id:"\u53ef\u7a7a\u5b57\u6bb5nullable",level:2},{value:"\u5f15\u7528\u8ddf\u8e2a\uff08<code>ref</code>\uff09",id:"\u5f15\u7528\u8ddf\u8e2aref",level:2},{value:"\u8df3\u8fc7\u5b57\u6bb5\uff08<code>ignore</code>\uff09",id:"\u8df3\u8fc7\u5b57\u6bb5ignore",level:2},{value:"Dynamic \u5b57\u6bb5\uff08<code>dynamic</code>\uff09",id:"dynamic-\u5b57\u6bb5dynamic",level:2},{value:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3",id:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3",level:2},{value:"\u6709\u7b26\u53f7\u6574\u6570",id:"\u6709\u7b26\u53f7\u6574\u6570",level:3},{value:"\u65e0\u7b26\u53f7\u6574\u6570",id:"\u65e0\u7b26\u53f7\u6574\u6570",level:3},{value:"\u6d6e\u70b9\u6570",id:"\u6d6e\u70b9\u6570",level:3},{value:"\u7f16\u7801\u6c47\u603b",id:"\u7f16\u7801\u6c47\u603b",level:3},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:2},{value:"\u8de8\u8bed\u8a00\u517c\u5bb9",id:"\u8de8\u8bed\u8a00\u517c\u5bb9",level:2},{value:"Schema \u6f14\u8fdb",id:"schema-\u6f14\u8fdb",level:2},{value:"Native \u6a21\u5f0f\u4e0e Xlang \u6a21\u5f0f",id:"native-\u6a21\u5f0f\u4e0e-xlang-\u6a21\u5f0f",level:2},{value:"Native \u6a21\u5f0f\uff08\u4ec5 Python\uff09",id:"native-\u6a21\u5f0f\u4ec5-python",level:3},{value:"Xlang \u6a21\u5f0f\uff08\u8de8\u8bed\u8a00\uff09",id:"xlang-\u6a21\u5f0f\u8de8\u8bed\u8a00",level:3},{value:"\u9ed8\u8ba4\u503c\u6c47\u603b",id:"\u9ed8\u8ba4\u503c\u6c47\u603b",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u9009\u9879\u901f\u67e5",id:"\u9009\u9879\u901f\u67e5",level:2},{value:"\u76f8\u5173\u4e3b\u9898",id:"\u76f8\u5173\u4e3b\u9898",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"\u672c\u9875\u8bf4\u660e\u5982\u4f55\u5728 Python \u4e2d\u914d\u7f6e\u5e8f\u5217\u5316\u5b57\u6bb5\u7ea7\u5143\u4fe1\u606f\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,d.jsx)(n.p,{children:"Apache ForyTM \u901a\u8fc7\u4ee5\u4e0b\u673a\u5236\u63d0\u4f9b\u5b57\u6bb5\u7ea7\u914d\u7f6e\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"pyfory.field()"})}),"\uff1a\u914d\u7f6e\u5b57\u6bb5\u5143\u4fe1\u606f\uff08id\u3001nullable\u3001ref\u3001ignore\u3001dynamic\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u7c7b\u578b\u6ce8\u89e3"}),"\uff1a\u63a7\u5236\u6574\u6570\u7f16\u7801\uff08varint\u3001fixed\u3001tagged\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"Optional[T]"})}),"\uff1a\u6807\u8bb0\u5b57\u6bb5\u53ef\u7a7a"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u8fd9\u4e9b\u80fd\u529b\u53ef\u7528\u4e8e\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Tag ID"}),"\uff1a\u5206\u914d\u7d27\u51d1\u6570\u503c ID\uff0c\u964d\u4f4e struct \u5b57\u6bb5\u5143\u4fe1\u606f\u5f00\u9500"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u53ef\u7a7a\u63a7\u5236"}),"\uff1a\u58f0\u660e\u5b57\u6bb5\u662f\u5426\u53ef\u4e3a null/None"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5f15\u7528\u8ddf\u8e2a"}),"\uff1a\u4e3a\u5171\u4eab\u5bf9\u8c61\u542f\u7528\u5f15\u7528\u8ddf\u8e2a"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5b57\u6bb5\u8df3\u8fc7"}),"\uff1a\u4ece\u5e8f\u5217\u5316\u4e2d\u6392\u9664\u5b57\u6bb5"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u7f16\u7801\u63a7\u5236"}),"\uff1a\u6307\u5b9a\u6574\u6570\u7f16\u7801\u65b9\u5f0f\uff08varint\u3001fixed\u3001tagged\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u591a\u6001\u63a7\u5236"}),"\uff1a\u63a7\u5236 struct \u5b57\u6bb5\u662f\u5426\u5199\u5165\u7c7b\u578b\u4fe1\u606f"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u57fa\u672c\u8bed\u6cd5",children:"\u57fa\u672c\u8bed\u6cd5"}),"\n",(0,d.jsxs)(n.p,{children:["\u7ed3\u5408 ",(0,d.jsx)(n.code,{children:"@dataclass"}),"\u3001\u7c7b\u578b\u6ce8\u89e3\u4e0e ",(0,d.jsx)(n.code,{children:"pyfory.field()"}),"\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"from dataclasses import dataclass\nfrom typing import Optional\nimport pyfory\n\n@dataclass\nclass Person:\n    name: str = pyfory.field(id=0)\n    age: pyfory.int32 = pyfory.field(id=1, default=0)\n    nickname: Optional[str] = pyfory.field(id=2, nullable=True, default=None)\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"pyforyfield-\u51fd\u6570",children:[(0,d.jsx)(n.code,{children:"pyfory.field()"})," \u51fd\u6570"]}),"\n",(0,d.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"pyfory.field()"})," \u914d\u7f6e\u5b57\u6bb5\u7ea7\u5143\u4fe1\u606f\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'@dataclass\nclass User:\n    id: pyfory.int64 = pyfory.field(id=0, default=0)\n    name: str = pyfory.field(id=1, default="")\n    email: Optional[str] = pyfory.field(id=2, nullable=True, default=None)\n    friends: List["User"] = pyfory.field(id=3, ref=True, default_factory=list)\n    _cache: dict = pyfory.field(ignore=True, default_factory=dict)\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u53c2\u6570"}),(0,d.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,d.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,d.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"id"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"int"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-1"})}),(0,d.jsxs)(n.td,{children:["\u5b57\u6bb5 tag ID\uff08",(0,d.jsx)(n.code,{children:"-1"})," \u8868\u793a\u4f7f\u7528\u5b57\u6bb5\u540d\uff09"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"nullable"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})}),(0,d.jsx)(n.td,{children:"\u5b57\u6bb5\u662f\u5426\u53ef\u4e3a null/None"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ref"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})}),(0,d.jsx)(n.td,{children:"\u662f\u5426\u542f\u7528\u5f15\u7528\u8ddf\u8e2a"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ignore"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})}),(0,d.jsx)(n.td,{children:"\u662f\u5426\u4ece\u5e8f\u5217\u5316\u4e2d\u6392\u9664"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"dynamic"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"None"})}),(0,d.jsx)(n.td,{children:"\u63a7\u5236\u662f\u5426\u5199\u5165\u7c7b\u578b\u4fe1\u606f"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"default"})}),(0,d.jsx)(n.td,{children:"Any"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MISSING"})}),(0,d.jsx)(n.td,{children:"\u5b57\u6bb5\u9ed8\u8ba4\u503c"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"default_factory"})}),(0,d.jsx)(n.td,{children:"Callable"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MISSING"})}),(0,d.jsx)(n.td,{children:"\u9ed8\u8ba4\u503c\u5de5\u5382\u51fd\u6570"})]})]})]}),"\n",(0,d.jsxs)(n.h2,{id:"\u5b57\u6bb5-idid",children:["\u5b57\u6bb5 ID\uff08",(0,d.jsx)(n.code,{children:"id"}),"\uff09"]}),"\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7\u7ed9\u5b57\u6bb5\u5206\u914d\u6570\u503c ID\uff0c\u53ef\u51cf\u5c11 struct \u5b57\u6bb5\u5143\u4fe1\u606f\u5f00\u9500\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'@dataclass\nclass User:\n    id: pyfory.int64 = pyfory.field(id=0, default=0)\n    name: str = pyfory.field(id=1, default="")\n    age: pyfory.int32 = pyfory.field(id=2, default=0)\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6536\u76ca\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5e8f\u5217\u5316\u4f53\u79ef\u66f4\u5c0f\uff08\u5143\u4fe1\u606f\u4e2d\u6570\u503c ID \u66ff\u4ee3\u5b57\u6bb5\u540d\uff09"}),"\n",(0,d.jsx)(n.li,{children:"struct \u5b57\u6bb5\u5143\u4fe1\u606f\u5f00\u9500\u66f4\u4f4e"}),"\n",(0,d.jsx)(n.li,{children:"\u5b57\u6bb5\u91cd\u547d\u540d\u65f6\u53ef\u4fdd\u6301\u4e8c\u8fdb\u5236\u517c\u5bb9"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u5efa\u8bae\uff1a"})," \u517c\u5bb9\u6a21\u5f0f\u4e0b\u5efa\u8bae\u914d\u7f6e\u5b57\u6bb5 ID\uff0c\u4ee5\u964d\u4f4e\u5e8f\u5217\u5316\u6210\u672c\u3002"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u540c\u4e00\u7c7b\u5185 ID \u5fc5\u987b\u552f\u4e00"}),"\n",(0,d.jsxs)(n.li,{children:["ID \u5fc5\u987b ",(0,d.jsx)(n.code,{children:">= 0"}),"\uff08",(0,d.jsx)(n.code,{children:"-1"})," \u8868\u793a\u4f7f\u7528\u5b57\u6bb5\u540d\u7f16\u7801\uff0c\u9ed8\u8ba4\u884c\u4e3a\uff09"]}),"\n",(0,d.jsx)(n.li,{children:"\u672a\u6307\u5b9a\u65f6\u4f1a\u4f7f\u7528\u5b57\u6bb5\u540d\u5199\u5165\u5143\u4fe1\u606f\uff08\u5f00\u9500\u66f4\u5927\uff09"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u4e0d\u914d\u7f6e\u5b57\u6bb5 ID"}),"\uff08\u5143\u4fe1\u606f\u4f7f\u7528\u5b57\u6bb5\u540d\uff09\u793a\u4f8b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'@dataclass\nclass User:\n    id: pyfory.int64 = 0\n    name: str = ""\n'})}),"\n",(0,d.jsxs)(n.h2,{id:"\u53ef\u7a7a\u5b57\u6bb5nullable",children:["\u53ef\u7a7a\u5b57\u6bb5\uff08",(0,d.jsx)(n.code,{children:"nullable"}),"\uff09"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5bf9\u53ef\u80fd\u4e3a ",(0,d.jsx)(n.code,{children:"None"})," \u7684\u5b57\u6bb5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"nullable=True"}),"\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"from typing import Optional\n\n@dataclass\nclass Record:\n    # \u53ef\u7a7a\u5b57\u7b26\u4e32\u5b57\u6bb5\n    optional_name: Optional[str] = pyfory.field(id=0, nullable=True, default=None)\n\n    # \u53ef\u7a7a\u6574\u6570\u5b57\u6bb5\n    optional_count: Optional[pyfory.int32] = pyfory.field(id=1, nullable=True, default=None)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Optional[T]"})," \u5b57\u6bb5\u5e94\u914d\u5408 ",(0,d.jsx)(n.code,{children:"nullable=True"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u975e Optional \u5b57\u6bb5\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"nullable=False"})]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"\u5f15\u7528\u8ddf\u8e2aref",children:["\u5f15\u7528\u8ddf\u8e2a\uff08",(0,d.jsx)(n.code,{children:"ref"}),"\uff09"]}),"\n",(0,d.jsx)(n.p,{children:"\u5bf9\u4e8e\u53ef\u80fd\u5171\u4eab\u6216\u5faa\u73af\u5f15\u7528\u7684\u5b57\u6bb5\u542f\u7528\u5f15\u7528\u8ddf\u8e2a\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'@dataclass\nclass RefOuter:\n    # \u4e24\u4e2a\u5b57\u6bb5\u53ef\u80fd\u6307\u5411\u540c\u4e00\u4e2a\u5185\u90e8\u5bf9\u8c61\n    inner1: Optional[RefInner] = pyfory.field(id=0, ref=True, nullable=True, default=None)\n    inner2: Optional[RefInner] = pyfory.field(id=1, ref=True, nullable=True, default=None)\n\n\n@dataclass\nclass CircularRef:\n    name: str = pyfory.field(id=0, default="")\n    # \u81ea\u5f15\u7528\u5b57\u6bb5\uff0c\u7528\u4e8e\u5faa\u73af\u5f15\u7528\n    self_ref: Optional["CircularRef"] = pyfory.field(id=1, ref=True, nullable=True, default=None)\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u9002\u7528\u573a\u666f\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5b57\u6bb5\u53ef\u80fd\u5f62\u6210\u5faa\u73af\u6216\u5171\u4eab\u5173\u7cfb"}),"\n",(0,d.jsx)(n.li,{children:"\u540c\u4e00\u5bf9\u8c61\u88ab\u591a\u4e2a\u5b57\u6bb5\u5f15\u7528"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u53ea\u6709\u5168\u5c40\u8bbe\u7f6e ",(0,d.jsx)(n.code,{children:"Fory(ref=True)"})," \u65f6\uff0c\u5f15\u7528\u8ddf\u8e2a\u624d\u751f\u6548"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5b57\u6bb5\u7ea7 ",(0,d.jsx)(n.code,{children:"ref=True"})," \u4e0e\u5168\u5c40 ",(0,d.jsx)(n.code,{children:"ref=True"})," \u5fc5\u987b\u540c\u65f6\u5f00\u542f"]}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"\u8df3\u8fc7\u5b57\u6bb5ignore",children:["\u8df3\u8fc7\u5b57\u6bb5\uff08",(0,d.jsx)(n.code,{children:"ignore"}),"\uff09"]}),"\n",(0,d.jsx)(n.p,{children:"\u5c06\u5b57\u6bb5\u6392\u9664\u5728\u5e8f\u5217\u5316\u4e4b\u5916\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'@dataclass\nclass User:\n    id: pyfory.int64 = pyfory.field(id=0, default=0)\n    name: str = pyfory.field(id=1, default="")\n    # \u4e0d\u5e8f\u5217\u5316\n    _cache: dict = pyfory.field(ignore=True, default_factory=dict)\n    _internal_state: str = pyfory.field(ignore=True, default="")\n'})}),"\n",(0,d.jsxs)(n.h2,{id:"dynamic-\u5b57\u6bb5dynamic",children:["Dynamic \u5b57\u6bb5\uff08",(0,d.jsx)(n.code,{children:"dynamic"}),"\uff09"]}),"\n",(0,d.jsx)(n.p,{children:"\u63a7\u5236 struct \u5b57\u6bb5\u662f\u5426\u5199\u5165\u7c7b\u578b\u4fe1\u606f\uff0c\u8fd9\u662f\u652f\u6301\u591a\u6001\u7684\u5173\u952e\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"from abc import ABC, abstractmethod\n\nclass Shape(ABC):\n    @abstractmethod\n    def area(self) -> float:\n        pass\n\n@dataclass\nclass Circle(Shape):\n    radius: float = 0.0\n\n    def area(self) -> float:\n        return 3.14159 * self.radius * self.radius\n\n@dataclass\nclass Container:\n    # \u62bd\u8c61\u7c7b\uff1adynamic \u603b\u4e3a True\uff08\u5199\u7c7b\u578b\u4fe1\u606f\uff09\n    shape: Shape = pyfory.field(id=0)\n\n    # \u5bf9\u5177\u4f53\u7c7b\u578b\u5f3a\u5236\u5199\u7c7b\u578b\u4fe1\u606f\uff08\u652f\u6301\u8fd0\u884c\u65f6\u5b50\u7c7b\uff09\n    circle: Circle = pyfory.field(id=1, dynamic=True)\n\n    # \u5bf9\u5177\u4f53\u7c7b\u578b\u8df3\u8fc7\u7c7b\u578b\u4fe1\u606f\uff08\u6309\u58f0\u660e\u7c7b\u578b\u5904\u7406\uff09\n    fixed_circle: Circle = pyfory.field(id=2, dynamic=False)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u9ed8\u8ba4\u884c\u4e3a\uff1a"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u6a21\u5f0f"}),(0,d.jsx)(n.th,{children:"\u62bd\u8c61\u7c7b"}),(0,d.jsx)(n.th,{children:"\u5177\u4f53\u5bf9\u8c61\u7c7b\u578b"}),(0,d.jsx)(n.th,{children:"\u6570\u503c/str/time \u7c7b\u578b"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Native \u6a21\u5f0f"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"True"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"True"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Xlang \u6a21\u5f0f"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"True"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u62bd\u8c61\u7c7b"}),"\uff1a",(0,d.jsx)(n.code,{children:"dynamic"})," \u59cb\u7ec8\u4e3a ",(0,d.jsx)(n.code,{children:"True"}),"\uff08\u5fc5\u987b\u5199\u7c7b\u578b\u4fe1\u606f\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Native \u6a21\u5f0f"}),"\uff1a\u5bf9\u8c61\u7c7b\u578b\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"dynamic=True"}),"\uff1b\u6570\u503c/str/time \u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"False"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Xlang \u6a21\u5f0f"}),"\uff1a\u5177\u4f53\u7c7b\u578b\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"dynamic=False"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u5f53\u5177\u4f53\u5b57\u6bb5\u53ef\u80fd\u6301\u6709\u5b50\u7c7b\u5b9e\u4f8b\u65f6\uff0c\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"dynamic=True"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u5f53\u7c7b\u578b\u56fa\u5b9a\u4e14\u8ffd\u6c42\u6027\u80fd\u65f6\uff0c\u53ef\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"dynamic=False"})]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3",children:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3"}),"\n",(0,d.jsx)(n.p,{children:"Fory \u63d0\u4f9b\u7c7b\u578b\u6ce8\u89e3\u6765\u63a7\u5236\u6574\u6570\u7f16\u7801\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u6709\u7b26\u53f7\u6574\u6570",children:"\u6709\u7b26\u53f7\u6574\u6570"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass SignedIntegers:\n    byte_val: pyfory.int8 = 0      # 8-bit signed\n    short_val: pyfory.int16 = 0    # 16-bit signed\n    int_val: pyfory.int32 = 0      # 32-bit signed (varint encoding)\n    long_val: pyfory.int64 = 0     # 64-bit signed (varint encoding)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u65e0\u7b26\u53f7\u6574\u6570",children:"\u65e0\u7b26\u53f7\u6574\u6570"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass UnsignedIntegers:\n    # Fixed-size encoding\n    u8_val: pyfory.uint8 = 0       # 8-bit unsigned (fixed)\n    u16_val: pyfory.uint16 = 0     # 16-bit unsigned (fixed)\n\n    # Variable-length encoding (default for u32/u64)\n    u32_var: pyfory.uint32 = 0     # 32-bit unsigned (varint)\n    u64_var: pyfory.uint64 = 0     # 64-bit unsigned (varint)\n\n    # Explicit fixed-size encoding\n    u32_fixed: pyfory.fixed_uint32 = 0   # 32-bit unsigned (fixed 4 bytes)\n    u64_fixed: pyfory.fixed_uint64 = 0   # 64-bit unsigned (fixed 8 bytes)\n\n    # Tagged encoding (includes type tag)\n    u64_tagged: pyfory.tagged_uint64 = 0  # 64-bit unsigned (tagged)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u6d6e\u70b9\u6570",children:"\u6d6e\u70b9\u6570"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass FloatingPoint:\n    float_val: pyfory.float32 = 0.0   # 32-bit float\n    double_val: pyfory.float64 = 0.0  # 64-bit double\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u7f16\u7801\u6c47\u603b",children:"\u7f16\u7801\u6c47\u603b"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,d.jsx)(n.th,{children:"\u7f16\u7801"}),(0,d.jsx)(n.th,{children:"\u5927\u5c0f"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.int8"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"1 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.int16"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"2 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.int32"})}),(0,d.jsx)(n.td,{children:"varint"}),(0,d.jsx)(n.td,{children:"1-5 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.int64"})}),(0,d.jsx)(n.td,{children:"varint"}),(0,d.jsx)(n.td,{children:"1-10 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.uint8"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"1 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.uint16"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"2 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.uint32"})}),(0,d.jsx)(n.td,{children:"varint"}),(0,d.jsx)(n.td,{children:"1-5 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.uint64"})}),(0,d.jsx)(n.td,{children:"varint"}),(0,d.jsx)(n.td,{children:"1-10 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.fixed_uint32"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"4 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.fixed_uint64"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"8 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.tagged_uint64"})}),(0,d.jsx)(n.td,{children:"tagged"}),(0,d.jsx)(n.td,{children:"1-9 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.float32"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"4 \u5b57\u8282"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.float64"})}),(0,d.jsx)(n.td,{children:"fixed"}),(0,d.jsx)(n.td,{children:"8 \u5b57\u8282"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u4f55\u65f6\u4f7f\u7528\uff1a"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"varint"}),"\uff1a\u9002\u5408\u5c0f\u503c\u5360\u591a\u6570\u7684\u573a\u666f\uff08int32/int64/uint32/uint64 \u9ed8\u8ba4\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"fixed"}),"\uff1a\u9002\u5408\u8986\u76d6\u5168\u503c\u57df\u7684\u573a\u666f\uff08\u4f8b\u5982\u65f6\u95f4\u6233\u3001\u54c8\u5e0c\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"tagged"}),"\uff1a\u9002\u5408\u9700\u8981\u4fdd\u7559\u7c7b\u578b\u4fe1\u606f\u7684\u573a\u666f\uff08\u4ec5 uint64\uff09"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'from dataclasses import dataclass\nfrom typing import Optional, List, Dict, Set\nimport pyfory\n\n\n@dataclass\nclass Document:\n    # Fields with tag IDs (recommended for compatible mode)\n    title: str = pyfory.field(id=0, default="")\n    version: pyfory.int32 = pyfory.field(id=1, default=0)\n\n    # Nullable field\n    description: Optional[str] = pyfory.field(id=2, nullable=True, default=None)\n\n    # Collection fields\n    tags: List[str] = pyfory.field(id=3, default_factory=list)\n    metadata: Dict[str, str] = pyfory.field(id=4, default_factory=dict)\n    categories: Set[str] = pyfory.field(id=5, default_factory=set)\n\n    # Unsigned integers with different encodings\n    view_count: pyfory.uint64 = pyfory.field(id=6, default=0)           # varint encoding\n    file_size: pyfory.fixed_uint64 = pyfory.field(id=7, default=0)      # fixed encoding\n    checksum: pyfory.tagged_uint64 = pyfory.field(id=8, default=0)      # tagged encoding\n\n    # Reference-tracked field for shared/circular references\n    parent: Optional["Document"] = pyfory.field(id=9, ref=True, nullable=True, default=None)\n\n    # Ignored field (not serialized)\n    _cache: dict = pyfory.field(ignore=True, default_factory=dict)\n\n\ndef main():\n    fory = pyfory.Fory(xlang=True, compatible=True, ref=True)\n    fory.register_type(Document, type_id=100)\n\n    doc = Document(\n        title="My Document",\n        version=1,\n        description="A sample document",\n        tags=["tag1", "tag2"],\n        metadata={"key": "value"},\n        categories={"cat1"},\n        view_count=42,\n        file_size=1024,\n        checksum=123456789,\n        parent=None,\n    )\n\n    # Serialize\n    data = fory.serialize(doc)\n\n    # Deserialize\n    decoded = fory.deserialize(data)\n    assert decoded.title == doc.title\n    assert decoded.version == doc.version\n\n\nif __name__ == "__main__":\n    main()\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u8de8\u8bed\u8a00\u517c\u5bb9",children:"\u8de8\u8bed\u8a00\u517c\u5bb9"}),"\n",(0,d.jsx)(n.p,{children:"\u5f53\u5e8f\u5217\u5316\u6570\u636e\u5c06\u88ab\u5176\u4ed6\u8bed\u8a00\uff08Java\u3001Rust\u3001C++\u3001Go\uff09\u8bfb\u53d6\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u5b57\u6bb5 ID \u5e76\u914d\u5957\u7c7b\u578b\u6ce8\u89e3\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"@dataclass\nclass CrossLangData:\n    # Use field IDs for cross-language compatibility\n    int_var: pyfory.int32 = pyfory.field(id=0, default=0)\n    long_fixed: pyfory.fixed_uint64 = pyfory.field(id=1, default=0)\n    long_tagged: pyfory.tagged_uint64 = pyfory.field(id=2, default=0)\n    optional_value: Optional[str] = pyfory.field(id=3, nullable=True, default=None)\n"})}),"\n",(0,d.jsx)(n.h2,{id:"schema-\u6f14\u8fdb",children:"Schema \u6f14\u8fdb"}),"\n",(0,d.jsx)(n.p,{children:"\u517c\u5bb9\u6a21\u5f0f\u652f\u6301 Schema \u6f14\u8fdb\u3002\u5efa\u8bae\u901a\u8fc7\u5b57\u6bb5 ID \u964d\u4f4e\u5e8f\u5217\u5316\u6210\u672c\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'# Version 1\n@dataclass\nclass DataV1:\n    id: pyfory.int64 = pyfory.field(id=0, default=0)\n    name: str = pyfory.field(id=1, default="")\n\n\n# Version 2: Added new field\n@dataclass\nclass DataV2:\n    id: pyfory.int64 = pyfory.field(id=0, default=0)\n    name: str = pyfory.field(id=1, default="")\n    email: Optional[str] = pyfory.field(id=2, nullable=True, default=None)  # New field\n'})}),"\n",(0,d.jsxs)(n.p,{children:["V1 \u5199\u51fa\u7684\u6570\u636e\u53ef\u7531 V2 \u8bfb\u53d6\uff08\u65b0\u589e\u5b57\u6bb5\u5c06\u4e3a ",(0,d.jsx)(n.code,{children:"None"}),"\uff09\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u4e0d\u914d\u7f6e\u5b57\u6bb5 ID\uff08\u6b64\u65f6\u5143\u4fe1\u606f\u4f7f\u7528\u5b57\u6bb5\u540d\uff0c\u5f00\u9500\u66f4\u5927\uff09\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'@dataclass\nclass Data:\n    id: pyfory.int64 = 0\n    name: str = ""\n'})}),"\n",(0,d.jsx)(n.h2,{id:"native-\u6a21\u5f0f\u4e0e-xlang-\u6a21\u5f0f",children:"Native \u6a21\u5f0f\u4e0e Xlang \u6a21\u5f0f"}),"\n",(0,d.jsx)(n.p,{children:"\u5b57\u6bb5\u914d\u7f6e\u4f1a\u968f\u5e8f\u5217\u5316\u6a21\u5f0f\u4e0d\u540c\u800c\u53d8\u5316\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"native-\u6a21\u5f0f\u4ec5-python",children:"Native \u6a21\u5f0f\uff08\u4ec5 Python\uff09"}),"\n",(0,d.jsx)(n.p,{children:"Native \u6a21\u5f0f\u9ed8\u8ba4\u503c\u66f4\u5bbd\u677e\uff0c\u4ee5\u83b7\u5f97\u66f4\u9ad8\u517c\u5bb9\u6027\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Nullable"}),"\uff1a",(0,d.jsx)(n.code,{children:"str"})," \u548c\u6570\u503c\u7c7b\u578b\u9ed8\u8ba4\u4e0d\u53ef\u7a7a\uff0c\u9664\u975e\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"Optional"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Ref tracking"}),"\uff1a\u5bf9\u8c61\u5f15\u7528\u9ed8\u8ba4\u5f00\u542f\uff08",(0,d.jsx)(n.code,{children:"str"})," \u4e0e\u6570\u503c\u7c7b\u578b\u9664\u5916\uff09"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5728 Native \u6a21\u5f0f\u4e2d\uff0c\u901a\u5e38",(0,d.jsx)(n.strong,{children:"\u4e0d\u9700\u8981\u663e\u5f0f\u5b57\u6bb5\u914d\u7f6e"}),"\uff0c\u9664\u975e\u4f60\u5e0c\u671b\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u901a\u8fc7\u5b57\u6bb5 ID \u964d\u4f4e\u5e8f\u5217\u5316\u4f53\u79ef"}),"\n",(0,d.jsx)(n.li,{children:"\u5173\u95ed\u4e0d\u5fc5\u8981\u7684 ref \u8ddf\u8e2a\u4ee5\u4f18\u5316\u6027\u80fd"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'# Native mode: works without field configuration\n@dataclass\nclass User:\n    id: int = 0\n    name: str = ""\n    tags: List[str] = None\n'})}),"\n",(0,d.jsx)(n.h3,{id:"xlang-\u6a21\u5f0f\u8de8\u8bed\u8a00",children:"Xlang \u6a21\u5f0f\uff08\u8de8\u8bed\u8a00\uff09"}),"\n",(0,d.jsx)(n.p,{children:"\u7531\u4e8e\u8bed\u8a00\u95f4\u7c7b\u578b\u7cfb\u7edf\u5dee\u5f02\uff0cXlang \u6a21\u5f0f\u9ed8\u8ba4\u503c\u66f4\u4e25\u683c\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Nullable"}),"\uff1a\u9ed8\u8ba4\u4e0d\u53ef\u7a7a\uff08",(0,d.jsx)(n.code,{children:"nullable=False"}),"\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Ref tracking"}),"\uff1a\u9ed8\u8ba4\u5173\u95ed\uff08",(0,d.jsx)(n.code,{children:"ref=False"}),"\uff09"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u5728 Xlang \u6a21\u5f0f\u4e2d\uff0c\u4ee5\u4e0b\u60c5\u51b5\u9700\u8981\u663e\u5f0f\u914d\u7f6e\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5b57\u6bb5\u53ef\u80fd\u4e3a None\uff08",(0,d.jsx)(n.code,{children:"Optional[T]"})," + ",(0,d.jsx)(n.code,{children:"nullable=True"}),"\uff09"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5b57\u6bb5\u9700\u8981\u5171\u4eab/\u5faa\u73af\u5f15\u7528\u8bed\u4e49\uff08",(0,d.jsx)(n.code,{children:"ref=True"}),"\uff09"]}),"\n",(0,d.jsx)(n.li,{children:"\u6574\u6570\u7c7b\u578b\u9700\u8981\u6307\u5b9a\u8de8\u8bed\u8a00\u7f16\u7801"}),"\n",(0,d.jsx)(n.li,{children:"\u9700\u8981\u51cf\u5c11\u5143\u4fe1\u606f\u5f00\u9500\uff08\u5b57\u6bb5 ID\uff09"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'# Xlang mode: explicit configuration required for nullable/ref fields\n@dataclass\nclass User:\n    id: pyfory.int64 = pyfory.field(id=0, default=0)\n    name: str = pyfory.field(id=1, default="")\n    email: Optional[str] = pyfory.field(id=2, nullable=True, default=None)  # Must declare nullable\n    friend: Optional["User"] = pyfory.field(id=3, ref=True, nullable=True, default=None)  # Must declare ref\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u9ed8\u8ba4\u503c\u6c47\u603b",children:"\u9ed8\u8ba4\u503c\u6c47\u603b"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u9009\u9879"}),(0,d.jsx)(n.th,{children:"Native \u6a21\u5f0f\u9ed8\u8ba4\u503c"}),(0,d.jsx)(n.th,{children:"Xlang \u6a21\u5f0f\u9ed8\u8ba4\u503c"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"nullable"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"str"}),"/\u6570\u503c\u7c7b\u578b\u4e3a ",(0,d.jsx)(n.code,{children:"False"}),"\uff0c\u5176\u4f59\u5bf9\u8c61\u901a\u5e38\u53ef\u7a7a"]}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ref"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"True"}),"\uff08",(0,d.jsx)(n.code,{children:"str"})," \u548c\u6570\u503c\u7c7b\u578b\u9664\u5916\uff09"]}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"False"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"dynamic"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"True"}),"\uff08\u6570\u503c/str/time \u7c7b\u578b\u9664\u5916\uff09"]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"False"}),"\uff08\u5177\u4f53\u7c7b\u578b\uff09"]})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u914d\u7f6e\u5b57\u6bb5 ID"}),"\uff1a\u517c\u5bb9\u6a21\u5f0f\u4e0b\u5efa\u8bae\u914d\u7f6e\uff0c\u964d\u4f4e\u5e8f\u5217\u5316\u6210\u672c"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsxs)(n.strong,{children:[(0,d.jsx)(n.code,{children:"Optional[T]"})," \u914d\u5408 ",(0,d.jsx)(n.code,{children:"nullable=True"})]}),"\uff1axlang \u4e0b\u53ef\u7a7a\u5b57\u6bb5\u9700\u8981\u663e\u5f0f\u58f0\u660e"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5171\u4eab\u5bf9\u8c61\u542f\u7528 ref"}),"\uff1a\u5171\u4eab\u6216\u5faa\u73af\u5173\u7cfb\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"ref=True"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsxs)(n.strong,{children:["\u654f\u611f\u5b57\u6bb5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"ignore=True"})]}),"\uff1a\u4f8b\u5982\u5bc6\u7801\u3001\u4ee4\u724c\u3001\u5185\u90e8\u72b6\u6001"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u9009\u62e9\u5408\u9002\u7f16\u7801"}),"\uff1a\u5c0f\u503c\u7528 ",(0,d.jsx)(n.code,{children:"varint"}),"\uff0c\u5168\u8303\u56f4\u503c\u7528 ",(0,d.jsx)(n.code,{children:"fixed"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u4fdd\u6301 ID \u7a33\u5b9a"}),"\uff1a\u5206\u914d\u540e\u4e0d\u8981\u66f4\u6539\u5b57\u6bb5 ID"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u9009\u9879\u901f\u67e5",children:"\u9009\u9879\u901f\u67e5"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u914d\u7f6e"}),(0,d.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.field(id=N)"})}),(0,d.jsx)(n.td,{children:"\u5b57\u6bb5 tag ID\uff0c\u51cf\u5c11\u5143\u4fe1\u606f\u5f00\u9500"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.field(nullable=True)"})}),(0,d.jsx)(n.td,{children:"\u6807\u8bb0\u5b57\u6bb5\u53ef\u7a7a"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.field(ref=True)"})}),(0,d.jsx)(n.td,{children:"\u542f\u7528\u5f15\u7528\u8ddf\u8e2a"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.field(ignore=True)"})}),(0,d.jsx)(n.td,{children:"\u5c06\u5b57\u6bb5\u6392\u9664\u5728\u5e8f\u5217\u5316\u4e4b\u5916"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.field(dynamic=True)"})}),(0,d.jsx)(n.td,{children:"\u5f3a\u5236\u5199\u5165\u7c7b\u578b\u4fe1\u606f"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.field(dynamic=False)"})}),(0,d.jsx)(n.td,{children:"\u8df3\u8fc7\u7c7b\u578b\u4fe1\u606f\uff08\u6309\u58f0\u660e\u7c7b\u578b\u5904\u7406\uff09"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Optional[T]"})}),(0,d.jsx)(n.td,{children:"\u53ef\u7a7a\u5b57\u6bb5\u7c7b\u578b\u63d0\u793a"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"pyfory.int32"}),", ",(0,d.jsx)(n.code,{children:"pyfory.int64"})]}),(0,d.jsx)(n.td,{children:"\u6709\u7b26\u53f7\u6574\u6570\uff08varint \u7f16\u7801\uff09"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"pyfory.uint32"}),", ",(0,d.jsx)(n.code,{children:"pyfory.uint64"})]}),(0,d.jsx)(n.td,{children:"\u65e0\u7b26\u53f7\u6574\u6570\uff08varint \u7f16\u7801\uff09"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"pyfory.fixed_uint32"}),", ",(0,d.jsx)(n.code,{children:"pyfory.fixed_uint64"})]}),(0,d.jsx)(n.td,{children:"\u5b9a\u957f\u65e0\u7b26\u53f7\u6574\u6570"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pyfory.tagged_uint64"})}),(0,d.jsx)(n.td,{children:"uint64 \u7684 tagged \u7f16\u7801"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"\u76f8\u5173\u4e3b\u9898",children:"\u76f8\u5173\u4e3b\u9898"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"basic_serialization",children:"\u57fa\u7840\u5e8f\u5217\u5316"})," - \u5feb\u901f\u4e0a\u624b Fory \u5e8f\u5217\u5316"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"schema_evolution",children:"Schema \u6f14\u8fdb"})," - \u517c\u5bb9\u6a21\u5f0f\u4e0e schema \u6f14\u8fdb"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"cross_language",children:"\u8de8\u8bed\u8a00"})," - \u4e0e Java\u3001Rust\u3001C++\u3001Go \u4e92\u64cd\u4f5c"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>s});var d=i(67294);const l={},r=d.createContext(l);function s(e){const n=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);