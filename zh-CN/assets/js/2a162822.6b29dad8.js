"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[98393],{99014:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var r=i(85893),s=i(11151);const l={title:"\u914d\u7f6e",sidebar_position:10,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},t=void 0,d={id:"guide/go/configuration",title:"\u914d\u7f6e",description:"Fory Go \u4f7f\u7528\u51fd\u6570\u5f0f\u9009\u9879\u6a21\u5f0f\u8fdb\u884c\u914d\u7f6e\u3002\u4f60\u53ef\u4ee5\u5728\u4fdd\u6301\u5408\u7406\u9ed8\u8ba4\u503c\u7684\u524d\u63d0\u4e0b\uff0c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u884c\u4e3a\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.15/guide/go/configuration.md",sourceDirName:"guide/go",slug:"/guide/go/configuration",permalink:"/zh-CN/docs/guide/go/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.15/guide/go/configuration.md",tags:[],version:"0.15",sidebarPosition:10,frontMatter:{title:"\u914d\u7f6e",sidebar_position:10,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Go \u5e8f\u5217\u5316\u6307\u5357",permalink:"/zh-CN/docs/guide/go/"},next:{title:"\u57fa\u672c\u5e8f\u5217\u5316",permalink:"/zh-CN/docs/guide/go/basic_serialization"}},a={},c=[{value:"\u521b\u5efa Fory \u5b9e\u4f8b",id:"\u521b\u5efa-fory-\u5b9e\u4f8b",level:2},{value:"\u9ed8\u8ba4\u914d\u7f6e",id:"\u9ed8\u8ba4\u914d\u7f6e",level:3},{value:"\u901a\u8fc7\u9009\u9879\u914d\u7f6e",id:"\u901a\u8fc7\u9009\u9879\u914d\u7f6e",level:3},{value:"\u914d\u7f6e\u9879",id:"\u914d\u7f6e\u9879",level:2},{value:"WithTrackRef",id:"withtrackref",level:3},{value:"WithCompatible",id:"withcompatible",level:3},{value:"WithMaxDepth",id:"withmaxdepth",level:3},{value:"WithXlang",id:"withxlang",level:3},{value:"\u7ebf\u7a0b\u5b89\u5168",id:"\u7ebf\u7a0b\u5b89\u5168",level:2},{value:"\u5168\u5c40\u7ebf\u7a0b\u5b89\u5168\u5b9e\u4f8b",id:"\u5168\u5c40\u7ebf\u7a0b\u5b89\u5168\u5b9e\u4f8b",level:3},{value:"\u7f13\u51b2\u533a\u7ba1\u7406",id:"\u7f13\u51b2\u533a\u7ba1\u7406",level:2},{value:"\u96f6\u62f7\u8d1d\u884c\u4e3a",id:"\u96f6\u62f7\u8d1d\u884c\u4e3a",level:3},{value:"\u624b\u52a8\u63a7\u5236\u7f13\u51b2\u533a",id:"\u624b\u52a8\u63a7\u5236\u7f13\u51b2\u533a",level:3},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b",level:2},{value:"\u7b80\u5355\u6570\u636e\uff08\u9ed8\u8ba4\u914d\u7f6e\uff09",id:"\u7b80\u5355\u6570\u636e\u9ed8\u8ba4\u914d\u7f6e",level:3},{value:"\u56fe\u7ed3\u6784\u6570\u636e",id:"\u56fe\u7ed3\u6784\u6570\u636e",level:3},{value:"Schema \u6f14\u8fdb",id:"schema-\u6f14\u8fdb",level:3},{value:"\u9ad8\u6027\u80fd\u5e76\u53d1\u573a\u666f",id:"\u9ad8\u6027\u80fd\u5e76\u53d1\u573a\u666f",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u76f8\u5173\u4e3b\u9898",id:"\u76f8\u5173\u4e3b\u9898",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Fory Go \u4f7f\u7528\u51fd\u6570\u5f0f\u9009\u9879\u6a21\u5f0f\u8fdb\u884c\u914d\u7f6e\u3002\u4f60\u53ef\u4ee5\u5728\u4fdd\u6301\u5408\u7406\u9ed8\u8ba4\u503c\u7684\u524d\u63d0\u4e0b\uff0c\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u884c\u4e3a\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u521b\u5efa-fory-\u5b9e\u4f8b",children:"\u521b\u5efa Fory \u5b9e\u4f8b"}),"\n",(0,r.jsx)(n.h3,{id:"\u9ed8\u8ba4\u914d\u7f6e",children:"\u9ed8\u8ba4\u914d\u7f6e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'import "github.com/apache/fory/go/fory"\n\nf := fory.New()\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u9ed8\u8ba4\u8bbe\u7f6e\uff1a"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"TrackRef"}),(0,r.jsx)(n.td,{children:"false"}),(0,r.jsx)(n.td,{children:"\u5173\u95ed\u5f15\u7528\u8ddf\u8e2a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"MaxDepth"}),(0,r.jsx)(n.td,{children:"20"}),(0,r.jsx)(n.td,{children:"\u6700\u5927\u5d4c\u5957\u6df1\u5ea6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"IsXlang"}),(0,r.jsx)(n.td,{children:"false"}),(0,r.jsx)(n.td,{children:"\u5173\u95ed\u8de8\u8bed\u8a00\u6a21\u5f0f"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Compatible"}),(0,r.jsx)(n.td,{children:"false"}),(0,r.jsx)(n.td,{children:"\u5173\u95ed Schema \u6f14\u8fdb\u517c\u5bb9\u6a21\u5f0f"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u901a\u8fc7\u9009\u9879\u914d\u7f6e",children:"\u901a\u8fc7\u9009\u9879\u914d\u7f6e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New(\n    fory.WithTrackRef(true),\n    fory.WithCompatible(true),\n    fory.WithMaxDepth(10),\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u914d\u7f6e\u9879",children:"\u914d\u7f6e\u9879"}),"\n",(0,r.jsx)(n.h3,{id:"withtrackref",children:"WithTrackRef"}),"\n",(0,r.jsx)(n.p,{children:"\u542f\u7528\u5f15\u7528\u8ddf\u8e2a\uff0c\u4ee5\u652f\u6301\u5faa\u73af\u5f15\u7528\u548c\u5171\u4eab\u5bf9\u8c61\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New(fory.WithTrackRef(true))\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5f00\u542f\u540e\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u591a\u6b21\u51fa\u73b0\u7684\u540c\u4e00\u5bf9\u8c61\u53ea\u4f1a\u5e8f\u5217\u5316\u4e00\u6b21"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u6b63\u786e\u5904\u7406\u5faa\u73af\u5f15\u7528"}),"\n",(0,r.jsxs)(n.li,{children:["\u5b57\u6bb5\u7ea7 ",(0,r.jsx)(n.code,{children:'fory:"ref"'})," \u6807\u7b7e\u751f\u6548"]}),"\n",(0,r.jsx)(n.li,{children:"\u4f1a\u5e26\u6765\u5bf9\u8c61\u8eab\u4efd\u8ddf\u8e2a\u5f00\u9500"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u95ed\uff08\u9ed8\u8ba4\uff09\u65f6\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6bcf\u6b21\u5bf9\u8c61\u51fa\u73b0\u90fd\u72ec\u7acb\u5e8f\u5217\u5316"}),"\n",(0,r.jsx)(n.li,{children:"\u5faa\u73af\u5f15\u7528\u4f1a\u5bfc\u81f4\u6808\u6ea2\u51fa\u6216\u8d85\u51fa\u6700\u5927\u6df1\u5ea6\u9519\u8bef"}),"\n",(0,r.jsxs)(n.li,{children:["\u5b57\u6bb5\u7ea7 ",(0,r.jsx)(n.code,{children:'fory:"ref"'})," \u6807\u7b7e\u88ab\u5ffd\u7565"]}),"\n",(0,r.jsx)(n.li,{children:"\u5bf9\u7b80\u5355\u6570\u636e\u7ed3\u6784\u6027\u80fd\u66f4\u597d"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5efa\u8bae\u542f\u7528\u573a\u666f\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6570\u636e\u4e2d\u5b58\u5728\u5faa\u73af\u5f15\u7528"}),"\n",(0,r.jsx)(n.li,{children:"\u540c\u4e00\u5bf9\u8c61\u88ab\u591a\u5904\u5f15\u7528"}),"\n",(0,r.jsx)(n.li,{children:"\u9700\u8981\u5e8f\u5217\u5316\u56fe\u7ed3\u6784\uff08\u5982\u5e26\u7236\u6307\u9488\u7684\u6811\u3001\u5e26\u73af\u94fe\u8868\uff09"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8be6\u89c1 ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/references",children:"\u5f15\u7528"}),"\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"withcompatible",children:"WithCompatible"}),"\n",(0,r.jsx)(n.p,{children:"\u542f\u7528 schema \u6f14\u8fdb\u517c\u5bb9\u6a21\u5f0f\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New(fory.WithCompatible(true))\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5f00\u542f\u540e\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f1a\u5411\u5e8f\u5217\u5316\u6570\u636e\u5199\u5165\u7c7b\u578b\u5143\u4fe1\u606f"}),"\n",(0,r.jsx)(n.li,{children:"\u652f\u6301\u7248\u672c\u95f4\u65b0\u589e/\u5220\u9664\u5b57\u6bb5"}),"\n",(0,r.jsx)(n.li,{children:"\u6309\u5b57\u6bb5\u540d\u6216\u5b57\u6bb5 ID \u5339\u914d\uff08\u4e0e\u987a\u5e8f\u65e0\u5173\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u56e0\u5143\u4fe1\u606f\u5bfc\u81f4\u8f93\u51fa\u66f4\u5927"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u95ed\uff08\u9ed8\u8ba4\uff09\u65f6\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4e0d\u5199\u5b57\u6bb5\u5143\u4fe1\u606f\uff0c\u5e8f\u5217\u5316\u66f4\u7d27\u51d1"}),"\n",(0,r.jsx)(n.li,{children:"\u5e8f\u5217\u5316\u66f4\u5feb\u3001\u8f93\u51fa\u66f4\u5c0f"}),"\n",(0,r.jsx)(n.li,{children:"\u5b57\u6bb5\u6309\u6392\u5e8f\u987a\u5e8f\u5339\u914d"}),"\n",(0,r.jsx)(n.li,{children:"\u8981\u6c42\u5404\u670d\u52a1\u95f4\u7ed3\u6784\u4f53\u5b9a\u4e49\u4fdd\u6301\u4e00\u81f4"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8be6\u89c1 ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/schema_evolution",children:"Schema \u6f14\u8fdb"}),"\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"withmaxdepth",children:"WithMaxDepth"}),"\n",(0,r.jsx)(n.p,{children:"\u8bbe\u7f6e\u6700\u5927\u5d4c\u5957\u6df1\u5ea6\uff0c\u9632\u6b62\u6808\u6ea2\u51fa\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New(fory.WithMaxDepth(30))\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9ed8\u8ba4\u503c\uff1a20"}),"\n",(0,r.jsx)(n.li,{children:"\u9632\u62a4\u6df1\u5c42\u9012\u5f52\u7ed3\u6784\u6216\u6076\u610f\u6570\u636e"}),"\n",(0,r.jsx)(n.li,{children:"\u8d85\u8fc7\u9650\u5236\u4f1a\u8fd4\u56de\u9519\u8bef"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"withxlang",children:"WithXlang"}),"\n",(0,r.jsx)(n.p,{children:"\u542f\u7528\u8de8\u8bed\u8a00\u5e8f\u5217\u5316\u6a21\u5f0f\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New(fory.WithXlang(true))\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5f00\u542f\u540e\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u8de8\u8bed\u8a00\u7c7b\u578b\u7cfb\u7edf"}),"\n",(0,r.jsx)(n.li,{children:"\u4e0e Java\u3001Python\u3001C++\u3001Rust\u3001JavaScript \u517c\u5bb9"}),"\n",(0,r.jsx)(n.li,{children:"\u7c7b\u578b ID \u9075\u5faa xlang \u89c4\u8303"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u95ed\uff08\u9ed8\u8ba4\uff09\u65f6\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528 Go \u539f\u751f\u5e8f\u5217\u5316\u6a21\u5f0f"}),"\n",(0,r.jsx)(n.li,{children:"\u652f\u6301\u66f4\u591a Go \u539f\u751f\u7c7b\u578b"}),"\n",(0,r.jsx)(n.li,{children:"\u4e0e\u5176\u4ed6\u8bed\u8a00\u5b9e\u73b0\u4e0d\u517c\u5bb9"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u7ebf\u7a0b\u5b89\u5168",children:"\u7ebf\u7a0b\u5b89\u5168"}),"\n",(0,r.jsxs)(n.p,{children:["\u9ed8\u8ba4 ",(0,r.jsx)(n.code,{children:"Fory"})," \u5b9e\u4f8b",(0,r.jsx)(n.strong,{children:"\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684"}),"\u3002\u5e76\u53d1\u573a\u666f\u8bf7\u4f7f\u7528\u7ebf\u7a0b\u5b89\u5168\u5c01\u88c5\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'import "github.com/apache/fory/go/fory/threadsafe"\n\n// Create thread-safe Fory with same options\nf := threadsafe.New(\n    fory.WithTrackRef(true),\n    fory.WithCompatible(true),\n)\n\n// Safe for concurrent use from multiple goroutines\ngo func() {\n    data, _ := f.Serialize(value1)\n    // data is already copied, safe to use after return\n}()\ngo func() {\n    data, _ := f.Serialize(value2)\n}()\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u7ebf\u7a0b\u5b89\u5168\u5c01\u88c5\u5177\u5907\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5185\u90e8\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"sync.Pool"})," \u9ad8\u6548\u590d\u7528\u5b9e\u4f8b"]}),"\n",(0,r.jsx)(n.li,{children:"\u8fd4\u56de\u524d\u81ea\u52a8\u590d\u5236\u5e8f\u5217\u5316\u6570\u636e"}),"\n",(0,r.jsxs)(n.li,{children:["\u4e0e ",(0,r.jsx)(n.code,{children:"fory.New()"})," \u76f8\u540c\u7684\u914d\u7f6e\u9009\u9879"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5168\u5c40\u7ebf\u7a0b\u5b89\u5168\u5b9e\u4f8b",children:"\u5168\u5c40\u7ebf\u7a0b\u5b89\u5168\u5b9e\u4f8b"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e3a\u4e86\u4fbf\u6377\uff0c",(0,r.jsx)(n.code,{children:"threadsafe"})," \u5305\u63d0\u4f9b\u5168\u5c40\u51fd\u6570\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'import "github.com/apache/fory/go/fory/threadsafe"\n\n// Uses a global thread-safe instance with default configuration\ndata, err := threadsafe.Marshal(&myValue)\nerr = threadsafe.Unmarshal(data, &result)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u8be6\u89c1 ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/thread_safety",children:"\u7ebf\u7a0b\u5b89\u5168"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u7f13\u51b2\u533a\u7ba1\u7406",children:"\u7f13\u51b2\u533a\u7ba1\u7406"}),"\n",(0,r.jsx)(n.h3,{id:"\u96f6\u62f7\u8d1d\u884c\u4e3a",children:"\u96f6\u62f7\u8d1d\u884c\u4e3a"}),"\n",(0,r.jsxs)(n.p,{children:["\u9ed8\u8ba4 ",(0,r.jsx)(n.code,{children:"Fory"})," \u5b9e\u4f8b\u4f1a\u590d\u7528\u5185\u90e8\u7f13\u51b2\u533a\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New()\n\ndata1, _ := f.Serialize(value1)\n// WARNING: data1 becomes invalid after next Serialize call!\ndata2, _ := f.Serialize(value2)\n// data1 now points to invalid memory\n\n// To keep the data, copy it:\nsafeCopy := make([]byte, len(data1))\ncopy(safeCopy, data1)\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7ebf\u7a0b\u5b89\u5168\u5c01\u88c5\u4f1a\u81ea\u52a8\u62f7\u8d1d\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u8be5\u95ee\u9898\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := threadsafe.New()\ndata1, _ := f.Serialize(value1)\ndata2, _ := f.Serialize(value2)\n// Both data1 and data2 are valid\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u624b\u52a8\u63a7\u5236\u7f13\u51b2\u533a",children:"\u624b\u52a8\u63a7\u5236\u7f13\u51b2\u533a"}),"\n",(0,r.jsx)(n.p,{children:"\u9ad8\u541e\u5410\u573a\u666f\u53ef\u624b\u52a8\u7ba1\u7406\u7f13\u51b2\u533a\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"f := fory.New()\nbuf := fory.NewByteBuffer(nil)\n\n// Serialize to existing buffer\nerr := f.SerializeTo(buf, value)\n\n// Get serialized data\ndata := buf.GetByteSlice(0, buf.WriterIndex())\n\n// Process data...\n\n// Reset for next use\nbuf.Reset()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u914d\u7f6e\u793a\u4f8b",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,r.jsx)(n.h3,{id:"\u7b80\u5355\u6570\u636e\u9ed8\u8ba4\u914d\u7f6e",children:"\u7b80\u5355\u6570\u636e\uff08\u9ed8\u8ba4\u914d\u7f6e\uff09"}),"\n",(0,r.jsx)(n.p,{children:"\u9002\u7528\u4e8e\u4e0d\u542b\u5faa\u73af\u5f15\u7528\u7684\u7b80\u5355\u7ed3\u6784\u4f53\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'f := fory.New()\n\ntype Config struct {\n    Host string\n    Port int32\n}\n\nf.RegisterStruct(Config{}, 1)\ndata, _ := f.Serialize(&Config{Host: "localhost", Port: 8080})\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u56fe\u7ed3\u6784\u6570\u636e",children:"\u56fe\u7ed3\u6784\u6570\u636e"}),"\n",(0,r.jsx)(n.p,{children:"\u9002\u7528\u4e8e\u5b58\u5728\u5faa\u73af\u5f15\u7528\u7684\u6570\u636e\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'f := fory.New(fory.WithTrackRef(true))\n\ntype Node struct {\n    Value int32\n    Next  *Node `fory:"ref"`\n}\n\nf.RegisterStruct(Node{}, 1)\nn1 := &Node{Value: 1}\nn2 := &Node{Value: 2}\nn1.Next = n2\nn2.Next = n1  // Circular reference\n\ndata, _ := f.Serialize(n1)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"schema-\u6f14\u8fdb",children:"Schema \u6f14\u8fdb"}),"\n",(0,r.jsx)(n.p,{children:"\u9002\u7528\u4e8e\u7ed3\u6784\u53ef\u80fd\u968f\u65f6\u95f4\u53d8\u5316\u7684\u6570\u636e\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'// V1: original struct\ntype UserV1 struct {\n    ID   int64\n    Name string\n}\n\n// V2: added Email field\ntype UserV2 struct {\n    ID    int64\n    Name  string\n    Email string  // New field\n}\n\n// Serialize with V1\nf1 := fory.New(fory.WithCompatible(true))\nf1.RegisterStruct(UserV1{}, 1)\ndata, _ := f1.Serialize(&UserV1{ID: 1, Name: "Alice"})\n\n// Deserialize into V2 - Email will have zero value\nf2 := fory.New(fory.WithCompatible(true))\nf2.RegisterStruct(UserV2{}, 1)\nvar user UserV2\nf2.Deserialize(data, &user)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u9ad8\u6027\u80fd\u5e76\u53d1\u573a\u666f",children:"\u9ad8\u6027\u80fd\u5e76\u53d1\u573a\u666f"}),"\n",(0,r.jsx)(n.p,{children:"\u9002\u7528\u4e8e\u9ad8\u541e\u5410\u5e76\u53d1\u5904\u7406\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"type Request struct {\n    ID      int64\n    Payload string\n}\n\nf := threadsafe.New(\n    fory.WithMaxDepth(30),\n)\nf.RegisterStruct(Request{}, 1)\n\n// Process requests concurrently\nfor req := range requests {\n    go func(r Request) {\n        data, _ := f.Serialize(&r)\n        sendResponse(data)\n    }(req)\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u590d\u7528 Fory \u5b9e\u4f8b"}),"\uff1a\u521b\u5efa\u5b9e\u4f8b\u6709\u521d\u59cb\u5316\u5f00\u9500\uff0c\u5efa\u8bae\u521b\u5efa\u4e00\u6b21\u540e\u590d\u7528\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5e76\u53d1\u65f6\u4f7f\u7528\u7ebf\u7a0b\u5b89\u5168\u5c01\u88c5"}),"\uff1a\u4e0d\u8981\u5728\u591a\u4e2a goroutine \u95f4\u5171\u4eab\u9ed8\u8ba4\u5b9e\u4f8b\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6309\u9700\u542f\u7528\u5f15\u7528\u8ddf\u8e2a"}),"\uff1a\u5f15\u7528\u8ddf\u8e2a\u4f1a\u589e\u52a0\u5f00\u9500\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9700\u8981\u957f\u671f\u4fdd\u5b58\u6570\u636e\u65f6\u8bf7\u590d\u5236"}),"\uff1a\u9ed8\u8ba4\u5b9e\u4f8b\u8fd4\u56de\u7684\u5b57\u8282\u5207\u7247\u4f1a\u5728\u540e\u7eed\u8c03\u7528\u540e\u5931\u6548\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5408\u7406\u8bbe\u7f6e\u6700\u5927\u6df1\u5ea6"}),"\uff1a\u6df1\u5c42\u7ed3\u6784\u53ef\u9002\u5f53\u8c03\u5927\uff0c\u4f46\u9700\u5173\u6ce8\u5185\u5b58\u5360\u7528\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema \u53ef\u80fd\u6f14\u8fdb\u65f6\u542f\u7528\u517c\u5bb9\u6a21\u5f0f"}),"\uff1a\u670d\u52a1\u7248\u672c\u5b58\u5728\u7ed3\u6784\u5dee\u5f02\u65f6\u5efa\u8bae\u5f00\u542f\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u76f8\u5173\u4e3b\u9898",children:"\u76f8\u5173\u4e3b\u9898"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/basic_serialization",children:"\u57fa\u672c\u5e8f\u5217\u5316"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/references",children:"\u5f15\u7528"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/schema_evolution",children:"Schema \u6f14\u8fdb"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/guide/go/thread_safety",children:"\u7ebf\u7a0b\u5b89\u5168"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>d,a:()=>t});var r=i(67294);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);