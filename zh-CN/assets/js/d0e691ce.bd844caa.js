"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[93483],{3768:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>a});var r=i(85893),d=i(11151);const l={title:"\u5b57\u6bb5\u914d\u7f6e",sidebar_position:5,id:"field_configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},s=void 0,c={id:"guide/java/field_configuration",title:"\u5b57\u6bb5\u914d\u7f6e",description:"\u672c\u9875\u8bf4\u660e\u5982\u4f55\u5728 Java \u4e2d\u914d\u7f6e\u5e8f\u5217\u5316\u5b57\u6bb5\u7ea7\u5143\u4fe1\u606f\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/java/field-configuration.md",sourceDirName:"guide/java",slug:"/guide/java/field_configuration",permalink:"/zh-CN/docs/next/guide/java/field_configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/i18n/zh-CN/docusaurus-plugin-content-docs/current/guide/java/field-configuration.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"\u5b57\u6bb5\u914d\u7f6e",sidebar_position:5,id:"field_configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668",permalink:"/zh-CN/docs/next/guide/java/custom_serializers"},next:{title:"Schema \u6f14\u5316",permalink:"/zh-CN/docs/next/guide/java/schema_evolution"}},t={},a=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u57fa\u672c\u8bed\u6cd5",id:"\u57fa\u672c\u8bed\u6cd5",level:2},{value:"<code>@ForyField</code> \u6ce8\u89e3",id:"foryfield-\u6ce8\u89e3",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u5b57\u6bb5 ID\uff08<code>id</code>\uff09",id:"\u5b57\u6bb5-idid",level:2},{value:"\u53ef\u7a7a\u5b57\u6bb5\uff08<code>nullable</code>\uff09",id:"\u53ef\u7a7a\u5b57\u6bb5nullable",level:2},{value:"\u5f15\u7528\u8ddf\u8e2a\uff08<code>ref</code>\uff09",id:"\u5f15\u7528\u8ddf\u8e2aref",level:2},{value:"Dynamic\uff08\u591a\u6001\u63a7\u5236\uff09",id:"dynamic\u591a\u6001\u63a7\u5236",level:2},{value:"\u8df3\u8fc7\u5b57\u6bb5",id:"\u8df3\u8fc7\u5b57\u6bb5",level:2},{value:"\u4f7f\u7528 <code>@Ignore</code>",id:"\u4f7f\u7528-ignore",level:3},{value:"\u4f7f\u7528 <code>transient</code>",id:"\u4f7f\u7528-transient",level:3},{value:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3",id:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3",level:2},{value:"\u6709\u7b26\u53f7 32 \u4f4d\u6574\u6570\uff08<code>@Int32Type</code>\uff09",id:"\u6709\u7b26\u53f7-32-\u4f4d\u6574\u6570int32type",level:3},{value:"\u6709\u7b26\u53f7 64 \u4f4d\u6574\u6570\uff08<code>@Int64Type</code>\uff09",id:"\u6709\u7b26\u53f7-64-\u4f4d\u6574\u6570int64type",level:3},{value:"\u65e0\u7b26\u53f7\u6574\u6570",id:"\u65e0\u7b26\u53f7\u6574\u6570",level:3},{value:"\u7f16\u7801\u6c47\u603b",id:"\u7f16\u7801\u6c47\u603b",level:3},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:2},{value:"\u8de8\u8bed\u8a00\u517c\u5bb9",id:"\u8de8\u8bed\u8a00\u517c\u5bb9",level:2},{value:"Schema \u6f14\u8fdb",id:"schema-\u6f14\u8fdb",level:2},{value:"Native \u6a21\u5f0f\u4e0e Xlang \u6a21\u5f0f",id:"native-\u6a21\u5f0f\u4e0e-xlang-\u6a21\u5f0f",level:2},{value:"Native \u6a21\u5f0f\uff08\u4ec5 Java\uff09",id:"native-\u6a21\u5f0f\u4ec5-java",level:3},{value:"Xlang \u6a21\u5f0f\uff08\u8de8\u8bed\u8a00\uff09",id:"xlang-\u6a21\u5f0f\u8de8\u8bed\u8a00",level:3},{value:"\u9ed8\u8ba4\u503c\u6c47\u603b",id:"\u9ed8\u8ba4\u503c\u6c47\u603b",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u6ce8\u89e3\u901f\u67e5",id:"\u6ce8\u89e3\u901f\u67e5",level:2},{value:"\u76f8\u5173\u4e3b\u9898",id:"\u76f8\u5173\u4e3b\u9898",level:2}];function o(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u672c\u9875\u8bf4\u660e\u5982\u4f55\u5728 Java \u4e2d\u914d\u7f6e\u5e8f\u5217\u5316\u5b57\u6bb5\u7ea7\u5143\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,r.jsx)(e.p,{children:"Apache ForyTM \u901a\u8fc7\u6ce8\u89e3\u63d0\u4f9b\u5b57\u6bb5\u7ea7\u914d\u7f6e\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.code,{children:"@ForyField"})}),"\uff1a\u914d\u7f6e\u5b57\u6bb5\u5143\u4fe1\u606f\uff08id\u3001nullable\u3001ref\u3001dynamic\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.code,{children:"@Ignore"})}),"\uff1a\u5c06\u5b57\u6bb5\u6392\u9664\u5728\u5e8f\u5217\u5316\u4e4b\u5916"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3"}),"\uff1a\u63a7\u5236\u6574\u6570\u7f16\u7801\u65b9\u5f0f\uff08varint\u3001fixed\u3001tagged\u3001unsigned\uff09"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e9b\u80fd\u529b\u53ef\u7528\u4e8e\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Tag ID"}),"\uff1a\u4e3a\u517c\u5bb9\u6a21\u5f0f\u5206\u914d\u7d27\u51d1\u6570\u503c ID\uff0c\u964d\u4f4e struct \u5b57\u6bb5\u5143\u4fe1\u606f\u5f00\u9500"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u53ef\u7a7a\u63a7\u5236"}),"\uff1a\u58f0\u660e\u5b57\u6bb5\u662f\u5426\u5141\u8bb8\u4e3a null"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5f15\u7528\u8ddf\u8e2a"}),"\uff1a\u4e3a\u5171\u4eab\u5bf9\u8c61\u5f00\u542f\u5f15\u7528\u8ddf\u8e2a"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5b57\u6bb5\u8df3\u8fc7"}),"\uff1a\u663e\u5f0f\u6392\u9664\u4e0d\u9700\u8981\u5e8f\u5217\u5316\u7684\u5b57\u6bb5"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u7f16\u7801\u63a7\u5236"}),"\uff1a\u6307\u5b9a\u6574\u6570\u5e8f\u5217\u5316\u7f16\u7801\u7b56\u7565"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u591a\u6001\u63a7\u5236"}),"\uff1a\u63a7\u5236 struct \u5b57\u6bb5\u662f\u5426\u5199\u5165\u8fd0\u884c\u65f6\u7c7b\u578b\u4fe1\u606f"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u57fa\u672c\u8bed\u6cd5",children:"\u57fa\u672c\u8bed\u6cd5"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u5b57\u6bb5\u4e0a\u4f7f\u7528\u6ce8\u89e3\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import org.apache.fory.annotation.ForyField;\n\npublic class Person {\n    @ForyField(id = 0)\n    private String name;\n\n    @ForyField(id = 1)\n    private int age;\n\n    @ForyField(id = 2, nullable = true)\n    private String nickname;\n}\n"})}),"\n",(0,r.jsxs)(e.h2,{id:"foryfield-\u6ce8\u89e3",children:[(0,r.jsx)(e.code,{children:"@ForyField"})," \u6ce8\u89e3"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"@ForyField"})," \u914d\u7f6e\u5b57\u6bb5\u7ea7\u5143\u4fe1\u606f\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class User {\n    @ForyField(id = 0)\n    private long id;\n\n    @ForyField(id = 1)\n    private String name;\n\n    @ForyField(id = 2, nullable = true)\n    private String email;\n\n    @ForyField(id = 3, ref = true)\n    private List<User> friends;\n\n    @ForyField(id = 4, dynamic = ForyField.Dynamic.TRUE)\n    private Object data;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u53c2\u6570"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u9ed8\u8ba4\u503c"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"id"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"int"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-1"})}),(0,r.jsxs)(e.td,{children:["\u5b57\u6bb5 tag ID\uff08",(0,r.jsx)(e.code,{children:"-1"})," \u8868\u793a\u4f7f\u7528\u5b57\u6bb5\u540d\u7f16\u7801\uff09"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"nullable"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"false"})}),(0,r.jsx)(e.td,{children:"\u5b57\u6bb5\u662f\u5426\u53ef\u4e3a null"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"ref"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"boolean"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"false"})}),(0,r.jsx)(e.td,{children:"\u662f\u5426\u5f00\u542f\u5f15\u7528\u8ddf\u8e2a"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"dynamic"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"Dynamic"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"AUTO"})}),(0,r.jsx)(e.td,{children:"\u63a7\u5236 struct \u5b57\u6bb5\u591a\u6001\u884c\u4e3a"})]})]})]}),"\n",(0,r.jsxs)(e.h2,{id:"\u5b57\u6bb5-idid",children:["\u5b57\u6bb5 ID\uff08",(0,r.jsx)(e.code,{children:"id"}),"\uff09"]}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7\u4e3a\u5b57\u6bb5\u5206\u914d\u6570\u503c ID\uff0c\u53ef\u964d\u4f4e\u517c\u5bb9\u6a21\u5f0f\u4e0b struct \u5b57\u6bb5\u5143\u4fe1\u606f\u5f00\u9500\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class User {\n    @ForyField(id = 0)\n    private long id;\n\n    @ForyField(id = 1)\n    private String name;\n\n    @ForyField(id = 2)\n    private int age;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6536\u76ca\uff1a"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5e8f\u5217\u5316\u4f53\u79ef\u66f4\u5c0f\uff08\u5143\u4fe1\u606f\u91cc\u7528\u6570\u503c ID \u800c\u4e0d\u662f\u5b57\u6bb5\u540d\uff09"}),"\n",(0,r.jsx)(e.li,{children:"struct \u5b57\u6bb5\u5143\u4fe1\u606f\u5f00\u9500\u66f4\u4f4e"}),"\n",(0,r.jsx)(e.li,{children:"\u53ef\u5728\u4e0d\u7834\u574f\u4e8c\u8fdb\u5236\u517c\u5bb9\u6027\u7684\u524d\u63d0\u4e0b\u91cd\u547d\u540d\u5b57\u6bb5"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5efa\u8bae\uff1a"})," \u517c\u5bb9\u6a21\u5f0f\u4e0b\u5efa\u8bae\u914d\u7f6e\u5b57\u6bb5 ID\uff0c\u4ee5\u964d\u4f4e\u5e8f\u5217\u5316\u6210\u672c\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u540c\u4e00\u4e2a\u7c7b\u5185 ID \u5fc5\u987b\u552f\u4e00"}),"\n",(0,r.jsxs)(e.li,{children:["ID \u5fc5\u987b ",(0,r.jsx)(e.code,{children:">= 0"}),"\uff08",(0,r.jsx)(e.code,{children:"-1"})," \u8868\u793a\u4f7f\u7528\u5b57\u6bb5\u540d\u7f16\u7801\uff0c\u4e5f\u662f\u9ed8\u8ba4\u884c\u4e3a\uff09"]}),"\n",(0,r.jsx)(e.li,{children:"\u672a\u6307\u5b9a\u65f6\uff0c\u5143\u4fe1\u606f\u5c06\u5199\u5b57\u6bb5\u540d\uff08\u5f00\u9500\u66f4\u5927\uff09"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4e0d\u914d\u7f6e\u5b57\u6bb5 ID"}),"\uff08\u5143\u4fe1\u606f\u4f7f\u7528\u5b57\u6bb5\u540d\uff09\u793a\u4f8b\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class User {\n    private long id;\n    private String name;\n}\n"})}),"\n",(0,r.jsxs)(e.h2,{id:"\u53ef\u7a7a\u5b57\u6bb5nullable",children:["\u53ef\u7a7a\u5b57\u6bb5\uff08",(0,r.jsx)(e.code,{children:"nullable"}),"\uff09"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5bf9\u53ef\u80fd\u4e3a ",(0,r.jsx)(e.code,{children:"null"})," \u7684\u5b57\u6bb5\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"nullable = true"}),"\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class Record {\n    // \u53ef\u7a7a\u5b57\u7b26\u4e32\u5b57\u6bb5\n    @ForyField(id = 0, nullable = true)\n    private String optionalName;\n\n    // \u53ef\u7a7a Integer \u5b57\u6bb5\uff08\u88c5\u7bb1\u7c7b\u578b\uff09\n    @ForyField(id = 1, nullable = true)\n    private Integer optionalCount;\n\n    // \u975e\u53ef\u7a7a\u5b57\u6bb5\uff08\u9ed8\u8ba4\uff09\n    @ForyField(id = 2)\n    private String requiredName;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9ed8\u8ba4\u662f ",(0,r.jsx)(e.code,{children:"nullable = false"}),"\uff08\u4e0d\u53ef\u7a7a\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"nullable = false"})," \u65f6\uff0cFory \u4f1a\u7701\u7565 null \u6807\u8bb0\u5199\u5165\uff08\u8282\u7701 1 \u5b57\u8282\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:["\u53ef\u80fd\u4e3a null \u7684\u88c5\u7bb1\u7c7b\u578b\uff08",(0,r.jsx)(e.code,{children:"Integer"}),"\u3001",(0,r.jsx)(e.code,{children:"Long"})," \u7b49\uff09\u5efa\u8bae\u663e\u5f0f\u8bbe\u4e3a ",(0,r.jsx)(e.code,{children:"nullable = true"})]}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"\u5f15\u7528\u8ddf\u8e2aref",children:["\u5f15\u7528\u8ddf\u8e2a\uff08",(0,r.jsx)(e.code,{children:"ref"}),"\uff09"]}),"\n",(0,r.jsx)(e.p,{children:"\u5bf9\u4e8e\u53ef\u80fd\u5171\u4eab\u6216\u5faa\u73af\u5f15\u7528\u7684\u5b57\u6bb5\uff0c\u542f\u7528\u5f15\u7528\u8ddf\u8e2a\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class RefOuter {\n    // \u4e24\u4e2a\u5b57\u6bb5\u53ef\u80fd\u6307\u5411\u540c\u4e00\u4e2a\u5185\u90e8\u5bf9\u8c61\n    @ForyField(id = 0, ref = true, nullable = true)\n    private RefInner inner1;\n\n    @ForyField(id = 1, ref = true, nullable = true)\n    private RefInner inner2;\n}\n\npublic class CircularRef {\n    @ForyField(id = 0)\n    private String name;\n\n    // \u81ea\u5f15\u7528\u5b57\u6bb5\uff0c\u7528\u4e8e\u5faa\u73af\u5f15\u7528\n    @ForyField(id = 1, ref = true, nullable = true)\n    private CircularRef selfRef;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u9002\u7528\u573a\u666f\uff1a"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5b57\u6bb5\u53ef\u80fd\u5f62\u6210\u5faa\u73af\u6216\u5171\u4eab\u5173\u7cfb"}),"\n",(0,r.jsx)(e.li,{children:"\u540c\u4e00\u5bf9\u8c61\u88ab\u591a\u4e2a\u5b57\u6bb5\u5f15\u7528"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9ed8\u8ba4\u662f ",(0,r.jsx)(e.code,{children:"ref = false"}),"\uff08\u4e0d\u8ddf\u8e2a\u5f15\u7528\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ref = false"})," \u53ef\u907f\u514d IdentityMap \u5f00\u9500\uff0c\u4e5f\u4f1a\u8df3\u8fc7\u5f15\u7528\u8ddf\u8e2a\u6807\u8bb0"]}),"\n",(0,r.jsx)(e.li,{children:"\u4ec5\u5728\u5168\u5c40\u542f\u7528 ref tracking \u65f6\uff0c\u5b57\u6bb5\u7ea7 ref \u624d\u751f\u6548"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"dynamic\u591a\u6001\u63a7\u5236",children:"Dynamic\uff08\u591a\u6001\u63a7\u5236\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\u63a7\u5236\u8de8\u8bed\u8a00\u5e8f\u5217\u5316\u65f6 struct \u5b57\u6bb5\u7684\u591a\u6001\u884c\u4e3a\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class Container {\n    // AUTO\uff1a\u63a5\u53e3/\u62bd\u8c61\u7c7b\u578b\u52a8\u6001\uff0c\u5177\u4f53\u7c7b\u578b\u975e\u52a8\u6001\n    @ForyField(id = 0, dynamic = ForyField.Dynamic.AUTO)\n    private Animal animal;  // \u63a5\u53e3\u7c7b\u578b\uff0c\u5199\u5165\u7c7b\u578b\u4fe1\u606f\n\n    // FALSE\uff1a\u4e0d\u5199\u7c7b\u578b\u4fe1\u606f\uff0c\u76f4\u63a5\u6309\u58f0\u660e\u7c7b\u578b\u5e8f\u5217\u5316\n    @ForyField(id = 1, dynamic = ForyField.Dynamic.FALSE)\n    private Dog dog;  // \u5177\u4f53\u7c7b\u578b\uff0c\u4e0d\u5199\u7c7b\u578b\u4fe1\u606f\n\n    // TRUE\uff1a\u5199\u7c7b\u578b\u4fe1\u606f\uff0c\u652f\u6301\u8fd0\u884c\u65f6\u5b50\u7c7b\u578b\n    @ForyField(id = 2, dynamic = ForyField.Dynamic.TRUE)\n    private Object data;  // \u5f3a\u5236\u591a\u6001\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u53d6\u503c\uff1a"})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u503c"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"AUTO"})}),(0,r.jsx)(e.td,{children:"\u81ea\u52a8\u5224\u65ad\uff1a\u63a5\u53e3/\u62bd\u8c61\u7c7b\u578b\u52a8\u6001\uff0c\u5177\u4f53\u7c7b\u578b\u975e\u52a8\u6001"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"FALSE"})}),(0,r.jsx)(e.td,{children:"\u4e0d\u5199\u7c7b\u578b\u4fe1\u606f\uff0c\u76f4\u63a5\u4f7f\u7528\u58f0\u660e\u7c7b\u578b\u7684\u5e8f\u5217\u5316\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"TRUE"})}),(0,r.jsx)(e.td,{children:"\u5199\u5165\u7c7b\u578b\u4fe1\u606f\uff0c\u4ee5\u652f\u6301\u8fd0\u884c\u65f6\u5b50\u7c7b\u578b"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u8df3\u8fc7\u5b57\u6bb5",children:"\u8df3\u8fc7\u5b57\u6bb5"}),"\n",(0,r.jsxs)(e.h3,{id:"\u4f7f\u7528-ignore",children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"@Ignore"})]}),"\n",(0,r.jsx)(e.p,{children:"\u5c06\u5b57\u6bb5\u6392\u9664\u5728\u5e8f\u5217\u5316\u4e4b\u5916\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import org.apache.fory.annotation.Ignore;\n\npublic class User {\n    @ForyField(id = 0)\n    private long id;\n\n    @ForyField(id = 1)\n    private String name;\n\n    @Ignore\n    private String password;  // \u4e0d\u5e8f\u5217\u5316\n\n    @Ignore\n    private Object internalState;  // \u4e0d\u5e8f\u5217\u5316\n}\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"\u4f7f\u7528-transient",children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"transient"})]}),"\n",(0,r.jsxs)(e.p,{children:["Java \u7684 ",(0,r.jsx)(e.code,{children:"transient"})," \u5173\u952e\u5b57\u540c\u6837\u4f1a\u6392\u9664\u5b57\u6bb5\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class User {\n    @ForyField(id = 0)\n    private long id;\n\n    private transient String password;  // \u4e0d\u5e8f\u5217\u5316\n    private transient Object cache;     // \u4e0d\u5e8f\u5217\u5316\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3",children:"\u6574\u6570\u7c7b\u578b\u6ce8\u89e3"}),"\n",(0,r.jsx)(e.p,{children:"Fory \u63d0\u4f9b\u6574\u6570\u6ce8\u89e3\uff0c\u7528\u4e8e\u5728\u8de8\u8bed\u8a00\u573a\u666f\u4e2d\u63a7\u5236\u7f16\u7801\u65b9\u5f0f\u3002"}),"\n",(0,r.jsxs)(e.h3,{id:"\u6709\u7b26\u53f7-32-\u4f4d\u6574\u6570int32type",children:["\u6709\u7b26\u53f7 32 \u4f4d\u6574\u6570\uff08",(0,r.jsx)(e.code,{children:"@Int32Type"}),"\uff09"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import org.apache.fory.annotation.Int32Type;\n\npublic class MyStruct {\n    // \u53d8\u957f\u7f16\u7801\uff08\u9ed8\u8ba4\uff09\uff0c\u5c0f\u503c\u66f4\u7d27\u51d1\n    @Int32Type(compress = true)\n    private int compactId;\n\n    // \u56fa\u5b9a 4 \u5b57\u8282\u7f16\u7801\uff0c\u957f\u5ea6\u7a33\u5b9a\n    @Int32Type(compress = false)\n    private int fixedId;\n}\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"\u6709\u7b26\u53f7-64-\u4f4d\u6574\u6570int64type",children:["\u6709\u7b26\u53f7 64 \u4f4d\u6574\u6570\uff08",(0,r.jsx)(e.code,{children:"@Int64Type"}),"\uff09"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import org.apache.fory.annotation.Int64Type;\nimport org.apache.fory.config.LongEncoding;\n\npublic class MyStruct {\n    // \u53d8\u957f\u7f16\u7801\uff08\u9ed8\u8ba4\uff09\n    @Int64Type(encoding = LongEncoding.VARINT)\n    private long compactId;\n\n    // \u56fa\u5b9a 8 \u5b57\u8282\u7f16\u7801\n    @Int64Type(encoding = LongEncoding.FIXED)\n    private long fixedTimestamp;\n\n    // tagged \u7f16\u7801\uff08\u5c0f\u503c 4 \u5b57\u8282\uff0c\u5426\u5219 9 \u5b57\u8282\uff09\n    @Int64Type(encoding = LongEncoding.TAGGED)\n    private long taggedValue;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u65e0\u7b26\u53f7\u6574\u6570",children:"\u65e0\u7b26\u53f7\u6574\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import org.apache.fory.annotation.Uint8Type;\nimport org.apache.fory.annotation.Uint16Type;\nimport org.apache.fory.annotation.Uint32Type;\nimport org.apache.fory.annotation.Uint64Type;\nimport org.apache.fory.config.LongEncoding;\n\npublic class UnsignedStruct {\n    // \u65e0\u7b26\u53f7 8 \u4f4d [0, 255]\n    @Uint8Type\n    private short flags;\n\n    // \u65e0\u7b26\u53f7 16 \u4f4d [0, 65535]\n    @Uint16Type\n    private int port;\n\n    // \u65e0\u7b26\u53f7 32 \u4f4d\uff0cvarint \u7f16\u7801\uff08\u9ed8\u8ba4\uff09\n    @Uint32Type(compress = true)\n    private long compactCount;\n\n    // \u65e0\u7b26\u53f7 32 \u4f4d\uff0cfixed \u7f16\u7801\n    @Uint32Type(compress = false)\n    private long fixedCount;\n\n    // \u65e0\u7b26\u53f7 64 \u4f4d\uff0c\u591a\u79cd\u7f16\u7801\n    @Uint64Type(encoding = LongEncoding.VARINT)\n    private long varintU64;\n\n    @Uint64Type(encoding = LongEncoding.FIXED)\n    private long fixedU64;\n\n    @Uint64Type(encoding = LongEncoding.TAGGED)\n    private long taggedU64;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u7f16\u7801\u6c47\u603b",children:"\u7f16\u7801\u6c47\u603b"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u6ce8\u89e3"}),(0,r.jsx)(e.th,{children:"Type ID"}),(0,r.jsx)(e.th,{children:"\u7f16\u7801"}),(0,r.jsx)(e.th,{children:"\u5927\u5c0f"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int32Type(compress = true)"})}),(0,r.jsx)(e.td,{children:"5"}),(0,r.jsx)(e.td,{children:"varint"}),(0,r.jsx)(e.td,{children:"1-5 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int32Type(compress = false)"})}),(0,r.jsx)(e.td,{children:"4"}),(0,r.jsx)(e.td,{children:"fixed"}),(0,r.jsx)(e.td,{children:"4 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int64Type(encoding = VARINT)"})}),(0,r.jsx)(e.td,{children:"7"}),(0,r.jsx)(e.td,{children:"varint"}),(0,r.jsx)(e.td,{children:"1-10 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int64Type(encoding = FIXED)"})}),(0,r.jsx)(e.td,{children:"6"}),(0,r.jsx)(e.td,{children:"fixed"}),(0,r.jsx)(e.td,{children:"8 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int64Type(encoding = TAGGED)"})}),(0,r.jsx)(e.td,{children:"8"}),(0,r.jsx)(e.td,{children:"tagged"}),(0,r.jsx)(e.td,{children:"4 \u6216 9 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint8Type"})}),(0,r.jsx)(e.td,{children:"9"}),(0,r.jsx)(e.td,{children:"fixed"}),(0,r.jsx)(e.td,{children:"1 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint16Type"})}),(0,r.jsx)(e.td,{children:"10"}),(0,r.jsx)(e.td,{children:"fixed"}),(0,r.jsx)(e.td,{children:"2 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint32Type(compress = true)"})}),(0,r.jsx)(e.td,{children:"12"}),(0,r.jsx)(e.td,{children:"varint"}),(0,r.jsx)(e.td,{children:"1-5 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint32Type(compress = false)"})}),(0,r.jsx)(e.td,{children:"11"}),(0,r.jsx)(e.td,{children:"fixed"}),(0,r.jsx)(e.td,{children:"4 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint64Type(encoding = VARINT)"})}),(0,r.jsx)(e.td,{children:"14"}),(0,r.jsx)(e.td,{children:"varint"}),(0,r.jsx)(e.td,{children:"1-10 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint64Type(encoding = FIXED)"})}),(0,r.jsx)(e.td,{children:"13"}),(0,r.jsx)(e.td,{children:"fixed"}),(0,r.jsx)(e.td,{children:"8 \u5b57\u8282"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint64Type(encoding = TAGGED)"})}),(0,r.jsx)(e.td,{children:"15"}),(0,r.jsx)(e.td,{children:"tagged"}),(0,r.jsx)(e.td,{children:"4 \u6216 9 \u5b57\u8282"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u4f55\u65f6\u4f7f\u7528\uff1a"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"varint"}),"\uff1a\u6570\u503c\u901a\u5e38\u8f83\u5c0f\u65f6\u6700\u4f18\uff08\u9ed8\u8ba4\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"fixed"}),"\uff1a\u6570\u503c\u5206\u5e03\u63a5\u8fd1\u5168\u8303\u56f4\u65f6\u66f4\u7a33\u5b9a\uff08\u5982\u65f6\u95f4\u6233\u3001\u54c8\u5e0c\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"tagged"}),"\uff1a\u5728\u4f53\u79ef\u4e0e\u6027\u80fd\u95f4\u5e73\u8861\u8f83\u597d"]}),"\n",(0,r.jsx)(e.li,{children:"\u65e0\u7b26\u53f7\u7c7b\u578b\uff1a\u9002\u5408\u4e0e Rust/Go/C++ \u7b49\u8bed\u8a00\u8fdb\u884c\u65e0\u7b26\u53f7\u6574\u6570\u4e92\u64cd\u4f5c"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'import org.apache.fory.Fory;\nimport org.apache.fory.annotation.ForyField;\nimport org.apache.fory.annotation.Ignore;\nimport org.apache.fory.annotation.Int64Type;\nimport org.apache.fory.annotation.Uint64Type;\nimport org.apache.fory.config.LongEncoding;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class Document {\n    // \u5e26 tag ID \u7684\u5b57\u6bb5\uff08\u517c\u5bb9\u6a21\u5f0f\u63a8\u8350\uff09\n    @ForyField(id = 0)\n    private String title;\n\n    @ForyField(id = 1)\n    private int version;\n\n    // \u53ef\u7a7a\u5b57\u6bb5\n    @ForyField(id = 2, nullable = true)\n    private String description;\n\n    // \u96c6\u5408\u5b57\u6bb5\n    @ForyField(id = 3)\n    private List<String> tags;\n\n    @ForyField(id = 4)\n    private Map<String, String> metadata;\n\n    @ForyField(id = 5)\n    private Set<String> categories;\n\n    // \u4e0d\u540c\u7f16\u7801\u65b9\u5f0f\u7684\u6574\u6570\n    @ForyField(id = 6)\n    @Uint64Type(encoding = LongEncoding.VARINT)\n    private long viewCount;  // varint \u7f16\u7801\n\n    @ForyField(id = 7)\n    @Uint64Type(encoding = LongEncoding.FIXED)\n    private long fileSize;   // fixed \u7f16\u7801\n\n    @ForyField(id = 8)\n    @Uint64Type(encoding = LongEncoding.TAGGED)\n    private long checksum;   // tagged \u7f16\u7801\n\n    // \u5171\u4eab/\u5faa\u73af\u5f15\u7528\u5b57\u6bb5\n    @ForyField(id = 9, ref = true, nullable = true)\n    private Document parent;\n\n    // \u5ffd\u7565\u5b57\u6bb5\uff08\u4e0d\u5e8f\u5217\u5316\uff09\n    private transient Object cache;\n\n    // Getters and setters...\n}\n\n// Usage\npublic class Main {\n    public static void main(String[] args) {\n        Fory fory = Fory.builder()\n            .withXlang(true)\n            .withCompatible(true)\n            .withRefTracking(true)\n            .build();\n\n        fory.register(Document.class, 100);\n\n        Document doc = new Document();\n        doc.setTitle("My Document");\n        doc.setVersion(1);\n        doc.setDescription("A sample document");\n\n        // Serialize\n        byte[] data = fory.serialize(doc);\n\n        // Deserialize\n        Document decoded = (Document) fory.deserialize(data);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u8de8\u8bed\u8a00\u517c\u5bb9",children:"\u8de8\u8bed\u8a00\u517c\u5bb9"}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u6570\u636e\u9700\u8981\u88ab\u5176\u4ed6\u8bed\u8a00\uff08Python\u3001Rust\u3001C++\u3001Go\uff09\u8bfb\u53d6\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u5b57\u6bb5 ID \u5e76\u914d\u5957\u7c7b\u578b\u6ce8\u89e3\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class CrossLangData {\n    // \u4f7f\u7528\u5b57\u6bb5 ID \u4fdd\u8bc1\u8de8\u8bed\u8a00\u517c\u5bb9\n    @ForyField(id = 0)\n    @Int32Type(compress = true)\n    private int intVar;\n\n    @ForyField(id = 1)\n    @Uint64Type(encoding = LongEncoding.FIXED)\n    private long longFixed;\n\n    @ForyField(id = 2)\n    @Uint64Type(encoding = LongEncoding.TAGGED)\n    private long longTagged;\n\n    @ForyField(id = 3, nullable = true)\n    private String optionalValue;\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"schema-\u6f14\u8fdb",children:"Schema \u6f14\u8fdb"}),"\n",(0,r.jsx)(e.p,{children:"\u517c\u5bb9\u6a21\u5f0f\u652f\u6301 Schema \u6f14\u8fdb\u3002\u5efa\u8bae\u914d\u7f6e\u5b57\u6bb5 ID \u4ee5\u964d\u4f4e\u5e8f\u5217\u5316\u6210\u672c\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"// Version 1\npublic class DataV1 {\n    @ForyField(id = 0)\n    private long id;\n\n    @ForyField(id = 1)\n    private String name;\n}\n\n// Version 2: Added new field\npublic class DataV2 {\n    @ForyField(id = 0)\n    private long id;\n\n    @ForyField(id = 1)\n    private String name;\n\n    @ForyField(id = 2, nullable = true)\n    private String email;  // New field\n}\n"})}),"\n",(0,r.jsxs)(e.p,{children:["V1 \u5199\u5165\u7684\u6570\u636e\u53ef\u7531 V2 \u8bfb\u53d6\uff08\u65b0\u589e\u5b57\u6bb5\u4f1a\u662f ",(0,r.jsx)(e.code,{children:"null"}),"\uff09\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4e5f\u53ef\u4ee5\u4e0d\u914d\u7f6e\u5b57\u6bb5 ID\uff08\u5143\u4fe1\u606f\u4f1a\u4f7f\u7528\u5b57\u6bb5\u540d\uff0c\u5f00\u9500\u66f4\u5927\uff09\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class Data {\n    private long id;\n    private String name;\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"native-\u6a21\u5f0f\u4e0e-xlang-\u6a21\u5f0f",children:"Native \u6a21\u5f0f\u4e0e Xlang \u6a21\u5f0f"}),"\n",(0,r.jsx)(e.p,{children:"\u5b57\u6bb5\u914d\u7f6e\u5728\u4e0d\u540c\u5e8f\u5217\u5316\u6a21\u5f0f\u4e0b\u7684\u9ed8\u8ba4\u884c\u4e3a\u4e0d\u540c\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"native-\u6a21\u5f0f\u4ec5-java",children:"Native \u6a21\u5f0f\uff08\u4ec5 Java\uff09"}),"\n",(0,r.jsx)(e.p,{children:"Native \u6a21\u5f0f\u4ee5\u6700\u5927\u517c\u5bb9\u6027\u4e3a\u76ee\u6807\uff0c\u9ed8\u8ba4\u503c\u66f4\u5bbd\u677e\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Nullable"}),"\uff1a\u5f15\u7528\u7c7b\u578b\u9ed8\u8ba4\u53ef\u7a7a"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Ref tracking"}),"\uff1a\u5bf9\u8c61\u5f15\u7528\u9ed8\u8ba4\u5f00\u542f\uff08",(0,r.jsx)(e.code,{children:"String"}),"\u3001\u88c5\u7bb1\u7c7b\u578b\u3001\u65f6\u95f4\u7c7b\u578b\u9664\u5916\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Polymorphism"}),"\uff1a\u6240\u6709\u975e final \u7c7b\u9ed8\u8ba4\u652f\u6301\u591a\u6001"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728 Native \u6a21\u5f0f\u4e0b\uff0c\u901a\u5e38",(0,r.jsx)(e.strong,{children:"\u4e0d\u9700\u8981\u989d\u5916\u5b57\u6bb5\u6ce8\u89e3"}),"\uff0c\u9664\u975e\u4f60\u5e0c\u671b\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7528\u5b57\u6bb5 ID \u964d\u4f4e\u4f53\u79ef"}),"\n",(0,r.jsx)(e.li,{children:"\u5173\u95ed\u4e0d\u5fc5\u8981\u7684 ref \u8ddf\u8e2a\u4ee5\u4f18\u5316\u6027\u80fd"}),"\n",(0,r.jsx)(e.li,{children:"\u5bf9\u7279\u5b9a\u5b57\u6bb5\u7cbe\u786e\u63a7\u5236\u6574\u6570\u7f16\u7801"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"// Native mode: works without any annotations\npublic class User {\n    private long id;\n    private String name;\n    private List<String> tags;  // Nullable and ref-tracked by default\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"xlang-\u6a21\u5f0f\u8de8\u8bed\u8a00",children:"Xlang \u6a21\u5f0f\uff08\u8de8\u8bed\u8a00\uff09"}),"\n",(0,r.jsx)(e.p,{children:"\u7531\u4e8e\u4e0d\u540c\u8bed\u8a00\u7c7b\u578b\u7cfb\u7edf\u5dee\u5f02\uff0cXlang \u6a21\u5f0f\u9ed8\u8ba4\u503c\u66f4\u4e25\u683c\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Nullable"}),"\uff1a\u5b57\u6bb5\u9ed8\u8ba4\u4e0d\u53ef\u7a7a\uff08",(0,r.jsx)(e.code,{children:"nullable = false"}),"\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Ref tracking"}),"\uff1a\u9ed8\u8ba4\u5173\u95ed\uff08",(0,r.jsx)(e.code,{children:"ref = false"}),"\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Polymorphism"}),"\uff1a\u5177\u4f53\u7c7b\u578b\u9ed8\u8ba4\u4e0d\u5199\u591a\u6001\u7c7b\u578b\u4fe1\u606f"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u5728 Xlang \u6a21\u5f0f\u4e0b\uff0c\u4ee5\u4e0b\u60c5\u51b5\u9700\u8981\u663e\u5f0f\u914d\u7f6e\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5b57\u6bb5\u53ef\u80fd\u4e3a null\uff08\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"nullable = true"}),"\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5b57\u6bb5\u9700\u8981\u5171\u4eab/\u5faa\u73af\u5f15\u7528\u8bed\u4e49\uff08\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"ref = true"}),"\uff09"]}),"\n",(0,r.jsx)(e.li,{children:"\u6574\u6570\u7c7b\u578b\u9700\u8981\u4e3a\u8de8\u8bed\u8a00\u517c\u5bb9\u6307\u5b9a\u7f16\u7801"}),"\n",(0,r.jsx)(e.li,{children:"\u4f60\u5e0c\u671b\u51cf\u5c11\u5143\u4fe1\u606f\u5927\u5c0f\uff08\u4f7f\u7528\u5b57\u6bb5 ID\uff09"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"// Xlang mode: explicit configuration required for nullable/ref fields\npublic class User {\n    @ForyField(id = 0)\n    private long id;\n\n    @ForyField(id = 1)\n    private String name;\n\n    @ForyField(id = 2, nullable = true)  // Must declare nullable\n    private String email;\n\n    @ForyField(id = 3, ref = true, nullable = true)  // Must declare ref for shared objects\n    private User friend;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u9ed8\u8ba4\u503c\u6c47\u603b",children:"\u9ed8\u8ba4\u503c\u6c47\u603b"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u9009\u9879"}),(0,r.jsx)(e.th,{children:"Native \u6a21\u5f0f\u9ed8\u8ba4\u503c"}),(0,r.jsx)(e.th,{children:"Xlang \u6a21\u5f0f\u9ed8\u8ba4\u503c"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"nullable"})}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"true"}),"\uff08\u5f15\u7528\u7c7b\u578b\uff09"]}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"false"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"ref"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"true"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"false"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"dynamic"})}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"true"}),"\uff08\u975e final \u7c7b\uff09"]}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"AUTO"}),"\uff08\u5177\u4f53\u7c7b\u578b\u901a\u5e38\u6309\u975e\u52a8\u6001\u5904\u7406\uff09"]})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u914d\u7f6e\u5b57\u6bb5 ID"}),"\uff1a\u517c\u5bb9\u6a21\u5f0f\u4e0b\u5efa\u8bae\u914d\u7f6e\uff0c\u964d\u4f4e\u5e8f\u5217\u5316\u6210\u672c"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u53ef\u7a7a\u5b57\u6bb5\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"nullable = true"})]}),"\uff1a\u5bf9\u53ef\u4e3a null \u7684\u5b57\u6bb5\u5fc5\u987b\u663e\u5f0f\u58f0\u660e"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u5171\u4eab\u5bf9\u8c61\u5f00\u542f ",(0,r.jsx)(e.code,{children:"ref"})]}),"\uff1a\u5bf9\u8c61\u5171\u4eab\u6216\u5faa\u73af\u65f6\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"ref = true"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsxs)(e.strong,{children:["\u654f\u611f\u5b57\u6bb5\u7528 ",(0,r.jsx)(e.code,{children:"@Ignore"})," \u6216 ",(0,r.jsx)(e.code,{children:"transient"})]}),"\uff1a\u5982\u5bc6\u7801\u3001\u4ee4\u724c\u3001\u5185\u90e8\u72b6\u6001"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u9009\u62e9\u5408\u9002\u7f16\u7801"}),"\uff1a\u5c0f\u503c\u7528 ",(0,r.jsx)(e.code,{children:"varint"}),"\uff0c\u5168\u8303\u56f4\u503c\u7528 ",(0,r.jsx)(e.code,{children:"fixed"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u4fdd\u6301 ID \u7a33\u5b9a"}),"\uff1a\u4e00\u65e6\u5206\u914d\uff0c\u4e0d\u8981\u968f\u610f\u6539\u52a8\u5b57\u6bb5 ID"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u8de8\u8bed\u8a00\u573a\u666f\u663e\u5f0f\u65e0\u7b26\u53f7\u7c7b\u578b"}),"\uff1a\u4e0e Rust\u3001Go\u3001C++ \u4e92\u64cd\u4f5c\u65f6\u5c24\u5176\u91cd\u8981"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6ce8\u89e3\u901f\u67e5",children:"\u6ce8\u89e3\u901f\u67e5"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u6ce8\u89e3"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@ForyField(id = N)"})}),(0,r.jsx)(e.td,{children:"\u914d\u7f6e\u5b57\u6bb5 tag ID\uff0c\u51cf\u5c11\u5143\u4fe1\u606f\u5f00\u9500"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@ForyField(nullable = true)"})}),(0,r.jsx)(e.td,{children:"\u5c06\u5b57\u6bb5\u6807\u8bb0\u4e3a\u53ef\u7a7a"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@ForyField(ref = true)"})}),(0,r.jsx)(e.td,{children:"\u4e3a\u5b57\u6bb5\u542f\u7528\u5f15\u7528\u8ddf\u8e2a"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@ForyField(dynamic = ...)"})}),(0,r.jsx)(e.td,{children:"\u63a7\u5236 struct \u5b57\u6bb5\u591a\u6001\u884c\u4e3a"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Ignore"})}),(0,r.jsx)(e.td,{children:"\u5c06\u5b57\u6bb5\u6392\u9664\u5728\u5e8f\u5217\u5316\u4e4b\u5916"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int32Type(compress = ...)"})}),(0,r.jsx)(e.td,{children:"32 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u7f16\u7801"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Int64Type(encoding = ...)"})}),(0,r.jsx)(e.td,{children:"64 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u7f16\u7801"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint8Type"})}),(0,r.jsx)(e.td,{children:"8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint16Type"})}),(0,r.jsx)(e.td,{children:"16 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint32Type(compress = ...)"})}),(0,r.jsx)(e.td,{children:"32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u7f16\u7801"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"@Uint64Type(encoding = ...)"})}),(0,r.jsx)(e.td,{children:"64 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u7f16\u7801"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u76f8\u5173\u4e3b\u9898",children:"\u76f8\u5173\u4e3b\u9898"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"basic_serialization",children:"\u57fa\u7840\u5e8f\u5217\u5316"})," - \u5feb\u901f\u4e0a\u624b Fory \u5e8f\u5217\u5316"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"schema_evolution",children:"Schema \u6f14\u8fdb"})," - \u517c\u5bb9\u6a21\u5f0f\u4e0e schema \u6f14\u8fdb"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"cross_language",children:"\u8de8\u8bed\u8a00"})," - \u4e0e Python\u3001Rust\u3001C++\u3001Go \u4e92\u64cd\u4f5c"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,d.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},11151:(n,e,i)=>{i.d(e,{Z:()=>c,a:()=>s});var r=i(67294);const d={},l=r.createContext(d);function s(n){const e=r.useContext(l);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:s(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);