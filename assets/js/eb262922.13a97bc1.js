"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[21706],{28132:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var r=n(85893),t=n(11151);const s={title:"Custom Serializers",sidebar_position:4,id:"custom_serializers",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,a={id:"guide/csharp/custom_serializers",title:"Custom Serializers",description:"Use custom serializers when a type is not generated with [ForyObject] or requires specialized encoding.",source:"@site/docs/guide/csharp/custom-serializers.md",sourceDirName:"guide/csharp",slug:"/guide/csharp/custom_serializers",permalink:"/docs/next/guide/csharp/custom_serializers",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/csharp/custom-serializers.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Custom Serializers",sidebar_position:4,id:"custom_serializers",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Type Registration",permalink:"/docs/next/guide/csharp/type_registration"},next:{title:"Field Configuration",permalink:"/docs/next/guide/csharp/field_configuration"}},l={},c=[{value:"Implement <code>Serializer&lt;T&gt;</code>",id:"implement-serializert",level:2},{value:"Register the Serializer",id:"register-the-serializer",level:2},{value:"Serializer Behavior Notes",id:"serializer-behavior-notes",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.p,{children:["Use custom serializers when a type is not generated with ",(0,r.jsx)(i.code,{children:"[ForyObject]"})," or requires specialized encoding."]}),"\n",(0,r.jsxs)(i.h2,{id:"implement-serializert",children:["Implement ",(0,r.jsx)(i.code,{children:"Serializer<T>"})]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"using Apache.Fory;\n\npublic sealed class Point\n{\n    public int X { get; set; }\n    public int Y { get; set; }\n}\n\npublic sealed class PointSerializer : Serializer<Point>\n{\n    public override Point DefaultValue => new();\n\n    public override void WriteData(WriteContext context, in Point value, bool hasGenerics)\n    {\n        context.Writer.WriteVarInt32(value.X);\n        context.Writer.WriteVarInt32(value.Y);\n    }\n\n    public override Point ReadData(ReadContext context)\n    {\n        return new Point\n        {\n            X = context.Reader.ReadVarInt32(),\n            Y = context.Reader.ReadVarInt32(),\n        };\n    }\n}\n"})}),"\n",(0,r.jsx)(i.h2,{id:"register-the-serializer",children:"Register the Serializer"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"Fory fory = Fory.Builder().Build();\nfory.Register<Point, PointSerializer>(200);\n\nPoint value = new() { X = 10, Y = 20 };\nbyte[] payload = fory.Serialize(value);\nPoint decoded = fory.Deserialize<Point>(payload);\n"})}),"\n",(0,r.jsx)(i.h2,{id:"serializer-behavior-notes",children:"Serializer Behavior Notes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"WriteData"})," / ",(0,r.jsx)(i.code,{children:"ReadData"})," only handle payload content."]}),"\n",(0,r.jsxs)(i.li,{children:["Ref flags and type info are handled by base ",(0,r.jsx)(i.code,{children:"Serializer<T>.Write"})," / ",(0,r.jsx)(i.code,{children:"Read"})," unless overridden."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"DefaultValue"})," is used for null/default fallback paths."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Keep serializers deterministic and symmetric."}),"\n",(0,r.jsx)(i.li,{children:"Use varint/fixed/tagged encoding intentionally for integer-heavy payloads."}),"\n",(0,r.jsx)(i.li,{children:"Register custom serializers on all reader/writer peers."}),"\n",(0,r.jsxs)(i.li,{children:["Prefer generated ",(0,r.jsx)(i.code,{children:"[ForyObject]"})," serializers for normal domain models."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/docs/next/guide/csharp/type_registration",children:"Type Registration"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/docs/next/guide/csharp/field_configuration",children:"Field Configuration"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/docs/next/guide/csharp/troubleshooting",children:"Troubleshooting"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,i,n)=>{n.d(i,{Z:()=>a,a:()=>o});var r=n(67294);const t={},s=r.createContext(t);function o(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);