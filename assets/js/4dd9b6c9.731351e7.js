"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[78650],{8150:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var t=n(85893),s=n(11151);const o={title:"Troubleshooting",sidebar_position:11,id:"troubleshooting",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},r=void 0,a={id:"guide/swift/troubleshooting",title:"Troubleshooting",description:"This page covers common Swift issues and how to debug them.",source:"@site/docs/guide/swift/troubleshooting.md",sourceDirName:"guide/swift",slug:"/guide/swift/troubleshooting",permalink:"/docs/next/guide/swift/troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/swift/troubleshooting.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Troubleshooting",sidebar_position:11,id:"troubleshooting",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Row Format",permalink:"/docs/next/guide/swift/row_format"},next:{title:"Scala Serialization Guide",permalink:"/docs/next/guide/scala/"}},d={},c=[{value:"Common Runtime Errors",id:"common-runtime-errors",level:2},{value:"<code>Type not registered: ...</code>",id:"type-not-registered-",level:3},{value:"<code>Type mismatch: expected ..., got ...</code>",id:"type-mismatch-expected--got-",level:3},{value:"<code>Invalid data: xlang bitmap mismatch</code>",id:"invalid-data-xlang-bitmap-mismatch",level:3},{value:"<code>Invalid data: class version hash mismatch</code>",id:"invalid-data-class-version-hash-mismatch",level:3},{value:"Common Macro-time Errors",id:"common-macro-time-errors",level:2},{value:"<code>@ForyObject requires explicit types for stored properties</code>",id:"foryobject-requires-explicit-types-for-stored-properties",level:3},{value:"<code>@ForyObject enum associated values cannot have default values</code>",id:"foryobject-enum-associated-values-cannot-have-default-values",level:3},{value:"<code>Set&lt;...&gt; with Any elements is not supported by @ForyObject yet</code>",id:"set-with-any-elements-is-not-supported-by-foryobject-yet",level:3},{value:"<code>Dictionary&lt;..., ...&gt; with Any values is only supported for String, Int32, or AnyHashable keys</code>",id:"dictionary--with-any-values-is-only-supported-for-string-int32-or-anyhashable-keys",level:3},{value:"Debugging Commands",id:"debugging-commands",level:2}];function l(e){const i={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.p,{children:"This page covers common Swift issues and how to debug them."}),"\n",(0,t.jsx)(i.h2,{id:"common-runtime-errors",children:"Common Runtime Errors"}),"\n",(0,t.jsx)(i.h3,{id:"type-not-registered-",children:(0,t.jsx)(i.code,{children:"Type not registered: ..."})}),"\n",(0,t.jsxs)(i.p,{children:["Cause: user type was not registered on the current ",(0,t.jsx)(i.code,{children:"Fory"})," instance."]}),"\n",(0,t.jsx)(i.p,{children:"Fix:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-swift",children:"fory.register(MyType.self, id: 100)\n"})}),"\n",(0,t.jsx)(i.h3,{id:"type-mismatch-expected--got-",children:(0,t.jsx)(i.code,{children:"Type mismatch: expected ..., got ..."})}),"\n",(0,t.jsx)(i.p,{children:"Cause: registration mapping or field type info differs across peers."}),"\n",(0,t.jsx)(i.p,{children:"Fix:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Ensure both sides register the same type ID/name mapping"}),"\n",(0,t.jsx)(i.li,{children:"Verify field type compatibility"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"invalid-data-xlang-bitmap-mismatch",children:(0,t.jsx)(i.code,{children:"Invalid data: xlang bitmap mismatch"})}),"\n",(0,t.jsxs)(i.p,{children:["Cause: serializer and deserializer use different ",(0,t.jsx)(i.code,{children:"xlang"})," settings."]}),"\n",(0,t.jsxs)(i.p,{children:["Fix: configure both sides with matching ",(0,t.jsx)(i.code,{children:"xlang"})," mode."]}),"\n",(0,t.jsx)(i.h3,{id:"invalid-data-class-version-hash-mismatch",children:(0,t.jsx)(i.code,{children:"Invalid data: class version hash mismatch"})}),"\n",(0,t.jsxs)(i.p,{children:["Cause: schema changed while ",(0,t.jsx)(i.code,{children:"compatible=false"}),"."]}),"\n",(0,t.jsx)(i.p,{children:"Fix:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Enable compatible mode for evolving schemas"}),"\n",(0,t.jsx)(i.li,{children:"Or keep strict schema parity with schema-consistent mode"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"common-macro-time-errors",children:"Common Macro-time Errors"}),"\n",(0,t.jsx)(i.h3,{id:"foryobject-requires-explicit-types-for-stored-properties",children:(0,t.jsx)(i.code,{children:"@ForyObject requires explicit types for stored properties"})}),"\n",(0,t.jsx)(i.p,{children:"Add explicit type annotations to stored properties."}),"\n",(0,t.jsx)(i.h3,{id:"foryobject-enum-associated-values-cannot-have-default-values",children:(0,t.jsx)(i.code,{children:"@ForyObject enum associated values cannot have default values"})}),"\n",(0,t.jsx)(i.p,{children:"Remove default values from enum case associated values."}),"\n",(0,t.jsx)(i.h3,{id:"set-with-any-elements-is-not-supported-by-foryobject-yet",children:(0,t.jsx)(i.code,{children:"Set<...> with Any elements is not supported by @ForyObject yet"})}),"\n",(0,t.jsxs)(i.p,{children:["Use ",(0,t.jsx)(i.code,{children:"[Any]"})," or a typed set instead."]}),"\n",(0,t.jsx)(i.h3,{id:"dictionary--with-any-values-is-only-supported-for-string-int32-or-anyhashable-keys",children:(0,t.jsx)(i.code,{children:"Dictionary<..., ...> with Any values is only supported for String, Int32, or AnyHashable keys"})}),"\n",(0,t.jsxs)(i.p,{children:["Switch key type to ",(0,t.jsx)(i.code,{children:"String"}),", ",(0,t.jsx)(i.code,{children:"Int32"}),", or ",(0,t.jsx)(i.code,{children:"AnyHashable"}),", or avoid dynamic ",(0,t.jsx)(i.code,{children:"Any"})," map values."]}),"\n",(0,t.jsx)(i.h2,{id:"debugging-commands",children:"Debugging Commands"}),"\n",(0,t.jsx)(i.p,{children:"Run Swift tests:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"cd swift\nENABLE_FORY_DEBUG_OUTPUT=1 swift test\n"})}),"\n",(0,t.jsx)(i.p,{children:"Run Java-driven Swift xlang tests:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"cd java/fory-core\nENABLE_FORY_DEBUG_OUTPUT=1 FORY_SWIFT_JAVA_CI=1 mvn -T16 test -Dtest=org.apache.fory.xlang.SwiftXlangTest\n"})})]})}function h(e={}){const{wrapper:i}={...(0,s.a)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},11151:(e,i,n)=>{n.d(i,{Z:()=>a,a:()=>r});var t=n(67294);const s={},o=t.createContext(s);function r(e){const i=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:i},e.children)}}}]);