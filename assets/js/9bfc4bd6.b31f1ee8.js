"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[91663],{59848:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var s=i(85893),r=i(11151);const t={title:"Configuration",sidebar_position:1,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,a={id:"guide/python/configuration",title:"Configuration",description:"This page covers Fory configuration parameters and language modes.",source:"@site/versioned_docs/version-0.14/guide/python/configuration.md",sourceDirName:"guide/python",slug:"/guide/python/configuration",permalink:"/docs/0.14/guide/python/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/python/configuration.md",tags:[],version:"0.14",sidebarPosition:1,frontMatter:{title:"Configuration",sidebar_position:1,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Python Serialization Guide",permalink:"/docs/0.14/guide/python/"},next:{title:"Basic Serialization",permalink:"/docs/0.14/guide/python/basic_serialization"}},d={},l=[{value:"Fory Class",id:"fory-class",level:2},{value:"ThreadSafeFory Class",id:"threadsafefory-class",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Key Methods",id:"key-methods",level:2},{value:"Language Modes Comparison",id:"language-modes-comparison",level:2},{value:"Python Mode (<code>xlang=False</code>)",id:"python-mode-xlangfalse",level:2},{value:"Cross-Language Mode (<code>xlang=True</code>)",id:"cross-language-mode-xlangtrue",level:2},{value:"Example Configurations",id:"example-configurations",level:2},{value:"Production Configuration",id:"production-configuration",level:3},{value:"Development Configuration",id:"development-configuration",level:3},{value:"Related Topics",id:"related-topics",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This page covers Fory configuration parameters and language modes."}),"\n",(0,s.jsx)(n.h2,{id:"fory-class",children:"Fory Class"}),"\n",(0,s.jsx)(n.p,{children:"The main serialization interface:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class Fory:\n    def __init__(\n        self,\n        xlang: bool = False,\n        ref: bool = False,\n        strict: bool = True,\n        compatible: bool = False,\n        max_depth: int = 50\n    )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"threadsafefory-class",children:"ThreadSafeFory Class"}),"\n",(0,s.jsx)(n.p,{children:"Thread-safe serialization interface using thread-local storage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ThreadSafeFory:\n    def __init__(\n        self,\n        xlang: bool = False,\n        ref: bool = False,\n        strict: bool = True,\n        compatible: bool = False,\n        max_depth: int = 50\n    )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"xlang"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"False"})}),(0,s.jsxs)(n.td,{children:["Enable cross-language serialization. When ",(0,s.jsx)(n.code,{children:"False"}),", enables Python-native mode supporting all Python objects. When ",(0,s.jsx)(n.code,{children:"True"}),", enables cross-language mode compatible with Java, Go, Rust, etc."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ref"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"False"})}),(0,s.jsx)(n.td,{children:"Enable reference tracking for shared/circular references. Disable for better performance if your data has no shared references."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"strict"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsxs)(n.td,{children:["Require type registration for security. ",(0,s.jsx)(n.strong,{children:"Highly recommended"})," for production. Only disable in trusted environments."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"compatible"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"False"})}),(0,s.jsx)(n.td,{children:"Enable schema evolution in cross-language mode, allowing fields to be added/removed while maintaining compatibility."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"max_depth"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"50"})}),(0,s.jsx)(n.td,{children:"Maximum deserialization depth for security, preventing stack overflow attacks."})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"key-methods",children:"Key Methods"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Serialization (serialize/deserialize are identical to dumps/loads)\ndata: bytes = fory.serialize(obj)\nobj = fory.deserialize(data)\n\n# Alternative API (aliases)\ndata: bytes = fory.dumps(obj)\nobj = fory.loads(data)\n\n# Type registration by id (for Python mode)\nfory.register(MyClass, type_id=123)\nfory.register(MyClass, type_id=123, serializer=custom_serializer)\n\n# Type registration by name (for cross-language mode)\nfory.register(MyClass, typename="my.package.MyClass")\nfory.register(MyClass, typename="my.package.MyClass", serializer=custom_serializer)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"language-modes-comparison",children:"Language Modes Comparison"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsxs)(n.th,{children:["Python Mode (",(0,s.jsx)(n.code,{children:"xlang=False"}),")"]}),(0,s.jsxs)(n.th,{children:["Cross-Language Mode (",(0,s.jsx)(n.code,{children:"xlang=True"}),")"]})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Use Case"})}),(0,s.jsx)(n.td,{children:"Pure Python applications"}),(0,s.jsx)(n.td,{children:"Multi-language systems"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Compatibility"})}),(0,s.jsx)(n.td,{children:"Python only"}),(0,s.jsx)(n.td,{children:"Java, Go, Rust, C++, JavaScript, etc."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Supported Types"})}),(0,s.jsx)(n.td,{children:"All Python types"}),(0,s.jsx)(n.td,{children:"Cross-language compatible types only"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Functions/Lambdas"})}),(0,s.jsx)(n.td,{children:"\u2713 Supported"}),(0,s.jsx)(n.td,{children:"\u2717 Not allowed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Local Classes"})}),(0,s.jsx)(n.td,{children:"\u2713 Supported"}),(0,s.jsx)(n.td,{children:"\u2717 Not allowed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Dynamic Classes"})}),(0,s.jsx)(n.td,{children:"\u2713 Supported"}),(0,s.jsx)(n.td,{children:"\u2717 Not allowed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Schema Evolution"})}),(0,s.jsxs)(n.td,{children:["\u2713 Supported (with ",(0,s.jsx)(n.code,{children:"compatible=True"}),")"]}),(0,s.jsxs)(n.td,{children:["\u2713 Supported (with ",(0,s.jsx)(n.code,{children:"compatible=True"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Performance"})}),(0,s.jsx)(n.td,{children:"Extremely fast"}),(0,s.jsx)(n.td,{children:"Very fast"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Data Size"})}),(0,s.jsx)(n.td,{children:"Compact"}),(0,s.jsx)(n.td,{children:"Compact with type metadata"})]})]})]}),"\n",(0,s.jsxs)(n.h2,{id:"python-mode-xlangfalse",children:["Python Mode (",(0,s.jsx)(n.code,{children:"xlang=False"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"Python mode supports all Python types including functions, classes, and closures:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import pyfory\n\n# Full Python compatibility mode\nfory = pyfory.Fory(xlang=False, ref=True, strict=False)\n\n# Supports ALL Python objects:\ndata = fory.dumps({\n    'function': lambda x: x * 2,        # Functions and lambdas\n    'class': type('Dynamic', (), {}),    # Dynamic classes\n    'method': str.upper,                # Methods\n    'nested': {'circular_ref': None}    # Circular references (when ref=True)\n})\n\n# Drop-in replacement for pickle/cloudpickle\nimport pickle\nobj = [1, 2, {\"nested\": [3, 4]}]\nassert fory.loads(fory.dumps(obj)) == pickle.loads(pickle.dumps(obj))\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"cross-language-mode-xlangtrue",children:["Cross-Language Mode (",(0,s.jsx)(n.code,{children:"xlang=True"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"Cross-language mode restricts types to those compatible across all Fory implementations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import pyfory\n\n# Cross-language compatibility mode\nf = pyfory.Fory(xlang=True, ref=True)\n\n# Only supports cross-language compatible types\nf.register(MyDataClass, typename="com.example.MyDataClass")\n\n# Data can be read by Java, Go, Rust, etc.\ndata = f.serialize(MyDataClass(field1="value", field2=42))\n'})}),"\n",(0,s.jsx)(n.h2,{id:"example-configurations",children:"Example Configurations"}),"\n",(0,s.jsx)(n.h3,{id:"production-configuration",children:"Production Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import pyfory\n\n# Recommended settings for production\nfory = pyfory.Fory(\n    xlang=False,        # Use True if you need cross-language support\n    ref=False,          # Enable if you have shared/circular references\n    strict=True,        # CRITICAL: Always True in production\n    compatible=False,   # Enable only if you need schema evolution\n    max_depth=20        # Adjust based on your data structure depth\n)\n\n# Register all types upfront\nfory.register(UserModel, type_id=100)\nfory.register(OrderModel, type_id=101)\nfory.register(ProductModel, type_id=102)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"development-configuration",children:"Development Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import pyfory\n\n# Development settings (more permissive)\nfory = pyfory.Fory(\n    xlang=False,\n    ref=True,\n    strict=False,    # Allow any type for development\n    max_depth=1000   # Higher limit for development\n)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/0.14/guide/python/basic_serialization",children:"Basic Serialization"})," - Using configured Fory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/0.14/guide/python/type_registration",children:"Type Registration"})," - Registration patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/0.14/guide/python/security",children:"Security"})," - Security best practices"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var s=i(67294);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);