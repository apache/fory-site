"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[19085],{4058:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var r=n(85893),a=n(11151);const t={title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},s=void 0,o={id:"guide/java/basic_serialization",title:"Basic Serialization",description:"This page covers basic serialization patterns and Fory instance creation.",source:"@site/versioned_docs/version-0.14/guide/java/basic-serialization.md",sourceDirName:"guide/java",slug:"/guide/java/basic_serialization",permalink:"/docs/0.14/guide/java/basic_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/java/basic-serialization.md",tags:[],version:"0.14",sidebarPosition:2,frontMatter:{title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Configuration Options",permalink:"/docs/0.14/guide/java/configuration"},next:{title:"Type Registration & Security",permalink:"/docs/0.14/guide/java/type_registration"}},l={},c=[{value:"Creating Fory Instances",id:"creating-fory-instances",level:2},{value:"Single-Thread Fory",id:"single-thread-fory",level:3},{value:"Thread-Safe Fory",id:"thread-safe-fory",level:3},{value:"Object Deep Copy",id:"object-deep-copy",level:2},{value:"With Reference Tracking",id:"with-reference-tracking",level:3},{value:"Without Reference Tracking (Better Performance)",id:"without-reference-tracking-better-performance",level:3},{value:"Serialization APIs",id:"serialization-apis",level:2},{value:"Basic Serialize/Deserialize",id:"basic-serializedeserialize",level:3},{value:"Serialize/Deserialize with Type",id:"serializedeserialize-with-type",level:3},{value:"Serialize/Deserialize with Type Info",id:"serializedeserialize-with-type-info",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{children:"This page covers basic serialization patterns and Fory instance creation."}),"\n",(0,r.jsx)(i.h2,{id:"creating-fory-instances",children:"Creating Fory Instances"}),"\n",(0,r.jsx)(i.h3,{id:"single-thread-fory",children:"Single-Thread Fory"}),"\n",(0,r.jsx)(i.p,{children:"For single-threaded applications:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"Fory fory = Fory.builder()\n  .withLanguage(Language.JAVA)\n  // enable reference tracking for shared/circular reference.\n  // Disable it will have better performance if no duplicate reference.\n  .withRefTracking(false)\n  .withCompatibleMode(CompatibleMode.SCHEMA_CONSISTENT)\n  // enable type forward/backward compatibility\n  // disable it for small size and better performance.\n  // .withCompatibleMode(CompatibleMode.COMPATIBLE)\n  // enable async multi-threaded compilation.\n  .withAsyncCompilation(true)\n  .build();\nbyte[] bytes = fory.serialize(object);\nSystem.out.println(fory.deserialize(bytes));\n"})}),"\n",(0,r.jsx)(i.h3,{id:"thread-safe-fory",children:"Thread-Safe Fory"}),"\n",(0,r.jsx)(i.p,{children:"For multi-threaded applications:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"ThreadSafeFory fory = Fory.builder()\n  .withLanguage(Language.JAVA)\n  // enable reference tracking for shared/circular reference.\n  // Disable it will have better performance if no duplicate reference.\n  .withRefTracking(false)\n  // compress int for smaller size\n  // .withIntCompressed(true)\n  // compress long for smaller size\n  // .withLongCompressed(true)\n  .withCompatibleMode(CompatibleMode.SCHEMA_CONSISTENT)\n  // enable type forward/backward compatibility\n  // disable it for small size and better performance.\n  // .withCompatibleMode(CompatibleMode.COMPATIBLE)\n  // enable async multi-threaded compilation.\n  .withAsyncCompilation(true)\n  .buildThreadSafeFory();\nbyte[] bytes = fory.serialize(object);\nSystem.out.println(fory.deserialize(bytes));\n"})}),"\n",(0,r.jsx)(i.h2,{id:"object-deep-copy",children:"Object Deep Copy"}),"\n",(0,r.jsx)(i.p,{children:"Fory provides efficient deep copy functionality:"}),"\n",(0,r.jsx)(i.h3,{id:"with-reference-tracking",children:"With Reference Tracking"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"Fory fory = Fory.builder().withRefCopy(true).build();\nSomeClass a = xxx;\nSomeClass copied = fory.copy(a);\n"})}),"\n",(0,r.jsx)(i.h3,{id:"without-reference-tracking-better-performance",children:"Without Reference Tracking (Better Performance)"}),"\n",(0,r.jsxs)(i.p,{children:["When disabled, deep copy will ignore circular and shared references. Same reference of an object graph will be copied into different objects in one ",(0,r.jsx)(i.code,{children:"Fory#copy"}),":"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"Fory fory = Fory.builder().withRefCopy(false).build();\nSomeClass a = xxx;\nSomeClass copied = fory.copy(a);\n"})}),"\n",(0,r.jsx)(i.h2,{id:"serialization-apis",children:"Serialization APIs"}),"\n",(0,r.jsx)(i.h3,{id:"basic-serializedeserialize",children:"Basic Serialize/Deserialize"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"// Serialize object to byte array\nbyte[] bytes = fory.serialize(object);\n\n// Deserialize byte array to object\nObject obj = fory.deserialize(bytes);\n"})}),"\n",(0,r.jsx)(i.h3,{id:"serializedeserialize-with-type",children:"Serialize/Deserialize with Type"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"// Serialize with explicit type\nbyte[] bytes = fory.serializeJavaObject(object);\n\n// Deserialize with expected type\nMyClass obj = fory.deserializeJavaObject(bytes, MyClass.class);\n"})}),"\n",(0,r.jsx)(i.h3,{id:"serializedeserialize-with-type-info",children:"Serialize/Deserialize with Type Info"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"// Serialize with type information\nbyte[] bytes = fory.serializeJavaObjectAndClass(object);\n\n// Deserialize with embedded type info\nObject obj = fory.deserializeJavaObjectAndClass(bytes);\n"})}),"\n",(0,r.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Reuse Fory instances"}),": Creating Fory is expensive, always reuse instances"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use appropriate thread safety"}),": Choose between single-thread and thread-safe based on your needs"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Register classes"}),": Register frequently used classes for better performance"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Configure reference tracking"}),": Disable if you don't have circular/shared references"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/configuration",children:"Configuration Options"})," - All ForyBuilder options"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/type_registration",children:"Type Registration"})," - Class registration"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/troubleshooting",children:"Troubleshooting"})," - Common API usage issues"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,a.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,i,n)=>{n.d(i,{Z:()=>o,a:()=>s});var r=n(67294);const a={},t=r.createContext(a);function s(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);