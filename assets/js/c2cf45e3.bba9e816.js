"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[16451],{47107:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var t=i(85893),s=i(11151);const r={title:"Configuration",sidebar_position:1,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,a={id:"guide/rust/configuration",title:"Configuration",description:"This page covers Fory configuration options and serialization modes.",source:"@site/docs/guide/rust/configuration.md",sourceDirName:"guide/rust",slug:"/guide/rust/configuration",permalink:"/docs/next/guide/rust/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/rust/configuration.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Configuration",sidebar_position:1,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Rust Serialization Guide",permalink:"/docs/next/guide/rust/"},next:{title:"Basic Serialization",permalink:"/docs/next/guide/rust/basic_serialization"}},d={},l=[{value:"Serialization Modes",id:"serialization-modes",level:2},{value:"SchemaConsistent Mode (Default)",id:"schemaconsistent-mode-default",level:3},{value:"Compatible Mode",id:"compatible-mode",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Maximum Dynamic Object Nesting Depth",id:"maximum-dynamic-object-nesting-depth",level:3},{value:"Cross-Language Mode",id:"cross-language-mode",level:3},{value:"Builder Pattern",id:"builder-pattern",level:2},{value:"Configuration Summary",id:"configuration-summary",level:2},{value:"Related Topics",id:"related-topics",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This page covers Fory configuration options and serialization modes."}),"\n",(0,t.jsx)(n.h2,{id:"serialization-modes",children:"Serialization Modes"}),"\n",(0,t.jsx)(n.p,{children:"Apache Fory\u2122 supports two serialization modes:"}),"\n",(0,t.jsx)(n.h3,{id:"schemaconsistent-mode-default",children:"SchemaConsistent Mode (Default)"}),"\n",(0,t.jsx)(n.p,{children:"Type declarations must match exactly between peers:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let fory = Fory::default(); // SchemaConsistent by default\n"})}),"\n",(0,t.jsx)(n.h3,{id:"compatible-mode",children:"Compatible Mode"}),"\n",(0,t.jsx)(n.p,{children:"Allows independent schema evolution:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let fory = Fory::default().compatible(true);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,t.jsx)(n.h3,{id:"maximum-dynamic-object-nesting-depth",children:"Maximum Dynamic Object Nesting Depth"}),"\n",(0,t.jsx)(n.p,{children:"Apache Fory\u2122 provides protection against stack overflow from deeply nested dynamic objects during deserialization. By default, the maximum nesting depth is set to 5 levels for trait objects and containers."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Default configuration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let fory = Fory::default(); // max_dyn_depth = 5\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Custom depth limit:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let fory = Fory::default().max_dyn_depth(10); // Allow up to 10 levels\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"When to adjust:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Increase"}),": For legitimate deeply nested data structures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Decrease"}),": For stricter security requirements or shallow data structures"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Protected types:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Box<dyn Any>"}),", ",(0,t.jsx)(n.code,{children:"Rc<dyn Any>"}),", ",(0,t.jsx)(n.code,{children:"Arc<dyn Any>"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Box<dyn Trait>"}),", ",(0,t.jsx)(n.code,{children:"Rc<dyn Trait>"}),", ",(0,t.jsx)(n.code,{children:"Arc<dyn Trait>"})," (trait objects)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RcWeak<T>"}),", ",(0,t.jsx)(n.code,{children:"ArcWeak<T>"})]}),"\n",(0,t.jsx)(n.li,{children:"Collection types (Vec, HashMap, HashSet)"}),"\n",(0,t.jsx)(n.li,{children:"Nested struct types in Compatible mode"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Note: Static data types (non-dynamic types) are secure by nature and not subject to depth limits, as their structure is known at compile time."}),"\n",(0,t.jsx)(n.h3,{id:"cross-language-mode",children:"Cross-Language Mode"}),"\n",(0,t.jsx)(n.p,{children:"Enable cross-language serialization:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let fory = Fory::default()\n    .compatible(true)\n    .xlang(true);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"builder-pattern",children:"Builder Pattern"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"use fory::Fory;\n\n// Default configuration\nlet fory = Fory::default();\n\n// Compatible mode for schema evolution\nlet fory = Fory::default().compatible(true);\n\n// Cross-language mode\nlet fory = Fory::default()\n    .compatible(true)\n    .xlang(true);\n\n// Custom depth limit\nlet fory = Fory::default().max_dyn_depth(10);\n\n// Combined configuration\nlet fory = Fory::default()\n    .compatible(true)\n    .xlang(true)\n    .max_dyn_depth(10);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-summary",children:"Configuration Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"compatible(bool)"})}),(0,t.jsx)(n.td,{children:"Enable schema evolution"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"xlang(bool)"})}),(0,t.jsx)(n.td,{children:"Enable cross-language mode"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"max_dyn_depth(u32)"})}),(0,t.jsx)(n.td,{children:"Maximum nesting depth for dynamic types"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"5"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/next/guide/rust/basic_serialization",children:"Basic Serialization"})," - Using configured Fory"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/next/guide/rust/schema_evolution",children:"Schema Evolution"})," - Compatible mode details"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/next/guide/rust/cross_language",children:"Cross-Language"})," - XLANG mode"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var t=i(67294);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);