"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[6417],{26533:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var a=r(85893),i=r(11151);const t={title:"NumPy & Pandas",sidebar_position:8,id:"numpy_integration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},s=void 0,o={id:"guide/python/numpy_integration",title:"NumPy & Pandas",description:"Fory natively supports numpy arrays and pandas DataFrame with optimized serialization.",source:"@site/versioned_docs/version-0.15/guide/python/numpy-integration.md",sourceDirName:"guide/python",slug:"/guide/python/numpy_integration",permalink:"/docs/guide/python/numpy_integration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/python/numpy-integration.md",tags:[],version:"0.15",sidebarPosition:8,frontMatter:{title:"NumPy & Pandas",sidebar_position:8,id:"numpy_integration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Out-of-Band Serialization",permalink:"/docs/guide/python/out_of_band"},next:{title:"Security Best Practices",permalink:"/docs/guide/python/security"}},d={},l=[{value:"NumPy Array Serialization",id:"numpy-array-serialization",level:2},{value:"Pandas DataFrames",id:"pandas-dataframes",level:2},{value:"Zero-Copy with Out-of-Band Buffers",id:"zero-copy-with-out-of-band-buffers",level:2},{value:"Supported Array Types",id:"supported-array-types",level:2},{value:"Related Topics",id:"related-topics",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Fory natively supports numpy arrays and pandas DataFrame with optimized serialization."}),"\n",(0,a.jsx)(n.h2,{id:"numpy-array-serialization",children:"NumPy Array Serialization"}),"\n",(0,a.jsx)(n.p,{children:"Large arrays use zero-copy when possible:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import pyfory\nimport numpy as np\n\nf = pyfory.Fory()\n\n# Numpy arrays are supported natively\narrays = {\n    'matrix': np.random.rand(1000, 1000),\n    'vector': np.arange(10000),\n    'bool_mask': np.random.choice([True, False], size=5000)\n}\n\ndata = f.serialize(arrays)\nresult = f.deserialize(data)\n\n# Zero-copy for compatible array types\nassert np.array_equal(arrays['matrix'], result['matrix'])\n"})}),"\n",(0,a.jsx)(n.h2,{id:"pandas-dataframes",children:"Pandas DataFrames"}),"\n",(0,a.jsx)(n.p,{children:"Fory can serialize Pandas DataFrames efficiently:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import pyfory\nimport pandas as pd\nimport numpy as np\n\nf = pyfory.Fory(xlang=False, ref=False, strict=False)\n\ndf = pd.DataFrame({\n    'a': np.arange(1000, dtype=np.float64),\n    'b': np.arange(1000, dtype=np.int64),\n    'c': ['text'] * 1000\n})\n\ndata = f.serialize(df)\nresult = f.deserialize(data)\n\nassert df.equals(result)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"zero-copy-with-out-of-band-buffers",children:"Zero-Copy with Out-of-Band Buffers"}),"\n",(0,a.jsx)(n.p,{children:"For maximum performance with large arrays, use out-of-band serialization:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import pyfory\nimport numpy as np\n\nf = pyfory.Fory(xlang=False, ref=False, strict=False)\n\n# Large array\narray = np.random.rand(10000, 1000)\n\n# Out-of-band for zero-copy\nbuffer_objects = []\ndata = f.serialize(array, buffer_callback=buffer_objects.append)\nbuffers = [obj.getbuffer() for obj in buffer_objects]\n\nresult = f.deserialize(data, buffers=buffers)\nassert np.array_equal(array, result)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"supported-array-types",children:"Supported Array Types"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"np.ndarray"})," (all dtypes)"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"np.matrix"})}),"\n",(0,a.jsx)(n.li,{children:"Structured arrays"}),"\n",(0,a.jsx)(n.li,{children:"Record arrays"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/docs/guide/python/out_of_band",children:"Out-of-Band Serialization"})," - Zero-copy buffers"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/docs/guide/python/basic_serialization",children:"Basic Serialization"})," - Standard usage"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>o,a:()=>s});var a=r(67294);const i={},t=a.createContext(i);function s(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);