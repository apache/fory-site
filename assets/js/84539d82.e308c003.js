"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[25826],{74235:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var i=s(85893),r=s(11151);const t={title:"Cross-Language Serialization",sidebar_position:8,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},a=void 0,o={id:"guide/rust/cross_language",title:"Cross-Language Serialization",description:"Apache Fory\u2122 supports seamless data exchange across multiple languages including Java, Python, C++, Go, and JavaScript.",source:"@site/docs/guide/rust/cross-language.md",sourceDirName:"guide/rust",slug:"/guide/rust/cross_language",permalink:"/docs/next/guide/rust/cross_language",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/rust/cross-language.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"Cross-Language Serialization",sidebar_position:8,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Schema Evolution",permalink:"/docs/next/guide/rust/schema_evolution"},next:{title:"Row Format",permalink:"/docs/next/guide/rust/row_format"}},l={},c=[{value:"Enable Cross-Language Mode",id:"enable-cross-language-mode",level:2},{value:"Type Registration for Cross-Language",id:"type-registration-for-cross-language",level:2},{value:"Register by ID",id:"register-by-id",level:3},{value:"Register by Namespace",id:"register-by-namespace",level:3},{value:"Cross-Language Example",id:"cross-language-example",level:2},{value:"Rust (Serializer)",id:"rust-serializer",level:3},{value:"Java (Deserializer)",id:"java-deserializer",level:3},{value:"Python (Deserializer)",id:"python-deserializer",level:3},{value:"Type Mapping",id:"type-mapping",level:2},{value:"Common Type Mappings",id:"common-type-mappings",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Apache Fory\u2122 supports seamless data exchange across multiple languages including Java, Python, C++, Go, and JavaScript."}),"\n",(0,i.jsx)(n.h2,{id:"enable-cross-language-mode",children:"Enable Cross-Language Mode"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use fory::Fory;\n\n// Enable cross-language mode\nlet mut fory = Fory::default()\n    .compatible(true)\n    .xlang(true);\n\n// Register types with consistent IDs across languages\nfory.register::<MyStruct>(100);\n\n// Or use namespace-based registration\nfory.register_by_namespace::<MyStruct>("com.example", "MyStruct");\n'})}),"\n",(0,i.jsx)(n.h2,{id:"type-registration-for-cross-language",children:"Type Registration for Cross-Language"}),"\n",(0,i.jsx)(n.h3,{id:"register-by-id",children:"Register by ID"}),"\n",(0,i.jsx)(n.p,{children:"For fast, compact serialization with consistent IDs across languages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"let mut fory = Fory::default()\n    .compatible(true)\n    .xlang(true);\n\nfory.register::<User>(100);  // Same ID in Java, Python, etc.\n"})}),"\n",(0,i.jsx)(n.h3,{id:"register-by-namespace",children:"Register by Namespace"}),"\n",(0,i.jsx)(n.p,{children:"For more flexible type naming:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'fory.register_by_namespace::<User>("com.example", "User");\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cross-language-example",children:"Cross-Language Example"}),"\n",(0,i.jsx)(n.h3,{id:"rust-serializer",children:"Rust (Serializer)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use fory::Fory;\nuse fory::ForyObject;\n\n#[derive(ForyObject)]\nstruct Person {\n    name: String,\n    age: i32,\n}\n\nlet mut fory = Fory::default()\n    .compatible(true)\n    .xlang(true);\n\nfory.register::<Person>(100);\n\nlet person = Person {\n    name: "Alice".to_string(),\n    age: 30,\n};\n\nlet bytes = fory.serialize(&person)?;\n// bytes can be deserialized by Java, Python, etc.\n'})}),"\n",(0,i.jsx)(n.h3,{id:"java-deserializer",children:"Java (Deserializer)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"import org.apache.fory.*;\nimport org.apache.fory.config.*;\n\npublic class Person {\n    public String name;\n    public int age;\n}\n\nFory fory = Fory.builder()\n    .withLanguage(Language.XLANG)\n    .withRefTracking(true)\n    .build();\n\nfory.register(Person.class, 100);  // Same ID as Rust\n\nPerson person = (Person) fory.deserialize(bytesFromRust);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"python-deserializer",children:"Python (Deserializer)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import pyfory\nfrom dataclasses import dataclass\n\n@dataclass\nclass Person:\n    name: str\n    age: pyfory.int32\n\nfory = pyfory.Fory(xlang=True, ref=True)\nfory.register_type(Person, type_id=100)  # Same ID as Rust\n\nperson = fory.deserialize(bytes_from_rust)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-mapping",children:"Type Mapping"}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/next/specification/xlang_type_mapping",children:"xlang_type_mapping.md"})," for complete type mapping across languages."]}),"\n",(0,i.jsx)(n.h3,{id:"common-type-mappings",children:"Common Type Mappings"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Rust"}),(0,i.jsx)(n.th,{children:"Java"}),(0,i.jsx)(n.th,{children:"Python"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"i32"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int32"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"i64"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"long"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int64"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"f32"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"float"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"float32"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"f64"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"double"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"float64"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Vec<T>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"List<T>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"List[T]"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HashMap<K,V>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Map<K,V>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Dict[K,V]"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Option<T>"})}),(0,i.jsxs)(n.td,{children:["nullable ",(0,i.jsx)(n.code,{children:"T"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Optional[T]"})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use consistent type IDs"})," across all languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable compatible mode"})," for schema evolution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Register all types"})," before serialization"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test cross-language"})," compatibility during development"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/next/specification/xlang_serialization_spec",children:"Cross-Language Serialization Specification"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/next/specification/xlang_type_mapping",children:"Type Mapping Reference"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/next/guide/java/cross_language",children:"Java Cross-Language Guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/next/guide/python/cross_language",children:"Python Cross-Language Guide"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/next/guide/rust/configuration",children:"Configuration"})," - XLANG mode configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/next/guide/rust/schema_evolution",children:"Schema Evolution"})," - Compatible mode"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/next/guide/rust/type_registration",children:"Type Registration"})," - Registration methods"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>a});var i=s(67294);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);