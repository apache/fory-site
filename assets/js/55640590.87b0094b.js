"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[56668],{83893:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var r=i(85893),s=i(11151);const a={title:"Type Serialization",sidebar_position:2,id:"type_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},l=void 0,t={id:"guide/scala/type_serialization",title:"Type Serialization",description:"This page covers serialization of Scala-specific types.",source:"@site/versioned_docs/version-0.15/guide/scala/type-serialization.md",sourceDirName:"guide/scala",slug:"/guide/scala/type_serialization",permalink:"/docs/guide/scala/type_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/scala/type-serialization.md",tags:[],version:"0.15",sidebarPosition:2,frontMatter:{title:"Type Serialization",sidebar_position:2,id:"type_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Fory Creation",permalink:"/docs/guide/scala/fory_creation"},next:{title:"Default Values",permalink:"/docs/guide/scala/default_values"}},o={},c=[{value:"Setup",id:"setup",level:2},{value:"Case Class",id:"case-class",level:2},{value:"POJO Class",id:"pojo-class",level:2},{value:"Object Singleton",id:"object-singleton",level:2},{value:"Collection",id:"collection",level:2},{value:"Tuple",id:"tuple",level:2},{value:"Enum",id:"enum",level:2},{value:"Scala 3 Enum",id:"scala-3-enum",level:3},{value:"Scala 2 Enumeration",id:"scala-2-enumeration",level:3},{value:"Option",id:"option",level:2},{value:"Either",id:"either",level:2},{value:"Nested Types",id:"nested-types",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This page covers serialization of Scala-specific types."}),"\n",(0,r.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.p,{children:"All examples assume the following setup:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:"import org.apache.fory.Fory\nimport org.apache.fory.serializer.scala.ScalaSerializers\n\nval fory = Fory.builder()\n  .withScalaOptimizationEnabled(true)\n  .build()\n\nScalaSerializers.registerSerializers(fory)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"case-class",children:"Case Class"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'case class Person(github: String, age: Int, id: Long)\n\nfory.register(classOf[Person])\n\nval p = Person("https://github.com/chaokunyang", 18, 1)\nprintln(fory.deserialize(fory.serialize(p)))\n'})}),"\n",(0,r.jsx)(n.h2,{id:"pojo-class",children:"POJO Class"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'class Foo(f1: Int, f2: String) {\n  override def toString: String = s"Foo($f1, $f2)"\n}\n\nfory.register(classOf[Foo])\n\nprintln(fory.deserialize(fory.serialize(new Foo(1, "chaokunyang"))))\n'})}),"\n",(0,r.jsx)(n.h2,{id:"object-singleton",children:"Object Singleton"}),"\n",(0,r.jsxs)(n.p,{children:["Scala ",(0,r.jsx)(n.code,{children:"object"})," singletons are serialized and deserialized to the same instance:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:"object MySingleton {\n  val value = 42\n}\n\nfory.register(MySingleton.getClass)\n\nval o1 = fory.deserialize(fory.serialize(MySingleton))\nval o2 = fory.deserialize(fory.serialize(MySingleton))\nprintln(o1 == o2) // true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"collection",children:"Collection"}),"\n",(0,r.jsx)(n.p,{children:"Scala collections are fully supported:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'val seq = Seq(1, 2)\nval list = List("a", "b")\nval map = Map("a" -> 1, "b" -> 2)\n\nprintln(fory.deserialize(fory.serialize(seq)))\nprintln(fory.deserialize(fory.serialize(list)))\nprintln(fory.deserialize(fory.serialize(map)))\n'})}),"\n",(0,r.jsx)(n.h2,{id:"tuple",children:"Tuple"}),"\n",(0,r.jsx)(n.p,{children:"All Scala tuple types (Tuple1 through Tuple22) are supported:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'val tuple2 = (100, 10000L)\nprintln(fory.deserialize(fory.serialize(tuple2)))\n\nval tuple4 = (100, 10000L, 10000L, "str")\nprintln(fory.deserialize(fory.serialize(tuple4)))\n'})}),"\n",(0,r.jsx)(n.h2,{id:"enum",children:"Enum"}),"\n",(0,r.jsx)(n.h3,{id:"scala-3-enum",children:"Scala 3 Enum"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:"enum Color { case Red, Green, Blue }\n\nfory.register(classOf[Color])\n\nprintln(fory.deserialize(fory.serialize(Color.Green)))\n"})}),"\n",(0,r.jsx)(n.h3,{id:"scala-2-enumeration",children:"Scala 2 Enumeration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'object ColorEnum extends Enumeration {\n  type ColorEnum = Value\n  val Red, Green, Blue = Value\n}\n\nfory.register(Class.forName("scala.Enumeration.Val"))\n\nprintln(fory.deserialize(fory.serialize(ColorEnum.Green)))\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": For Scala 2 Enumeration, you may need to register ",(0,r.jsx)(n.code,{children:"scala.Enumeration.Val"})," or enable reference tracking to avoid ",(0,r.jsx)(n.code,{children:"StackOverflowError"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"option",children:"Option"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:"val some: Option[Long] = Some(100)\nprintln(fory.deserialize(fory.serialize(some)))\n\nval none: Option[Long] = None\nprintln(fory.deserialize(fory.serialize(none)))\n"})}),"\n",(0,r.jsx)(n.h2,{id:"either",children:"Either"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'val right: Either[String, Int] = Right(42)\nprintln(fory.deserialize(fory.serialize(right)))\n\nval left: Either[String, Int] = Left("error")\nprintln(fory.deserialize(fory.serialize(left)))\n'})}),"\n",(0,r.jsx)(n.h2,{id:"nested-types",children:"Nested Types"}),"\n",(0,r.jsx)(n.p,{children:"Complex nested structures are fully supported:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-scala",children:'case class Address(street: String, city: String)\ncase class Company(name: String, address: Address)\ncase class Employee(name: String, company: Company, tags: List[String])\n\nfory.register(classOf[Address])\nfory.register(classOf[Company])\nfory.register(classOf[Employee])\n\nval employee = Employee(\n  "John",\n  Company("Acme", Address("123 Main St", "Springfield")),\n  List("developer", "scala")\n)\n\nprintln(fory.deserialize(fory.serialize(employee)))\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>t,a:()=>l});var r=i(67294);const s={},a=r.createContext(s);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);