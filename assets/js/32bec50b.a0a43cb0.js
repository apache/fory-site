"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[77512],{11544:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var s=i(85893),r=i(11151);const t={title:"Overview",sidebar_position:1,id:"index",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},l=void 0,d={id:"compiler/index",title:"Overview",description:"Fory IDL is a schema definition language for Apache Fory that enables type-safe",source:"@site/docs/compiler/index.md",sourceDirName:"compiler",slug:"/compiler/",permalink:"/docs/next/compiler/",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/compiler/index.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Overview",sidebar_position:1,id:"index",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Usage",permalink:"/docs/next/start/usage"},next:{title:"Schema IDL",permalink:"/docs/next/compiler/syntax"}},a={},c=[{value:"Example Schema",id:"example-schema",level:2},{value:"Why Fory IDL?",id:"why-fory-idl",level:2},{value:"Schema-First Development",id:"schema-first-development",level:3},{value:"Fory-Native Features",id:"fory-native-features",level:3},{value:"Low Integration Overhead",id:"low-integration-overhead",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Install the Compiler",id:"1-install-the-compiler",level:3},{value:"2. Write Your Schema",id:"2-write-your-schema",level:3},{value:"3. Generate Code",id:"3-generate-code",level:3},{value:"4. Use Generated Code",id:"4-use-generated-code",level:3},{value:"Documentation",id:"documentation",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Field Modifiers",id:"field-modifiers",level:3},{value:"Cross-Language Compatibility",id:"cross-language-compatibility",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Examples",id:"examples",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Fory IDL is a schema definition language for Apache Fory that enables type-safe\ncross-language serialization. Define your data structures once and generate\nnative data structure code for Java, Python, Go, Rust, C++, and C#."}),"\n",(0,s.jsx)(n.h2,{id:"example-schema",children:"Example Schema"}),"\n",(0,s.jsx)(n.p,{children:"Fory IDL provides a simple, intuitive syntax for defining cross-language data structures:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"package example;\n\nenum Status {\n    PENDING = 0;\n    ACTIVE = 1;\n    COMPLETED = 2;\n}\n\nmessage User {\n    string name = 1;\n    int32 age = 2;\n    optional string email = 3;\n    list<string> tags = 4;\n}\n\nmessage Item {\n    string sku = 1;\n    int32 quantity = 2;\n}\n\nmessage Order {\n    ref User customer = 1;\n    list<Item> items = 2;\n    Status status = 3;\n    map<string, int32> metadata = 4;\n}\n\nmessage Dog [id=104] {\n    string name = 1;\n    int32 bark_volume = 2;\n}\n\nmessage Cat [id=105] {\n    string name = 1;\n    int32 lives = 2;\n}\n\nunion Animal [id=106] {\n    Dog dog = 1;\n    Cat cat = 2;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"why-fory-idl",children:"Why Fory IDL?"}),"\n",(0,s.jsx)(n.h3,{id:"schema-first-development",children:"Schema-First Development"}),"\n",(0,s.jsx)(n.p,{children:"Define your data model once in Fory IDL and generate consistent, type-safe code across all languages. This ensures:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Safety"}),": Catch type errors at compile time, not runtime"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistency"}),": All languages use the same field names, types, and structures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Documentation"}),": Schema serves as living documentation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Evolution"}),": Managed schema changes across all implementations"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"fory-native-features",children:"Fory-Native Features"}),"\n",(0,s.jsx)(n.p,{children:"Unlike generic IDLs, Fory IDL is designed specifically for Fory serialization:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reference Tracking"}),": First-class support for shared and circular references via ",(0,s.jsx)(n.code,{children:"ref"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nullable Fields"}),": Explicit ",(0,s.jsx)(n.code,{children:"optional"})," modifier for nullable types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Registration"}),": Built-in support for both numeric IDs and namespace-based registration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Native Code Generation"}),": Generates idiomatic code with Fory annotations/macros"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"low-integration-overhead",children:"Low Integration Overhead"}),"\n",(0,s.jsx)(n.p,{children:"Generated code uses native language constructs:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Java: Plain POJOs with ",(0,s.jsx)(n.code,{children:"@ForyField"})," annotations"]}),"\n",(0,s.jsx)(n.li,{children:"Python: Dataclasses with type hints"}),"\n",(0,s.jsx)(n.li,{children:"Go: Structs with struct tags"}),"\n",(0,s.jsxs)(n.li,{children:["Rust: Structs with ",(0,s.jsx)(n.code,{children:"#[derive(ForyObject)]"})]}),"\n",(0,s.jsxs)(n.li,{children:["C++: Structs with ",(0,s.jsx)(n.code,{children:"FORY_STRUCT"})," macros"]}),"\n",(0,s.jsxs)(n.li,{children:["C#: Classes with ",(0,s.jsx)(n.code,{children:"[ForyObject]"})," and registration helpers"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.h3,{id:"1-install-the-compiler",children:"1. Install the Compiler"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install fory-compiler\n"})}),"\n",(0,s.jsx)(n.p,{children:"Or install from source:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd compiler\npip install -e .\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-write-your-schema",children:"2. Write Your Schema"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"example.fdl"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"package example;\n\nmessage Person {\n    string name = 1;\n    int32 age = 2;\n    optional string email = 3;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-generate-code",children:"3. Generate Code"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate for all languages\nforyc example.fdl --output ./generated\n\n# Generate for specific languages\nforyc example.fdl --lang java,python,csharp --output ./generated\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-use-generated-code",children:"4. Use Generated Code"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Java:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'Person person = new Person();\nperson.setName("Alice");\nperson.setAge(30);\nbyte[] data = person.toBytes();\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Python:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import pyfory\nfrom example import Person\n\nperson = Person(name="Alice", age=30)\ndata = bytes(person) # or `person.to_bytes()`\n'})}),"\n",(0,s.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Document"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/next/compiler/syntax",children:"Fory IDL Syntax"})}),(0,s.jsx)(n.td,{children:"Complete language syntax and grammar"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/next/compiler/syntax#type-system",children:"Type System"})}),(0,s.jsx)(n.td,{children:"Primitive types, collections, and type rules"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/next/compiler/compiler_guide",children:"Compiler Guide"})}),(0,s.jsx)(n.td,{children:"CLI options and build integration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/next/compiler/generated_code",children:"Generated Code"})}),(0,s.jsx)(n.td,{children:"Output format for each target language"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/next/compiler/protobuf_idl_support",children:"Protocol Buffers IDL Support"})}),(0,s.jsx)(n.td,{children:"Comparison with protobuf and migration guide"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/next/compiler/flatbuffers_idl",children:"FlatBuffers IDL Support"})}),(0,s.jsx)(n.td,{children:"FlatBuffers mapping rules and codegen differences"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"field-modifiers",children:"Field Modifiers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"optional"})}),": Field can be null/None"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"ref"})}),": Enable reference tracking for shared/circular references"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"list"})}),": Field is a list/array (alias: ",(0,s.jsx)(n.code,{children:"repeated"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"message Example {\n    optional string nullable = 1;\n    ref Node parent = 2;\n    list<int32> numbers = 3;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cross-language-compatibility",children:"Cross-Language Compatibility"}),"\n",(0,s.jsx)(n.p,{children:"Fory IDL types map to native types in each language:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Fory IDL Type"}),(0,s.jsx)(n.th,{children:"Java"}),(0,s.jsx)(n.th,{children:"Python"}),(0,s.jsx)(n.th,{children:"Go"}),(0,s.jsx)(n.th,{children:"Rust"}),(0,s.jsx)(n.th,{children:"C++"}),(0,s.jsx)(n.th,{children:"C#"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int32"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pyfory.int32"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int32"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"i32"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int32_t"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"String"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"str"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"String"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"std::string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/next/compiler/syntax#type-system",children:"Type System"})," for complete mappings."]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use meaningful package names"}),": Group related types together"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Assign type IDs for performance"}),": Numeric IDs are faster than name-based registration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reserve ID ranges"}),": Leave gaps for future additions (e.g., 100-199 for users, 200-299 for orders)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Use ",(0,s.jsx)(n.code,{children:"optional"})," explicitly"]}),": Make nullability clear in the schema"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Use ",(0,s.jsx)(n.code,{children:"ref"})," for shared objects"]}),": Enable reference tracking when objects are shared"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"https://github.com/apache/fory/tree/main/compiler/examples",children:"examples"})," directory for complete working examples."]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>d,a:()=>l});var s=i(67294);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);