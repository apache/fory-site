"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[18121],{51829:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var s=i(85893),r=i(11151);const l={title:"Field Configuration",sidebar_position:60,id:"struct_tags",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},t=void 0,d={id:"guide/go/struct_tags",title:"Field Configuration",description:"Fory Go uses struct tags to customize field-level serialization behavior. This allows fine-grained control over how individual fields are serialized.",source:"@site/versioned_docs/version-0.15/guide/go/struct-tags.md",sourceDirName:"guide/go",slug:"/guide/go/struct_tags",permalink:"/docs/guide/go/struct_tags",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/go/struct-tags.md",tags:[],version:"0.15",sidebarPosition:60,frontMatter:{title:"Field Configuration",sidebar_position:60,id:"struct_tags",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"References",permalink:"/docs/guide/go/references"},next:{title:"Schema Evolution",permalink:"/docs/guide/go/schema_evolution"}},a={},c=[{value:"Tag Syntax",id:"tag-syntax",level:2},{value:"Available Tags",id:"available-tags",level:2},{value:"Field ID",id:"field-id",level:3},{value:"Ignoring Fields",id:"ignoring-fields",level:3},{value:"Nullable",id:"nullable",level:3},{value:"Reference Tracking",id:"reference-tracking",level:3},{value:"Encoding",id:"encoding",level:3},{value:"Combining Tags",id:"combining-tags",level:2},{value:"Integration with Other Tags",id:"integration-with-other-tags",level:2},{value:"Field Visibility",id:"field-visibility",level:2},{value:"Field Ordering",id:"field-ordering",level:2},{value:"Struct Hash",id:"struct-hash",level:2},{value:"Examples",id:"examples",level:2},{value:"API Response Struct",id:"api-response-struct",level:3},{value:"Caching with Shared References",id:"caching-with-shared-references",level:3},{value:"Document with Circular References",id:"document-with-circular-references",level:3},{value:"Tag Parsing Errors",id:"tag-parsing-errors",level:2},{value:"Native Mode vs Xlang Mode",id:"native-mode-vs-xlang-mode",level:2},{value:"Default Values Summary",id:"default-values-summary",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Ignoring Computed Fields",id:"ignoring-computed-fields",level:3},{value:"Circular Structure with Parent",id:"circular-structure-with-parent",level:3},{value:"Mixed Serialization Needs",id:"mixed-serialization-needs",level:3},{value:"Related Topics",id:"related-topics",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Fory Go uses struct tags to customize field-level serialization behavior. This allows fine-grained control over how individual fields are serialized."}),"\n",(0,s.jsx)(n.h2,{id:"tag-syntax",children:"Tag Syntax"}),"\n",(0,s.jsx)(n.p,{children:"The general syntax for Fory struct tags:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type MyStruct struct {\n    Field Type `fory:"option1,option2=value"`\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Multiple options are separated by commas (",(0,s.jsx)(n.code,{children:","}),")."]}),"\n",(0,s.jsx)(n.h2,{id:"available-tags",children:"Available Tags"}),"\n",(0,s.jsx)(n.h3,{id:"field-id",children:"Field ID"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"id=N"})," to assign a numeric ID to a field for compact encoding:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID   int64  `fory:"id=0"`\n    Name string `fory:"id=1"`\n    Age  int32  `fory:"id=2"`\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Smaller serialized size (numeric IDs vs field names)"}),"\n",(0,s.jsx)(n.li,{children:"Faster serialization/deserialization"}),"\n",(0,s.jsx)(n.li,{children:"Required for optimal cross-language compatibility"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Notes"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"IDs must be unique within a struct"}),"\n",(0,s.jsx)(n.li,{children:"IDs must be >= 0"}),"\n",(0,s.jsx)(n.li,{children:"If not specified, field name is used (larger payload)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ignoring-fields",children:"Ignoring Fields"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"-"})," to exclude a field from serialization:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID       int64\n    Name     string\n    Password string `fory:"-"`  // Not serialized\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Password"})," field will not be included in serialized output and will remain at its zero value after deserialization."]}),"\n",(0,s.jsx)(n.h3,{id:"nullable",children:"Nullable"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"nullable"})," to control whether null flags are written for pointer fields:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Record struct {\n    // Write null flag for this field (allows nil values)\n    OptionalData *Data `fory:"nullable"`\n\n    // Skip null flag (field must not be nil)\n    RequiredData *Data `fory:"nullable=false"`\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Notes"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only applies to pointer, slice, and map fields"}),"\n",(0,s.jsxs)(n.li,{children:["When ",(0,s.jsx)(n.code,{children:"nullable=false"}),", serializing a nil value will cause an error"]}),"\n",(0,s.jsxs)(n.li,{children:["Default is ",(0,s.jsx)(n.code,{children:"false"})," (no null flag written)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"reference-tracking",children:"Reference Tracking"}),"\n",(0,s.jsx)(n.p,{children:"Control per-field reference tracking for slices, maps, or pointer to struct fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Container struct {\n    // Enable reference tracking for this field\n    SharedData *Data `fory:"ref"`\n\n    // Disable reference tracking for this field\n    SimpleData *Data `fory:"ref=false"`\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Notes"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Applies to slices, maps, and pointer to struct fields"}),"\n",(0,s.jsxs)(n.li,{children:["Pointer to primitive types (e.g., ",(0,s.jsx)(n.code,{children:"*int"}),", ",(0,s.jsx)(n.code,{children:"*string"}),") cannot use this tag"]}),"\n",(0,s.jsxs)(n.li,{children:["Default is ",(0,s.jsx)(n.code,{children:"ref=false"})," (no reference tracking)"]}),"\n",(0,s.jsxs)(n.li,{children:["When global ",(0,s.jsx)(n.code,{children:"WithTrackRef(false)"})," is set, field ref tags are ignored"]}),"\n",(0,s.jsxs)(n.li,{children:["When global ",(0,s.jsx)(n.code,{children:"WithTrackRef(true)"})," is set, use ",(0,s.jsx)(n.code,{children:"ref=false"})," to disable for specific fields"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enable for fields that may be circular or shared"}),"\n",(0,s.jsx)(n.li,{children:"Disable for fields that are always unique (optimization)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"encoding",children:"Encoding"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"encoding"})," to control how numeric fields are encoded:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Metrics struct {\n    // Variable-length encoding (default, smaller for small values)\n    Count int64 `fory:"encoding=varint"`\n\n    // Fixed-length encoding (consistent size)\n    Timestamp int64 `fory:"encoding=fixed"`\n\n    // Tagged encoding (includes type tag)\n    Value int64 `fory:"encoding=tagged"`\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Supported encodings"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Options"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int32"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"varint"}),", ",(0,s.jsx)(n.code,{children:"fixed"})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"varint"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uint32"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"varint"}),", ",(0,s.jsx)(n.code,{children:"fixed"})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"varint"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int64"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"varint"}),", ",(0,s.jsx)(n.code,{children:"fixed"}),", ",(0,s.jsx)(n.code,{children:"tagged"})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"varint"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uint64"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"varint"}),", ",(0,s.jsx)(n.code,{children:"fixed"}),", ",(0,s.jsx)(n.code,{children:"tagged"})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"varint"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When to use"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"varint"}),": Best for values that are often small (default)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fixed"}),": Best for values that use full range (e.g., timestamps, hashes)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tagged"}),": When type information needs to be preserved"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Shorthand for int32/uint32"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"compress"})," as a convenience tag for int32/uint32 fields:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Data struct {\n    SmallValue int32  `fory:"compress"`        // Same as encoding=varint (default)\n    FixedValue uint32 `fory:"compress=false"`  // Same as encoding=fixed\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"combining-tags",children:"Combining Tags"}),"\n",(0,s.jsx)(n.p,{children:"Multiple tags can be combined using comma separator:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Document struct {\n    ID      int64  `fory:"id=0,encoding=fixed"`\n    Content string `fory:"id=1"`\n    Author  *User  `fory:"id=2,ref"`\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"integration-with-other-tags",children:"Integration with Other Tags"}),"\n",(0,s.jsx)(n.p,{children:"Fory tags coexist with other struct tags:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID       int64  `json:"id" fory:"id=0"`\n    Name     string `json:"name,omitempty" fory:"id=1"`\n    Password string `json:"-" fory:"-"`\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Each tag namespace is independent."}),"\n",(0,s.jsx)(n.h2,{id:"field-visibility",children:"Field Visibility"}),"\n",(0,s.jsxs)(n.p,{children:["Only ",(0,s.jsx)(n.strong,{children:"exported fields"})," (starting with uppercase) are considered:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"type User struct {\n    ID       int64  // Serialized\n    Name     string // Serialized\n    password string // NOT serialized (unexported, no tag needed)\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Unexported fields are always ignored, regardless of tags."}),"\n",(0,s.jsx)(n.h2,{id:"field-ordering",children:"Field Ordering"}),"\n",(0,s.jsx)(n.p,{children:"Fields are serialized in a consistent order based on:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Field name (alphabetically in snake_case)"}),"\n",(0,s.jsx)(n.li,{children:"Field type"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This ensures cross-language compatibility where field order matters."}),"\n",(0,s.jsx)(n.h2,{id:"struct-hash",children:"Struct Hash"}),"\n",(0,s.jsx)(n.p,{children:"Fory computes a hash of struct fields for version checking:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Hash includes field names and types"}),"\n",(0,s.jsx)(n.li,{children:"Hash is written to serialized data"}),"\n",(0,s.jsxs)(n.li,{children:["Mismatch triggers ",(0,s.jsx)(n.code,{children:"ErrKindHashMismatch"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Struct field changes affect the hash:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// These produce different hashes\ntype V1 struct {\n    UserID int64\n}\n\ntype V2 struct {\n    UserId int64  // Different field name = different hash\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"api-response-struct",children:"API Response Struct"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type APIResponse struct {\n    Status    int32  `json:"status" fory:"id=0"`\n    Message   string `json:"message" fory:"id=1"`\n    Data      any    `json:"data" fory:"id=2"`\n    Internal  string `json:"-" fory:"-"`  // Ignored in both JSON and Fory\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"caching-with-shared-references",children:"Caching with Shared References"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type CacheEntry struct {\n    Key       string\n    Value     *CachedData `fory:"ref"`      // May be shared\n    Metadata  *Metadata   `fory:"ref=false"` // Always unique\n    ExpiresAt int64\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"document-with-circular-references",children:"Document with Circular References"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Document struct {\n    ID       int64\n    Title    string\n    Parent   *Document   `fory:"ref"`  // May reference self or siblings\n    Children []*Document `fory:"ref"`\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"tag-parsing-errors",children:"Tag Parsing Errors"}),"\n",(0,s.jsx)(n.p,{children:"Invalid tags produce errors during registration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type BadStruct struct {\n    Field int `fory:"invalid=option=format"`\n}\n\nf := fory.New()\nerr := f.RegisterStruct(BadStruct{}, 1)\n// Error: ErrKindInvalidTag\n'})}),"\n",(0,s.jsx)(n.h2,{id:"native-mode-vs-xlang-mode",children:"Native Mode vs Xlang Mode"}),"\n",(0,s.jsx)(n.p,{children:"Field configuration behaves differently depending on the serialization mode:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Native Mode"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nullable"}),": Pointer, slice, map, and interface types are nullable by default"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ref tracking"}),": Disabled by default (",(0,s.jsx)(n.code,{children:"ref"})," tag not set)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Xlang Mode"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nullable"}),": Only pointer types are nullable by default (slices and maps are NOT nullable)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ref tracking"}),": Disabled by default (",(0,s.jsx)(n.code,{children:"ref"})," tag not set)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You ",(0,s.jsx)(n.strong,{children:"need to configure fields"})," when:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A field can be nil (use pointer types like ",(0,s.jsx)(n.code,{children:"*string"}),", ",(0,s.jsx)(n.code,{children:"*int32"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["A field needs reference tracking for shared/circular objects (use ",(0,s.jsx)(n.code,{children:'fory:"ref"'}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["You want to reduce metadata size (use field IDs with ",(0,s.jsx)(n.code,{children:'fory:"id=N"'}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// Xlang mode: explicit configuration required\ntype User struct {\n    ID    int64   `fory:"id=0"`\n    Name  string  `fory:"id=1"`\n    Email *string `fory:"id=2"`           // Pointer type for nullable\n    Friend *User  `fory:"id=3,ref"`       // Must declare ref for shared objects\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"default-values-summary",children:"Default Values Summary"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"How to Enable"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"nullable"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsxs)(n.td,{children:["Use pointer types (",(0,s.jsx)(n.code,{children:"*T"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ref"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsxs)(n.td,{children:["Add ",(0,s.jsx)(n.code,{children:'fory:"ref"'})," tag"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-1"})}),(0,s.jsxs)(n.td,{children:["Add ",(0,s.jsx)(n.code,{children:'fory:"id=N"'})," tag"]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Use ",(0,s.jsx)(n.code,{children:"-"})," for sensitive data"]}),": Passwords, tokens, internal state"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enable ref tracking for shared objects"}),": When the same pointer appears multiple times"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Disable ref tracking for simple fields"}),": Optimization when you know the field is unique"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Keep names consistent"}),": Cross-language names should match"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Document tag usage"}),": Especially for non-obvious configurations"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"ignoring-computed-fields",children:"Ignoring Computed Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Rectangle struct {\n    Width  float64\n    Height float64\n    Area   float64 `fory:"-"`  // Computed, don\'t serialize\n}\n\nfunc (r *Rectangle) ComputeArea() {\n    r.Area = r.Width * r.Height\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"circular-structure-with-parent",children:"Circular Structure with Parent"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type TreeNode struct {\n    Value    string\n    Parent   *TreeNode   `fory:"ref"`  // Circular back-reference\n    Children []*TreeNode `fory:"ref"`\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"mixed-serialization-needs",children:"Mixed Serialization Needs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type Session struct {\n    ID        string\n    UserID    int64\n    Token     string    `fory:"-"`           // Security: don\'t serialize\n    User      *User     `fory:"ref"`    // May be shared across sessions\n    CreatedAt int64\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/guide/go/references",children:"References"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/guide/go/basic_serialization",children:"Basic Serialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/guide/go/schema_evolution",children:"Schema Evolution"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>d,a:()=>t});var s=i(67294);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);