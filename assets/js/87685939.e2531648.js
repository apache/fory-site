"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[86194],{50334:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var r=n(85893),s=n(11151);const t={title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},a=void 0,o={id:"guide/csharp/basic_serialization",title:"Basic Serialization",description:"This page covers typed and dynamic serialization APIs in Apache Fory\u2122 C#.",source:"@site/docs/guide/csharp/basic-serialization.md",sourceDirName:"guide/csharp",slug:"/guide/csharp/basic_serialization",permalink:"/docs/next/guide/csharp/basic_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/csharp/basic-serialization.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Configuration",permalink:"/docs/next/guide/csharp/configuration"},next:{title:"Type Registration",permalink:"/docs/next/guide/csharp/type_registration"}},c={},l=[{value:"Object Graph Serialization",id:"object-graph-serialization",level:2},{value:"Typed API",id:"typed-api",level:2},{value:"Serialize / Deserialize with byte arrays",id:"serialize--deserialize-with-byte-arrays",level:3},{value:"Deserialize from <code>ReadOnlySpan&lt;byte&gt;</code>",id:"deserialize-from-readonlyspanbyte",level:3},{value:"Stream-style frame consumption",id:"stream-style-frame-consumption",level:3},{value:"Dynamic Object API",id:"dynamic-object-api",level:2},{value:"Buffer Writer API",id:"buffer-writer-api",level:2},{value:"Notes",id:"notes",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{children:"This page covers typed and dynamic serialization APIs in Apache Fory\u2122 C#."}),"\n",(0,r.jsx)(i.h2,{id:"object-graph-serialization",children:"Object Graph Serialization"}),"\n",(0,r.jsxs)(i.p,{children:["Use ",(0,r.jsx)(i.code,{children:"[ForyObject]"})," on your classes/structs and register them before use."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'using Apache.Fory;\n\n[ForyObject]\npublic sealed class Address\n{\n    public string Street { get; set; } = string.Empty;\n    public int Zip { get; set; }\n}\n\n[ForyObject]\npublic sealed class Person\n{\n    public long Id { get; set; }\n    public string Name { get; set; } = string.Empty;\n    public string? Nickname { get; set; }\n    public List<int> Scores { get; set; } = [];\n    public List<Address> Addresses { get; set; } = [];\n}\n\nFory fory = Fory.Builder().Build();\nfory.Register<Address>(100);\nfory.Register<Person>(101);\n\nPerson person = new()\n{\n    Id = 42,\n    Name = "Alice",\n    Nickname = null,\n    Scores = [10, 20, 30],\n    Addresses = [new Address { Street = "Main", Zip = 94107 }],\n};\n\nbyte[] payload = fory.Serialize(person);\nPerson decoded = fory.Deserialize<Person>(payload);\n'})}),"\n",(0,r.jsx)(i.h2,{id:"typed-api",children:"Typed API"}),"\n",(0,r.jsx)(i.h3,{id:"serialize--deserialize-with-byte-arrays",children:"Serialize / Deserialize with byte arrays"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"byte[] payload = fory.Serialize(value);\nMyType decoded = fory.Deserialize<MyType>(payload);\n"})}),"\n",(0,r.jsxs)(i.h3,{id:"deserialize-from-readonlyspanbyte",children:["Deserialize from ",(0,r.jsx)(i.code,{children:"ReadOnlySpan<byte>"})]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"ReadOnlySpan<byte> span = payload;\nMyType decoded = fory.Deserialize<MyType>(span);\n"})}),"\n",(0,r.jsx)(i.h3,{id:"stream-style-frame-consumption",children:"Stream-style frame consumption"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"using System.Buffers;\n\nReadOnlySequence<byte> sequence = GetFramedSequence();\nMyType first = fory.Deserialize<MyType>(ref sequence);\nMyType second = fory.Deserialize<MyType>(ref sequence);\n"})}),"\n",(0,r.jsx)(i.h2,{id:"dynamic-object-api",children:"Dynamic Object API"}),"\n",(0,r.jsx)(i.p,{children:"Use object APIs when the compile-time type is unknown or heterogeneous."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'Dictionary<object, object?> value = new()\n{\n    ["k1"] = 7,\n    [2] = "v2",\n    [true] = null,\n};\n\nbyte[] payload = fory.SerializeObject(value);\nobject? decoded = fory.DeserializeObject(payload);\n'})}),"\n",(0,r.jsx)(i.h2,{id:"buffer-writer-api",children:"Buffer Writer API"}),"\n",(0,r.jsxs)(i.p,{children:["Serialize directly into ",(0,r.jsx)(i.code,{children:"IBufferWriter<byte>"})," targets."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"using System.Buffers;\n\nArrayBufferWriter<byte> writer = new();\nfory.Serialize(writer, value);\n\nArrayBufferWriter<byte> dynamicWriter = new();\nfory.SerializeObject(dynamicWriter, value);\n"})}),"\n",(0,r.jsx)(i.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Reuse the same ",(0,r.jsx)(i.code,{children:"Fory"})," or ",(0,r.jsx)(i.code,{children:"ThreadSafeFory"})," instance for better performance."]}),"\n",(0,r.jsx)(i.li,{children:"Primitive types and collections do not require user registration."}),"\n",(0,r.jsxs)(i.li,{children:["User ",(0,r.jsx)(i.code,{children:"[ForyObject]"})," and custom serializer types should be registered explicitly."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/docs/next/guide/csharp/type_registration",children:"Type Registration"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/docs/next/guide/csharp/supported_types",children:"Supported Types"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"/docs/next/guide/csharp/references",children:"References"})}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,s.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,i,n)=>{n.d(i,{Z:()=>o,a:()=>a});var r=n(67294);const s={},t=r.createContext(s);function a(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);