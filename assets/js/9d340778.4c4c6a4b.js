"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[74280],{38604:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var r=i(85893),s=i(11151);const a={title:"Cross-Language Serialization",sidebar_position:8,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},t=void 0,o={id:"guide/csharp/cross_language",title:"Cross-Language Serialization",description:"Apache Fory\u2122 C# supports cross-language serialization with other Fory runtimes.",source:"@site/docs/guide/csharp/cross-language.md",sourceDirName:"guide/csharp",slug:"/guide/csharp/cross_language",permalink:"/docs/next/guide/csharp/cross_language",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/csharp/cross-language.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"Cross-Language Serialization",sidebar_position:8,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Schema Evolution",permalink:"/docs/next/guide/csharp/schema_evolution"},next:{title:"Supported Types",permalink:"/docs/next/guide/csharp/supported_types"}},l={},c=[{value:"Enable Cross-Language Mode",id:"enable-cross-language-mode",level:2},{value:"Register with Stable IDs",id:"register-with-stable-ids",level:2},{value:"Register by Namespace/Type Name",id:"register-by-namespacetype-name",level:2},{value:"Cross-Language Example",id:"cross-language-example",level:2},{value:"C# (Serializer)",id:"c-serializer",level:3},{value:"Java (Deserializer)",id:"java-deserializer",level:3},{value:"Python (Deserializer)",id:"python-deserializer",level:3},{value:"Type Mapping Reference",id:"type-mapping-reference",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Apache Fory\u2122 C# supports cross-language serialization with other Fory runtimes."}),"\n",(0,r.jsx)(n.h2,{id:"enable-cross-language-mode",children:"Enable Cross-Language Mode"}),"\n",(0,r.jsxs)(n.p,{children:["C# defaults to ",(0,r.jsx)(n.code,{children:"Xlang(true)"}),", but it is good practice to configure it explicitly in interoperability code."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"Fory fory = Fory.Builder()\n    .Xlang(true)\n    .Compatible(true)\n    .Build();\n"})}),"\n",(0,r.jsx)(n.h2,{id:"register-with-stable-ids",children:"Register with Stable IDs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"[ForyObject]\npublic sealed class Person\n{\n    public string Name { get; set; } = string.Empty;\n    public int Age { get; set; }\n}\n\nFory fory = Fory.Builder()\n    .Xlang(true)\n    .Compatible(true)\n    .Build();\n\nfory.Register<Person>(100);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Use the same ID mapping on all languages."}),"\n",(0,r.jsx)(n.h2,{id:"register-by-namespacetype-name",children:"Register by Namespace/Type Name"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'fory.Register<Person>("com.example", "Person");\n'})}),"\n",(0,r.jsx)(n.h2,{id:"cross-language-example",children:"Cross-Language Example"}),"\n",(0,r.jsx)(n.h3,{id:"c-serializer",children:"C# (Serializer)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'Person person = new() { Name = "Alice", Age = 30 };\nbyte[] payload = fory.Serialize(person);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"java-deserializer",children:"Java (Deserializer)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Fory fory = Fory.builder()\n    .withLanguage(Language.XLANG)\n    .withRefTracking(true)\n    .build();\n\nfory.register(Person.class, 100);\nPerson value = (Person) fory.deserialize(payloadFromCSharp);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"python-deserializer",children:"Python (Deserializer)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import pyfory\n\nfory = pyfory.Fory(xlang=True, ref=True)\nfory.register_type(Person, type_id=100)\nvalue = fory.deserialize(payload_from_csharp)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-mapping-reference",children:"Type Mapping Reference"}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/docs/next/guide/xlang/",children:"xlang guide"})," for complete mapping."]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Keep type IDs stable and documented."}),"\n",(0,r.jsxs)(n.li,{children:["Enable ",(0,r.jsx)(n.code,{children:"Compatible(true)"})," for rolling upgrades."]}),"\n",(0,r.jsx)(n.li,{children:"Register all user types on both read/write peers."}),"\n",(0,r.jsx)(n.li,{children:"Validate integration with real payload round trips."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/next/guide/csharp/type_registration",children:"Type Registration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/next/guide/csharp/schema_evolution",children:"Schema Evolution"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/next/guide/csharp/supported_types",children:"Supported Types"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>t});var r=i(67294);const s={},a=r.createContext(s);function t(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);