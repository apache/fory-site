"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[56231],{61798:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var r=i(85893),s=i(11151);const t={title:"Cross-Language Serialization",sidebar_position:10,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},o=void 0,a={id:"guide/python/cross_language",title:"Cross-Language Serialization",description:"pyfory supports cross-language object graph serialization, allowing you to serialize data in Python and deserialize it in Java, Go, Rust, or other supported languages.",source:"@site/versioned_docs/version-0.15/guide/python/cross-language.md",sourceDirName:"guide/python",slug:"/guide/python/cross_language",permalink:"/docs/guide/python/cross_language",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/python/cross-language.md",tags:[],version:"0.15",sidebarPosition:10,frontMatter:{title:"Cross-Language Serialization",sidebar_position:10,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Security Best Practices",permalink:"/docs/guide/python/security"},next:{title:"Row Format",permalink:"/docs/guide/python/row_format"}},d={},l=[{value:"Enable Cross-Language Mode",id:"enable-cross-language-mode",level:2},{value:"Cross-Language Example",id:"cross-language-example",level:2},{value:"Python (Serializer)",id:"python-serializer",level:3},{value:"Java (Deserializer)",id:"java-deserializer",level:3},{value:"Rust (Deserializer)",id:"rust-deserializer",level:3},{value:"Type Annotations for Cross-Language",id:"type-annotations-for-cross-language",level:2},{value:"Type Mapping",id:"type-mapping",level:2},{value:"Differences from Python Native Mode",id:"differences-from-python-native-mode",level:2},{value:"See Also",id:"see-also",level:2},{value:"Related Topics",id:"related-topics",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"pyfory"})," supports cross-language object graph serialization, allowing you to serialize data in Python and deserialize it in Java, Go, Rust, or other supported languages."]}),"\n",(0,r.jsx)(n.h2,{id:"enable-cross-language-mode",children:"Enable Cross-Language Mode"}),"\n",(0,r.jsxs)(n.p,{children:["To use xlang mode, create ",(0,r.jsx)(n.code,{children:"Fory"})," with ",(0,r.jsx)(n.code,{children:"xlang=True"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import pyfory\nfory = pyfory.Fory(xlang=True, ref=False, strict=True)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cross-language-example",children:"Cross-Language Example"}),"\n",(0,r.jsx)(n.h3,{id:"python-serializer",children:"Python (Serializer)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import pyfory\nfrom dataclasses import dataclass\n\n# Cross-language mode for interoperability\nf = pyfory.Fory(xlang=True, ref=True)\n\n# Register type for cross-language compatibility\n@dataclass\nclass Person:\n    name: str\n    age: pyfory.int32\n\nf.register(Person, typename="example.Person")\n\nperson = Person("Charlie", 35)\nbinary_data = f.serialize(person)\n# binary_data can now be sent to Java, Go, etc.\n'})}),"\n",(0,r.jsx)(n.h3,{id:"java-deserializer",children:"Java (Deserializer)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'import org.apache.fory.*;\n\npublic class Person {\n    public String name;\n    public int age;\n}\n\nFory fory = Fory.builder()\n    .withLanguage(Language.XLANG)\n    .withRefTracking(true)\n    .build();\n\nfory.register(Person.class, "example.Person");\nPerson person = (Person) fory.deserialize(binaryData);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"rust-deserializer",children:"Rust (Deserializer)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'use fory::Fory;\nuse fory::ForyObject;\n\n#[derive(ForyObject)]\nstruct Person {\n    name: String,\n    age: i32,\n}\n\nlet mut fory = Fory::default()\n    .compatible(true)\n    .xlang(true);\n\nfory.register_by_namespace::<Person>("example", "Person");\nlet person: Person = fory.deserialize(&binary_data)?;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"type-annotations-for-cross-language",children:"Type Annotations for Cross-Language"}),"\n",(0,r.jsx)(n.p,{children:"Use pyfory type annotations for explicit cross-language type mapping:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from dataclasses import dataclass\nimport pyfory\n\n@dataclass\nclass TypedData:\n    int_value: pyfory.int32      # 32-bit integer\n    long_value: pyfory.int64     # 64-bit integer\n    float_value: pyfory.float32  # 32-bit float\n    double_value: pyfory.float64 # 64-bit float\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-mapping",children:"Type Mapping"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Python"}),(0,r.jsx)(n.th,{children:"Java"}),(0,r.jsx)(n.th,{children:"Rust"}),(0,r.jsx)(n.th,{children:"Go"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"str"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"String"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"String"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"long"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"i64"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int64"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pyfory.int32"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"i32"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int32"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pyfory.int64"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"long"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"i64"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int64"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"float"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"double"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"f64"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"float64"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pyfory.float32"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"float"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"f32"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"float32"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"list"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"List"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Vec"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"[]T"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"dict"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Map"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"HashMap"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"map[K]V"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"differences-from-python-native-mode",children:"Differences from Python Native Mode"}),"\n",(0,r.jsxs)(n.p,{children:["The binary protocol and API are similar to ",(0,r.jsx)(n.code,{children:"pyfory"}),"'s python-native mode, but Python-native mode can serialize any Python object\u2014including global functions, local functions, lambdas, local classes, and types with customized serialization using ",(0,r.jsx)(n.code,{children:"__getstate__/__reduce__/__reduce_ex__"}),", which are ",(0,r.jsx)(n.strong,{children:"not allowed"})," in xlang mode."]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/specification/xlang_serialization_spec",children:"Cross-Language Serialization Specification"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/specification/xlang_type_mapping",children:"Type Mapping Reference"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/guide/java/cross_language",children:"Java Cross-Language Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/guide/rust/cross_language",children:"Rust Cross-Language Guide"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/guide/python/configuration",children:"Configuration"})," - XLANG mode settings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/guide/python/schema_evolution",children:"Schema Evolution"})," - Compatible mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/guide/python/type_registration",children:"Type Registration"})," - Registration patterns"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var r=i(67294);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);