"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[32568],{22261:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>o});var i=r(85893),s=r(11151);const d={title:"Compiler Guide",sidebar_position:3,id:"compiler_guide",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},l=void 0,c={id:"compiler/compiler_guide",title:"Compiler Guide",description:"This guide covers installation, usage, and integration of the Fory IDL compiler.",source:"@site/docs/compiler/compiler-guide.md",sourceDirName:"compiler",slug:"/compiler/compiler_guide",permalink:"/docs/next/compiler/compiler_guide",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/compiler/compiler-guide.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Compiler Guide",sidebar_position:3,id:"compiler_guide",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Schema IDL",permalink:"/docs/next/compiler/syntax"},next:{title:"Generated Code",permalink:"/docs/next/compiler/generated_code"}},t={},o=[{value:"Installation",id:"installation",level:2},{value:"From Source",id:"from-source",level:3},{value:"Verify Installation",id:"verify-installation",level:3},{value:"Command Line Interface",id:"command-line-interface",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Options",id:"options",level:3},{value:"Scan Generated Files",id:"scan-generated-files",level:3},{value:"Examples",id:"examples",level:3},{value:"Import Path Resolution",id:"import-path-resolution",level:2},{value:"Supported Languages",id:"supported-languages",level:2},{value:"Output Structure",id:"output-structure",level:2},{value:"Java",id:"java",level:3},{value:"Python",id:"python",level:3},{value:"Go",id:"go",level:3},{value:"Rust",id:"rust",level:3},{value:"C++",id:"c",level:3},{value:"C#",id:"c-1",level:3},{value:"C# IDL Matrix Verification",id:"c-idl-matrix-verification",level:3},{value:"Build Integration",id:"build-integration",level:2},{value:"Maven (Java)",id:"maven-java",level:3},{value:"Gradle (Java/Kotlin)",id:"gradle-javakotlin",level:3},{value:"Python (setuptools)",id:"python-setuptools",level:3},{value:"Go (go generate)",id:"go-go-generate",level:3},{value:"Rust (build.rs)",id:"rust-buildrs",level:3},{value:"CMake (C++)",id:"cmake-c",level:3},{value:"Bazel",id:"bazel",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Syntax Errors",id:"syntax-errors",level:3},{value:"Duplicate Type Names",id:"duplicate-type-names",level:3},{value:"Duplicate Type IDs",id:"duplicate-type-ids",level:3},{value:"Unknown Type References",id:"unknown-type-references",level:3},{value:"Duplicate Field Numbers",id:"duplicate-field-numbers",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Project Structure",id:"project-structure",level:3},{value:"Version Control",id:"version-control",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:3},{value:"Schema Evolution",id:"schema-evolution",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Command Not Found",id:"command-not-found",level:3},{value:"Permission Denied",id:"permission-denied",level:3},{value:"Import Errors in Generated Code",id:"import-errors-in-generated-code",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This guide covers installation, usage, and integration of the Fory IDL compiler."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.h3,{id:"from-source",children:"From Source"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd compiler\npip install -e .\n"})}),"\n",(0,i.jsx)(n.h3,{id:"verify-installation",children:"Verify Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc --help\n"})}),"\n",(0,i.jsx)(n.h2,{id:"command-line-interface",children:"Command Line Interface"}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc [OPTIONS] FILES...\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc --scan-generated [OPTIONS]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,i.jsx)(n.p,{children:"Compile options:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--lang"})}),(0,i.jsx)(n.td,{children:"Comma-separated target languages"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"all"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"--output"}),", ",(0,i.jsx)(n.code,{children:"-o"})]}),(0,i.jsx)(n.td,{children:"Output directory"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"./generated"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--package"})}),(0,i.jsx)(n.td,{children:"Override package name from Fory IDL file"}),(0,i.jsx)(n.td,{children:"(from file)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"-I"}),", ",(0,i.jsx)(n.code,{children:"--proto_path"}),", ",(0,i.jsx)(n.code,{children:"--import_path"})]}),(0,i.jsx)(n.td,{children:"Add directory to import search path (can be repeated)"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--java_out=DST_DIR"})}),(0,i.jsx)(n.td,{children:"Generate Java code in DST_DIR"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--python_out=DST_DIR"})}),(0,i.jsx)(n.td,{children:"Generate Python code in DST_DIR"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--cpp_out=DST_DIR"})}),(0,i.jsx)(n.td,{children:"Generate C++ code in DST_DIR"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--go_out=DST_DIR"})}),(0,i.jsx)(n.td,{children:"Generate Go code in DST_DIR"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--rust_out=DST_DIR"})}),(0,i.jsx)(n.td,{children:"Generate Rust code in DST_DIR"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--csharp_out=DST_DIR"})}),(0,i.jsx)(n.td,{children:"Generate C# code in DST_DIR"}),(0,i.jsx)(n.td,{children:"(none)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--go_nested_type_style"})}),(0,i.jsxs)(n.td,{children:["Go nested type naming: ",(0,i.jsx)(n.code,{children:"camelcase"})," or ",(0,i.jsx)(n.code,{children:"underscore"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"underscore"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--emit-fdl"})}),(0,i.jsx)(n.td,{children:"Emit translated FDL (for non-FDL inputs)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--emit-fdl-path"})}),(0,i.jsx)(n.td,{children:"Write translated FDL to this path (file or directory)"}),(0,i.jsx)(n.td,{children:"(stdout)"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Scan options (with ",(0,i.jsx)(n.code,{children:"--scan-generated"}),"):"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--root"})}),(0,i.jsx)(n.td,{children:"Root directory to scan"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"."})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--relative"})}),(0,i.jsx)(n.td,{children:"Print paths relative to root"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--delete"})}),(0,i.jsx)(n.td,{children:"Delete matched generated files"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--dry-run"})}),(0,i.jsx)(n.td,{children:"Scan/print only, do not delete"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"scan-generated-files",children:"Scan Generated Files"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"--scan-generated"})," to find files produced by ",(0,i.jsx)(n.code,{children:"foryc"}),". The scanner walks\nthe tree recursively, skips ",(0,i.jsx)(n.code,{children:"build/"}),", ",(0,i.jsx)(n.code,{children:"target/"}),", and hidden directories, and prints\neach generated file as it is found."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Scan current directory\nforyc --scan-generated\n\n# Scan a specific root\nforyc --scan-generated --root ./src\n\n# Print paths relative to the scan root\nforyc --scan-generated --root ./src --relative\n\n# Delete scanned generated files\nforyc --scan-generated --root ./src --delete\n\n# Dry-run (scan and print only)\nforyc --scan-generated --root ./src --dry-run\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Compile for all languages:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc schema.fdl\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Compile for specific languages:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc schema.fdl --lang java,python,csharp\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Specify output directory:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc schema.fdl --output ./src/generated\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Override package name:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc schema.fdl --package com.myapp.models\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Compile multiple files:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"foryc user.fdl order.fdl product.fdl --output ./generated\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use import search paths:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Add a single import path\nforyc src/main.fdl -I libs/common\n\n# Add multiple import paths (repeated option)\nforyc src/main.fdl -I libs/common -I libs/types\n\n# Add multiple import paths (comma-separated)\nforyc src/main.fdl -I libs/common,libs/types,third_party/\n\n# Using --proto_path (protoc-compatible alias)\nforyc src/main.fdl --proto_path=libs/common\n\n# Mix all styles\nforyc src/main.fdl -I libs/common,libs/types --proto_path third_party/\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Language-specific output directories (protoc-style):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Generate only Java code to a specific directory\nforyc schema.fdl --java_out=./src/main/java\n\n# Generate multiple languages to different directories\nforyc schema.fdl --java_out=./java/gen --python_out=./python/src --go_out=./go/gen --csharp_out=./csharp/gen\n\n# Combine with import paths\nforyc schema.fdl --java_out=./gen/java -I proto/ -I common/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When using ",(0,i.jsx)(n.code,{children:"--{lang}_out"})," options:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Only the specified languages are generated (not all languages)"}),"\n",(0,i.jsx)(n.li,{children:"The compiler writes under the specified directory (language-specific generators may still create package/module subdirectories)"}),"\n",(0,i.jsx)(n.li,{children:"This is compatible with protoc-style workflows"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Inspect translated Fory IDL from proto/fbs input:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Print translated Fory IDL to stdout\nforyc schema.proto --emit-fdl\n\n# Write translated Fory IDL to a directory\nforyc schema.fbs --emit-fdl --emit-fdl-path ./translated\n"})}),"\n",(0,i.jsx)(n.h2,{id:"import-path-resolution",children:"Import Path Resolution"}),"\n",(0,i.jsx)(n.p,{children:"When compiling Fory IDL files with imports, the compiler searches for imported files in this order:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Relative to the importing file (default)"})," - The directory containing the file with the import statement is always searched first, automatically. No ",(0,i.jsx)(n.code,{children:"-I"})," flag needed for same-directory imports."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Each ",(0,i.jsx)(n.code,{children:"-I"})," path in order"]})," - Additional search paths specified on the command line"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Same-directory imports work automatically:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-protobuf",children:'// main.fdl\nimport "common.fdl";  // Found if common.fdl is in the same directory\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# No -I needed for same-directory imports\nforyc main.fdl\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example project structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'project/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 main.fdl          # import "common.fdl";\n\u2514\u2500\u2500 libs/\n    \u2514\u2500\u2500 common.fdl\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Without ",(0,i.jsx)(n.code,{children:"-I"})," (fails):"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ foryc src/main.fdl\nImport error: Import not found: common.fdl\n  Searched in: /project/src\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["With ",(0,i.jsx)(n.code,{children:"-I"})," (succeeds):"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ foryc src/main.fdl -I libs/\nCompiling src/main.fdl...\n  Resolved 1 import(s)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"supported-languages",children:"Supported Languages"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Language"}),(0,i.jsx)(n.th,{children:"Flag"}),(0,i.jsx)(n.th,{children:"Output Extension"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Java"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"java"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".java"})}),(0,i.jsx)(n.td,{children:"POJOs with Fory annotations"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Python"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"python"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".py"})}),(0,i.jsx)(n.td,{children:"Dataclasses with type hints"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Go"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"go"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".go"})}),(0,i.jsx)(n.td,{children:"Structs with struct tags"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rust"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rust"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".rs"})}),(0,i.jsx)(n.td,{children:"Structs with derive macros"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"C++"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cpp"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".h"})}),(0,i.jsx)(n.td,{children:"Structs with FORY macros"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"C#"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"csharp"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".cs"})}),(0,i.jsx)(n.td,{children:"Classes with Fory attributes"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"output-structure",children:"Output Structure"}),"\n",(0,i.jsx)(n.h3,{id:"java",children:"Java"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 java/\n    \u2514\u2500\u2500 com/\n        \u2514\u2500\u2500 example/\n            \u251c\u2500\u2500 User.java\n            \u251c\u2500\u2500 Order.java\n            \u251c\u2500\u2500 Status.java\n            \u2514\u2500\u2500 ExampleForyRegistration.java\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"One file per type (enum or message)"}),"\n",(0,i.jsx)(n.li,{children:"Package structure matches Fory IDL package"}),"\n",(0,i.jsx)(n.li,{children:"Registration helper class generated"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 python/\n    \u2514\u2500\u2500 example.py\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single module with all types"}),"\n",(0,i.jsx)(n.li,{children:"Module name derived from package"}),"\n",(0,i.jsx)(n.li,{children:"Registration function included"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"go",children:"Go"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 go/\n    \u2514\u2500\u2500 example/\n        \u2514\u2500\u2500 example.go\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single file with all types"}),"\n",(0,i.jsxs)(n.li,{children:["Directory and package name are derived from ",(0,i.jsx)(n.code,{children:"go_package"})," or the Fory IDL package"]}),"\n",(0,i.jsx)(n.li,{children:"Registration function included"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rust",children:"Rust"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 rust/\n    \u2514\u2500\u2500 example.rs\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single module with all types"}),"\n",(0,i.jsx)(n.li,{children:"Module name derived from package"}),"\n",(0,i.jsx)(n.li,{children:"Registration function included"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"c",children:"C++"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 cpp/\n    \u2514\u2500\u2500 example.h\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single header file"}),"\n",(0,i.jsxs)(n.li,{children:["Namespace matches package (dots to ",(0,i.jsx)(n.code,{children:"::"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Header guards and forward declarations"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"c-1",children:"C#"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 csharp/\n    \u2514\u2500\u2500 example/\n        \u2514\u2500\u2500 example.cs\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Single ",(0,i.jsx)(n.code,{children:".cs"})," file per schema"]}),"\n",(0,i.jsxs)(n.li,{children:["Namespace uses ",(0,i.jsx)(n.code,{children:"csharp_namespace"})," (if set) or Fory IDL package"]}),"\n",(0,i.jsxs)(n.li,{children:["Includes registration helper and ",(0,i.jsx)(n.code,{children:"ToBytes"}),"/",(0,i.jsx)(n.code,{children:"FromBytes"})," methods"]}),"\n",(0,i.jsxs)(n.li,{children:["Imported schemas are registered transitively (for example ",(0,i.jsx)(n.code,{children:"root.idl"})," importing\n",(0,i.jsx)(n.code,{children:"addressbook.fdl"})," and ",(0,i.jsx)(n.code,{children:"tree.fdl"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"c-idl-matrix-verification",children:"C# IDL Matrix Verification"}),"\n",(0,i.jsx)(n.p,{children:"Run the end-to-end C# IDL matrix (FDL/IDL/Proto/FBS generation plus roundtrip tests):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd integration_tests/idl_tests\n./run_csharp_tests.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"This runner executes schema-consistent and compatible roundtrips across:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"addressbook"}),", ",(0,i.jsx)(n.code,{children:"auto_id"}),", ",(0,i.jsx)(n.code,{children:"complex_pb"})," primitives"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"collection"})," and union/list variants"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"optional_types"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"any_example"})," (",(0,i.jsx)(n.code,{children:".fdl"}),") and ",(0,i.jsx)(n.code,{children:"any_example"})," (",(0,i.jsx)(n.code,{children:".proto"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tree"})," and ",(0,i.jsx)(n.code,{children:"graph"})," reference-tracking cases"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"monster.fbs"})," and ",(0,i.jsx)(n.code,{children:"complex_fbs.fbs"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"root.idl"})," cross-package import coverage"]}),"\n",(0,i.jsx)(n.li,{children:"evolving schema compatibility cases"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The script also sets ",(0,i.jsx)(n.code,{children:"DATA_FILE*"})," variables so file-based roundtrip paths are exercised."]}),"\n",(0,i.jsx)(n.h2,{id:"build-integration",children:"Build Integration"}),"\n",(0,i.jsx)(n.h3,{id:"maven-java",children:"Maven (Java)"}),"\n",(0,i.jsxs)(n.p,{children:["Add to your ",(0,i.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<build>\n  <plugins>\n    <plugin>\n      <groupId>org.codehaus.mojo</groupId>\n      <artifactId>exec-maven-plugin</artifactId>\n      <version>3.1.0</version>\n      <executions>\n        <execution>\n          <id>generate-fory-types</id>\n          <phase>generate-sources</phase>\n          <goals>\n            <goal>exec</goal>\n          </goals>\n          <configuration>\n            <executable>foryc</executable>\n            <arguments>\n              <argument>${project.basedir}/src/main/fdl/schema.fdl</argument>\n              <argument>--java_out</argument>\n              <argument>${project.build.directory}/generated-sources/fory</argument>\n            </arguments>\n          </configuration>\n        </execution>\n      </executions>\n    </plugin>\n  </plugins>\n</build>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add generated sources:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<build>\n  <plugins>\n    <plugin>\n      <groupId>org.codehaus.mojo</groupId>\n      <artifactId>build-helper-maven-plugin</artifactId>\n      <version>3.4.0</version>\n      <executions>\n        <execution>\n          <phase>generate-sources</phase>\n          <goals>\n            <goal>add-source</goal>\n          </goals>\n          <configuration>\n            <sources>\n              <source>${project.build.directory}/generated-sources/fory</source>\n            </sources>\n          </configuration>\n        </execution>\n      </executions>\n    </plugin>\n  </plugins>\n</build>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gradle-javakotlin",children:"Gradle (Java/Kotlin)"}),"\n",(0,i.jsxs)(n.p,{children:["Add to ",(0,i.jsx)(n.code,{children:"build.gradle"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:'task generateForyTypes(type: Exec) {\n    commandLine \'foryc\',\n        "${projectDir}/src/main/fdl/schema.fdl",\n        \'--java_out\', "${buildDir}/generated/sources/fory"\n}\n\ncompileJava.dependsOn generateForyTypes\n\nsourceSets {\n    main {\n        java {\n            srcDir "${buildDir}/generated/sources/fory"\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"python-setuptools",children:"Python (setuptools)"}),"\n",(0,i.jsxs)(n.p,{children:["Add to ",(0,i.jsx)(n.code,{children:"setup.py"})," or ",(0,i.jsx)(n.code,{children:"pyproject.toml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# setup.py\nfrom setuptools import setup\nfrom setuptools.command.build_py import build_py\nimport subprocess\n\nclass BuildWithForyIdl(build_py):\n    def run(self):\n        subprocess.run([\n            'foryc',\n            'schema.fdl',\n            '--python_out', 'src/generated'\n        ], check=True)\n        super().run()\n\nsetup(\n    cmdclass={'build_py': BuildWithForyIdl},\n    # ...\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"go-go-generate",children:"Go (go generate)"}),"\n",(0,i.jsx)(n.p,{children:"Add to your Go file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"//go:generate foryc ../schema.fdl --lang go --output .\npackage models\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"go generate ./...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rust-buildrs",children:"Rust (build.rs)"}),"\n",(0,i.jsxs)(n.p,{children:["Add to ",(0,i.jsx)(n.code,{children:"build.rs"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use std::process::Command;\n\nfn main() {\n    println!("cargo:rerun-if-changed=schema.fdl");\n\n    let status = Command::new("foryc")\n        .args(&["schema.fdl", "--rust_out", "src/generated"])\n        .status()\n        .expect("Failed to run foryc");\n\n    if !status.success() {\n        panic!("Fory IDL compilation failed");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cmake-c",children:"CMake (C++)"}),"\n",(0,i.jsxs)(n.p,{children:["Add to ",(0,i.jsx)(n.code,{children:"CMakeLists.txt"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:'find_program(FORY_COMPILER foryc)\n\nadd_custom_command(\n    OUTPUT ${CMAKE_CURRENT_SOURCE_DIR}/generated/example.h\n    COMMAND ${FORY_COMPILER}\n        ${CMAKE_CURRENT_SOURCE_DIR}/schema.fdl\n        --cpp_out ${CMAKE_CURRENT_SOURCE_DIR}/generated\n    DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/schema.fdl\n    COMMENT "Generating Fory IDL types"\n)\n\nadd_custom_target(generate_fory_idl DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/generated/example.h)\n\nadd_library(mylib ...)\nadd_dependencies(mylib generate_fory_idl)\ntarget_include_directories(mylib PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/generated)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"bazel",children:"Bazel"}),"\n",(0,i.jsxs)(n.p,{children:["Create a rule in ",(0,i.jsx)(n.code,{children:"BUILD"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'genrule(\n    name = "generate_fdl",\n    srcs = ["schema.fdl"],\n    outs = ["generated/example.h"],\n    cmd = "$(location //:fory_compiler) $(SRCS) --cpp_out $(RULEDIR)/generated",\n    tools = ["//:fory_compiler"],\n)\n\ncc_library(\n    name = "models",\n    hdrs = [":generate_fdl"],\n    # ...\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.h3,{id:"syntax-errors",children:"Syntax Errors"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Line 5, Column 12: Expected ';' after field declaration\n"})}),"\n",(0,i.jsx)(n.p,{children:"Fix: Check the indicated line for missing semicolons or syntax issues."}),"\n",(0,i.jsx)(n.h3,{id:"duplicate-type-names",children:"Duplicate Type Names"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Duplicate type name: User\n"})}),"\n",(0,i.jsx)(n.p,{children:"Fix: Ensure each enum and message has a unique name within the file."}),"\n",(0,i.jsx)(n.h3,{id:"duplicate-type-ids",children:"Duplicate Type IDs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Duplicate type ID 100: User and Order\n"})}),"\n",(0,i.jsx)(n.p,{children:"Fix: Assign unique type IDs to each type."}),"\n",(0,i.jsx)(n.h3,{id:"unknown-type-references",children:"Unknown Type References"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Unknown type 'Address' in Customer.address\n"})}),"\n",(0,i.jsx)(n.p,{children:"Fix: Define the referenced type before using it, or check for typos."}),"\n",(0,i.jsx)(n.h3,{id:"duplicate-field-numbers",children:"Duplicate Field Numbers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Duplicate field number 1 in User: name and id\n"})}),"\n",(0,i.jsx)(n.p,{children:"Fix: Assign unique field numbers within each message."}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"project/\n\u251c\u2500\u2500 fdl/\n\u2502   \u251c\u2500\u2500 common.fdl       # Shared types\n\u2502   \u251c\u2500\u2500 user.fdl         # User domain\n\u2502   \u2514\u2500\u2500 order.fdl        # Order domain\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 generated/       # Generated code (git-ignored)\n\u2514\u2500\u2500 build.gradle\n"})}),"\n",(0,i.jsx)(n.h3,{id:"version-control",children:"Version Control"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Track"}),": Fory IDL schema files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ignore"}),": Generated code (can be regenerated)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Add to ",(0,i.jsx)(n.code,{children:".gitignore"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# Generated Fory IDL code\nsrc/generated/\ngenerated/\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,i.jsx)(n.p,{children:"Always regenerate during builds:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# GitHub Actions example\nsteps:\n  - name: Install Fory IDL Compiler\n    run: pip install ./compiler\n\n  - name: Generate Types\n    run: foryc fdl/*.fdl --output src/generated\n\n  - name: Build\n    run: ./gradlew build\n"})}),"\n",(0,i.jsx)(n.h3,{id:"schema-evolution",children:"Schema Evolution"}),"\n",(0,i.jsx)(n.p,{children:"When modifying schemas:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Never reuse field numbers"})," - Mark as reserved instead"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Never change type IDs"})," - They're part of the binary format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add new fields"})," - Use new field numbers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Use ",(0,i.jsx)(n.code,{children:"optional"})]})," - For backward compatibility"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-protobuf",children:"message User [id=100] {\n    string id = 1;\n    string name = 2;\n    // Field 3 was removed, don't reuse\n    optional string email = 4;  // New field\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"command-not-found",children:"Command Not Found"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"foryc: command not found\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Ensure the compiler is installed and in your PATH:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install -e ./compiler\n# Or add to PATH\nexport PATH=$PATH:~/.local/bin\n"})}),"\n",(0,i.jsx)(n.h3,{id:"permission-denied",children:"Permission Denied"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Permission denied: ./generated\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Ensure write permissions on the output directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod -R u+w ./generated\n"})}),"\n",(0,i.jsx)(n.h3,{id:"import-errors-in-generated-code",children:"Import Errors in Generated Code"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Java:"})," Ensure Fory dependency is in your project:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.apache.fory</groupId>\n  <artifactId>fory-core</artifactId>\n  <version>${fory.version}</version>\n</dependency>\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python:"})," Ensure pyfory is installed:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install pyfory\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Go:"})," Ensure fory module is available:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"go get github.com/apache/fory/go/fory\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Rust:"})," Ensure fory crate is in ",(0,i.jsx)(n.code,{children:"Cargo.toml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[dependencies]\nfory = "x.y.z"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"C++:"})," Ensure Fory headers are in include path."]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>l});var i=r(67294);const s={},d=i.createContext(s);function l(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);