"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[51952],{31066:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var r=i(85893),s=i(11151);const t={title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},a=void 0,o={id:"guide/python/basic_serialization",title:"Basic Serialization",description:"This page covers basic serialization patterns in pyfory.",source:"@site/docs/guide/python/basic-serialization.md",sourceDirName:"guide/python",slug:"/guide/python/basic_serialization",permalink:"/docs/next/guide/python/basic_serialization",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/python/basic-serialization.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Basic Serialization",sidebar_position:2,id:"basic_serialization",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Configuration",permalink:"/docs/next/guide/python/configuration"},next:{title:"Type Registration & Security",permalink:"/docs/next/guide/python/type_registration"}},c={},l=[{value:"Basic Object Serialization",id:"basic-object-serialization",level:2},{value:"Custom Class Serialization",id:"custom-class-serialization",level:2},{value:"Reference Tracking &amp; Circular References",id:"reference-tracking--circular-references",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Serialization Methods",id:"serialization-methods",level:3},{value:"With Out-of-Band Buffers",id:"with-out-of-band-buffers",level:3},{value:"Performance Tips",id:"performance-tips",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This page covers basic serialization patterns in pyfory."}),"\n",(0,r.jsx)(n.h2,{id:"basic-object-serialization",children:"Basic Object Serialization"}),"\n",(0,r.jsx)(n.p,{children:"Serialize and deserialize Python objects with a simple API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import pyfory\n\n# Create Fory instance\nfory = pyfory.Fory(xlang=True)\n\n# Serialize any Python object\ndata = fory.dumps({\"name\": \"Alice\", \"age\": 30, \"scores\": [95, 87, 92]})\n\n# Deserialize back to Python object\nobj = fory.loads(data)\nprint(obj)  # {'name': 'Alice', 'age': 30, 'scores': [95, 87, 92]}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": ",(0,r.jsx)(n.code,{children:"dumps()"}),"/",(0,r.jsx)(n.code,{children:"loads()"})," are aliases for ",(0,r.jsx)(n.code,{children:"serialize()"}),"/",(0,r.jsx)(n.code,{children:"deserialize()"}),". Both APIs are identical, use whichever feels more intuitive."]}),"\n",(0,r.jsx)(n.h2,{id:"custom-class-serialization",children:"Custom Class Serialization"}),"\n",(0,r.jsx)(n.p,{children:"Fory automatically handles dataclasses and custom types:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import pyfory\nfrom dataclasses import dataclass\nfrom typing import List, Dict\n\n@dataclass\nclass Person:\n    name: str\n    age: int\n    scores: List[int]\n    metadata: Dict[str, str]\n\n# Python mode - supports all Python types including dataclasses\nfory = pyfory.Fory(xlang=False, ref=True)\nfory.register(Person)\nperson = Person("Bob", 25, [88, 92, 85], {"team": "engineering"})\ndata = fory.serialize(person)\nresult = fory.deserialize(data)\nprint(result)  # Person(name=\'Bob\', age=25, ...)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"reference-tracking--circular-references",children:"Reference Tracking & Circular References"}),"\n",(0,r.jsx)(n.p,{children:"Handle shared references and circular dependencies safely:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import pyfory\n\nf = pyfory.Fory(ref=True)  # Enable reference tracking\n\n# Handle circular references safely\nclass Node:\n    def __init__(self, value):\n        self.value = value\n        self.children = []\n        self.parent = None\n\nroot = Node("root")\nchild = Node("child")\nchild.parent = root  # Circular reference\nroot.children.append(child)\n\n# Serializes without infinite recursion\ndata = f.serialize(root)\nresult = f.deserialize(data)\nassert result.children[0].parent is result  # Reference preserved\n'})}),"\n",(0,r.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsx)(n.h3,{id:"serialization-methods",children:"Serialization Methods"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Serialize to bytes\ndata: bytes = fory.serialize(obj)\ndata: bytes = fory.dumps(obj)  # Alias\n\n# Deserialize from bytes\nobj = fory.deserialize(data)\nobj = fory.loads(data)  # Alias\n"})}),"\n",(0,r.jsx)(n.h3,{id:"with-out-of-band-buffers",children:"With Out-of-Band Buffers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Serialize with buffer callback\nbuffer_objects = []\ndata = fory.serialize(obj, buffer_callback=buffer_objects.append)\n\n# Deserialize with buffers\nbuffers = [obj.getbuffer() for obj in buffer_objects]\nobj = fory.deserialize(data, buffers=buffers)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Disable ",(0,r.jsx)(n.code,{children:"ref=True"})," if not needed"]}),": Reference tracking has overhead"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use type_id instead of typename"}),": Integer IDs are faster than string names"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reuse Fory instances"}),": Create once, use many times"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enable Cython"}),": Make sure ",(0,r.jsx)(n.code,{children:"ENABLE_FORY_CYTHON_SERIALIZATION=1"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Good: Reuse instance\nfory = pyfory.Fory()\nfor obj in objects:\n    data = fory.dumps(obj)\n\n# Bad: Create new instance each time\nfor obj in objects:\n    fory = pyfory.Fory()  # Wasteful!\n    data = fory.dumps(obj)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/next/guide/python/configuration",children:"Configuration"})," - Fory parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/next/guide/python/type_registration",children:"Type Registration"})," - Registration patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/next/guide/python/native_mode",children:"Python Native Mode"})," - Functions and lambdas"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>a});var r=i(67294);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);