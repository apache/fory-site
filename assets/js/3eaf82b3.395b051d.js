"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[9611],{96731:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var r=s(85893),n=s(11151);const t={title:"Configuration Options",sidebar_position:1,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},d=void 0,o={id:"guide/java/configuration",title:"Configuration Options",description:"This page documents all configuration options available through ForyBuilder.",source:"@site/versioned_docs/version-0.14/guide/java/configuration.md",sourceDirName:"guide/java",slug:"/guide/java/configuration",permalink:"/docs/0.14/guide/java/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/java/configuration.md",tags:[],version:"0.14",sidebarPosition:1,frontMatter:{title:"Configuration Options",sidebar_position:1,id:"configuration",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Java Serialization Guide",permalink:"/docs/0.14/guide/java/"},next:{title:"Basic Serialization",permalink:"/docs/0.14/guide/java/basic_serialization"}},a={},c=[{value:"ForyBuilder Options",id:"forybuilder-options",level:2},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Related Topics",id:"related-topics",level:2}];function l(e){const i={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.p,{children:["This page documents all configuration options available through ",(0,r.jsx)(i.code,{children:"ForyBuilder"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"forybuilder-options",children:"ForyBuilder Options"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Option Name"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Default Value"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"timeRefIgnored"})}),(0,r.jsxs)(i.td,{children:["Whether to ignore reference tracking of all time types registered in ",(0,r.jsx)(i.code,{children:"TimeSerializers"})," and subclasses of those types when ref tracking is enabled. If ignored, ref tracking of every time type can be enabled by invoking ",(0,r.jsx)(i.code,{children:"Fory#registerSerializer(Class, Serializer)"}),". For example, ",(0,r.jsx)(i.code,{children:"fory.registerSerializer(Date.class, new DateSerializer(fory, true))"}),". Note that enabling ref tracking should happen before serializer codegen of any types which contain time fields. Otherwise, those fields will still skip ref tracking."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"compressInt"})}),(0,r.jsx)(i.td,{children:"Enables or disables int compression for smaller size."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"compressLong"})}),(0,r.jsx)(i.td,{children:"Enables or disables long compression for smaller size."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"compressIntArray"})}),(0,r.jsx)(i.td,{children:"Enables or disables SIMD-accelerated compression for int arrays when values can fit in smaller data types. Requires Java 16+."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"compressLongArray"})}),(0,r.jsx)(i.td,{children:"Enables or disables SIMD-accelerated compression for long arrays when values can fit in smaller data types. Requires Java 16+."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"compressString"})}),(0,r.jsx)(i.td,{children:"Enables or disables string compression for smaller size."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"false"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"classLoader"})}),(0,r.jsxs)(i.td,{children:["The classloader should not be updated; Fory caches class metadata. Use ",(0,r.jsx)(i.code,{children:"LoaderBinding"})," or ",(0,r.jsx)(i.code,{children:"ThreadSafeFory"})," for classloader updates."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"Thread.currentThread().getContextClassLoader()"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"compatibleMode"})}),(0,r.jsxs)(i.td,{children:["Type forward/backward compatibility config. Also Related to ",(0,r.jsx)(i.code,{children:"checkClassVersion"})," config. ",(0,r.jsx)(i.code,{children:"SCHEMA_CONSISTENT"}),": Class schema must be consistent between serialization peer and deserialization peer. ",(0,r.jsx)(i.code,{children:"COMPATIBLE"}),": Class schema can be different between serialization peer and deserialization peer. They can add/delete fields independently. ",(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/schema_evolution",children:"See more"}),"."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"CompatibleMode.SCHEMA_CONSISTENT"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"checkClassVersion"})}),(0,r.jsxs)(i.td,{children:["Determines whether to check the consistency of the class schema. If enabled, Fory checks, writes, and checks consistency using the ",(0,r.jsx)(i.code,{children:"classVersionHash"}),". It will be automatically disabled when ",(0,r.jsx)(i.code,{children:"CompatibleMode#COMPATIBLE"})," is enabled. Disabling is not recommended unless you can ensure the class won't evolve."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"false"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"checkJdkClassSerializable"})}),(0,r.jsxs)(i.td,{children:["Enables or disables checking of ",(0,r.jsx)(i.code,{children:"Serializable"})," interface for classes under ",(0,r.jsx)(i.code,{children:"java.*"}),". If a class under ",(0,r.jsx)(i.code,{children:"java.*"})," is not ",(0,r.jsx)(i.code,{children:"Serializable"}),", Fory will throw an ",(0,r.jsx)(i.code,{children:"UnsupportedOperationException"}),"."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"registerGuavaTypes"})}),(0,r.jsxs)(i.td,{children:["Whether to pre-register Guava types such as ",(0,r.jsx)(i.code,{children:"RegularImmutableMap"}),"/",(0,r.jsx)(i.code,{children:"RegularImmutableList"}),". These types are not public API, but seem pretty stable."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"requireClassRegistration"})}),(0,r.jsx)(i.td,{children:"Disabling may allow unknown classes to be deserialized, potentially causing security risks."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"maxDepth"})}),(0,r.jsx)(i.td,{children:"Set max depth for deserialization, when depth exceeds, an exception will be thrown. This can be used to refuse deserialization DDOS attack."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"50"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"suppressClassRegistrationWarnings"})}),(0,r.jsx)(i.td,{children:"Whether to suppress class registration warnings. The warnings can be used for security audit, but may be annoying, this suppression will be enabled by default."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"metaShareEnabled"})}),(0,r.jsx)(i.td,{children:"Enables or disables meta share mode."}),(0,r.jsxs)(i.td,{children:[(0,r.jsx)(i.code,{children:"true"})," if ",(0,r.jsx)(i.code,{children:"CompatibleMode.Compatible"})," is set, otherwise false."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"scopedMetaShareEnabled"})}),(0,r.jsx)(i.td,{children:"Scoped meta share focuses on a single serialization process. Metadata created or identified during this process is exclusive to it and is not shared with by other serializations."}),(0,r.jsxs)(i.td,{children:[(0,r.jsx)(i.code,{children:"true"})," if ",(0,r.jsx)(i.code,{children:"CompatibleMode.Compatible"})," is set, otherwise false."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"metaCompressor"})}),(0,r.jsxs)(i.td,{children:["Set a compressor for meta compression. Note that the passed MetaCompressor should be thread-safe. By default, a ",(0,r.jsx)(i.code,{children:"Deflater"})," based compressor ",(0,r.jsx)(i.code,{children:"DeflaterMetaCompressor"})," will be used. Users can pass other compressor such as ",(0,r.jsx)(i.code,{children:"zstd"})," for better compression rate."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"DeflaterMetaCompressor"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"deserializeNonexistentClass"})}),(0,r.jsx)(i.td,{children:"Enables or disables deserialization/skipping of data for non-existent classes."}),(0,r.jsxs)(i.td,{children:[(0,r.jsx)(i.code,{children:"true"})," if ",(0,r.jsx)(i.code,{children:"CompatibleMode.Compatible"})," is set, otherwise false."]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"codeGenEnabled"})}),(0,r.jsx)(i.td,{children:"Disabling may result in faster initial serialization but slower subsequent serializations."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"asyncCompilationEnabled"})}),(0,r.jsx)(i.td,{children:"If enabled, serialization uses interpreter mode first and switches to JIT serialization after async serializer JIT for a class is finished."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"false"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"scalaOptimizationEnabled"})}),(0,r.jsx)(i.td,{children:"Enables or disables Scala-specific serialization optimization."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"false"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"copyRef"})}),(0,r.jsxs)(i.td,{children:["When disabled, the copy performance will be better. But fory deep copy will ignore circular and shared reference. Same reference of an object graph will be copied into different objects in one ",(0,r.jsx)(i.code,{children:"Fory#copy"}),"."]}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"true"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"serializeEnumByName"})}),(0,r.jsx)(i.td,{children:"When Enabled, fory serialize enum by name instead of ordinal."}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"false"})})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-java",children:"Fory fory = Fory.builder()\n  .withLanguage(Language.JAVA)\n  // enable reference tracking for shared/circular reference.\n  // Disable it will have better performance if no duplicate reference.\n  .withRefTracking(false)\n  // compress int for smaller size\n  .withIntCompressed(true)\n  // compress long for smaller size\n  .withLongCompressed(true)\n  .withCompatibleMode(CompatibleMode.SCHEMA_CONSISTENT)\n  // enable type forward/backward compatibility\n  // disable it for small size and better performance.\n  // .withCompatibleMode(CompatibleMode.COMPATIBLE)\n  // enable async multi-threaded compilation.\n  .withAsyncCompilation(true)\n  .build();\n"})}),"\n",(0,r.jsx)(i.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/schema_evolution",children:"Schema Evolution"})," - Compatible mode and meta sharing"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/compression",children:"Compression"})," - Int, long, and array compression details"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/0.14/guide/java/type_registration",children:"Type Registration"})," - Class registration options"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,n.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,i,s)=>{s.d(i,{Z:()=>o,a:()=>d});var r=s(67294);const n={},t=r.createContext(n);function d(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);