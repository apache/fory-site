"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[88826],{51317:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var i=r(85893),t=r(11151);const o={title:"Troubleshooting",sidebar_position:13,id:"troubleshooting",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},s=void 0,a={id:"guide/python/troubleshooting",title:"Troubleshooting",description:"This page covers common issues and their solutions.",source:"@site/docs/guide/python/troubleshooting.md",sourceDirName:"guide/python",slug:"/guide/python/troubleshooting",permalink:"/docs/next/guide/python/troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/python/troubleshooting.md",tags:[],version:"current",sidebarPosition:13,frontMatter:{title:"Troubleshooting",sidebar_position:13,id:"troubleshooting",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Migration Guide",permalink:"/docs/next/guide/python/migration"},next:{title:"Rust Serialization Guide",permalink:"/docs/next/guide/rust/"}},l={},c=[{value:"Common Issues",id:"common-issues",level:2},{value:"ImportError with Format Features",id:"importerror-with-format-features",level:3},{value:"Slow Serialization Performance",id:"slow-serialization-performance",level:3},{value:"Cross-Language Compatibility Issues",id:"cross-language-compatibility-issues",level:3},{value:"Circular Reference Errors or Duplicate Data",id:"circular-reference-errors-or-duplicate-data",level:3},{value:"Schema Evolution Not Working",id:"schema-evolution-not-working",level:3},{value:"Type Registration Errors in Strict Mode",id:"type-registration-errors-in-strict-mode",level:3},{value:"Debug Mode",id:"debug-mode",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Development Setup",id:"development-setup",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This page covers common issues and their solutions."}),"\n",(0,i.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsx)(n.h3,{id:"importerror-with-format-features",children:"ImportError with Format Features"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Solution: Install Row format support\npip install pyfory[format]\n\n# Or install from source with format support\npip install -e ".[format]"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"slow-serialization-performance",children:"Slow Serialization Performance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Check if Cython acceleration is enabled\nimport pyfory\nprint(pyfory.ENABLE_FORY_CYTHON_SERIALIZATION)  # Should be True\n\n# If False, Cython extension may not be compiled correctly\n# Reinstall with: pip install --force-reinstall --no-cache-dir pyfory\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cross-language-compatibility-issues",children:"Cross-Language Compatibility Issues"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Use explicit type registration with consistent naming\nf = pyfory.Fory(xlang=True)\nf.register(MyClass, typename="com.package.MyClass")  # Use same name in all languages\n'})}),"\n",(0,i.jsx)(n.h3,{id:"circular-reference-errors-or-duplicate-data",children:"Circular Reference Errors or Duplicate Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Enable reference tracking\nf = pyfory.Fory(ref=True)  # Required for circular references\n\n# Example with circular reference\nclass Node:\n    def __init__(self, value):\n        self.value = value\n        self.next = None\n\nnode1 = Node(1)\nnode2 = Node(2)\nnode1.next = node2\nnode2.next = node1  # Circular reference\n\ndata = f.dumps(node1)\nresult = f.loads(data)\nassert result.next.next is result  # Circular reference preserved\n"})}),"\n",(0,i.jsx)(n.h3,{id:"schema-evolution-not-working",children:"Schema Evolution Not Working"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Enable compatible mode for schema evolution\nf = pyfory.Fory(xlang=True, compatible=True)\n\n# Version 1: Original class\n@dataclass\nclass User:\n    name: str\n    age: int\n\nf.register(User, typename="User")\ndata = f.dumps(User("Alice", 30))\n\n# Version 2: Add new field (backward compatible)\n@dataclass\nclass User:\n    name: str\n    age: int\n    email: str = "unknown@example.com"  # New field with default\n\n# Can still deserialize old data\nuser = f.loads(data)\nprint(user.email)  # "unknown@example.com"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"type-registration-errors-in-strict-mode",children:"Type Registration Errors in Strict Mode"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Register all custom types before serialization\nf = pyfory.Fory(strict=True)\n\n# Must register before use\nf.register(MyClass, type_id=100)\nf.register(AnotherClass, type_id=101)\n\n# Or disable strict mode (NOT recommended for production)\nf = pyfory.Fory(strict=False)  # Use only in trusted environments\n"})}),"\n",(0,i.jsx)(n.h2,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,i.jsx)(n.p,{children:"Set environment variable BEFORE importing pyfory to disable Cython for debugging:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nos.environ['ENABLE_FORY_CYTHON_SERIALIZATION'] = '0'\nimport pyfory  # Now uses pure Python implementation\n\n# This is useful for:\n# 1. Debugging protocol issues\n# 2. Understanding serialization behavior\n# 3. Development without recompiling Cython\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"Handle common serialization errors gracefully:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import pyfory\nfrom pyfory.error import TypeUnregisteredError, TypeNotCompatibleError\n\nfory = pyfory.Fory(strict=True)\n\ntry:\n    data = fory.dumps(my_object)\nexcept TypeUnregisteredError as e:\n    print(f"Type not registered: {e}")\n    # Register the type and retry\n    fory.register(type(my_object), type_id=100)\n    data = fory.dumps(my_object)\nexcept Exception as e:\n    print(f"Serialization failed: {e}")\n\ntry:\n    obj = fory.loads(data)\nexcept TypeNotCompatibleError as e:\n    print(f"Schema mismatch: {e}")\n    # Handle version mismatch\nexcept Exception as e:\n    print(f"Deserialization failed: {e}")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"development-setup",children:"Development Setup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'git clone https://github.com/apache/fory.git\ncd fory/python\n\n# Install dependencies\npip install -e ".[dev,format]"\n\n# Run tests\npytest -v -s .\n\n# Run specific test\npytest -v -s pyfory/tests/test_serializer.py\n\n# Format code\nruff format .\nruff check --fix .\n'})}),"\n",(0,i.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/next/guide/python/configuration",children:"Configuration"})," - Fory parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/next/guide/python/type_registration",children:"Type Registration"})," - Registration best practices"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/next/guide/python/security",children:"Security"})," - Security configuration"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>s});var i=r(67294);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);