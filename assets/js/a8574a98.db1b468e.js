"use strict";(self.webpackChunkfory_site=self.webpackChunkfory_site||[]).push([[5646],{58767:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=s(85893),r=s(11151);const a={title:"Cross-Language Serialization",sidebar_position:80,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},t=void 0,l={id:"guide/go/cross_language",title:"Cross-Language Serialization",description:"Fory Go enables seamless data exchange with Java, Python, C++, Rust, and JavaScript. This guide covers cross-language compatibility and type mapping.",source:"@site/versioned_docs/version-0.15/guide/go/cross-language.md",sourceDirName:"guide/go",slug:"/guide/go/cross_language",permalink:"/docs/guide/go/cross_language",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/fory-site/tree/main/docs/guide/go/cross-language.md",tags:[],version:"0.15",sidebarPosition:80,frontMatter:{title:"Cross-Language Serialization",sidebar_position:80,id:"cross_language",license:'Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file distributed with\nthis work for additional information regarding copyright ownership.\nThe ASF licenses this file to You under the Apache License, Version 2.0\n(the "License"); you may not use this file except in compliance with\nthe License.  You may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n'},sidebar:"docsSidebar",previous:{title:"Schema Evolution",permalink:"/docs/guide/go/schema_evolution"},next:{title:"Code Generation",permalink:"/docs/guide/go/codegen"}},o={},c=[{value:"Enabling Cross-Language Mode",id:"enabling-cross-language-mode",level:2},{value:"Type Registration for Cross-Language",id:"type-registration-for-cross-language",level:2},{value:"Go",id:"go",level:3},{value:"Java",id:"java",level:3},{value:"Python",id:"python",level:3},{value:"Type Mapping",id:"type-mapping",level:2},{value:"Field Ordering",id:"field-ordering",level:2},{value:"Examples",id:"examples",level:2},{value:"Go to Java",id:"go-to-java",level:3},{value:"Python to Go",id:"python-to-go",level:3},{value:"Nested Structures",id:"nested-structures",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Field Name Mismatch",id:"field-name-mismatch",level:3},{value:"Type Interpretation",id:"type-interpretation",level:3},{value:"Nil vs Null",id:"nil-vs-null",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Topics",id:"related-topics",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Fory Go enables seamless data exchange with Java, Python, C++, Rust, and JavaScript. This guide covers cross-language compatibility and type mapping."}),"\n",(0,i.jsx)(n.h2,{id:"enabling-cross-language-mode",children:"Enabling Cross-Language Mode"}),"\n",(0,i.jsx)(n.p,{children:"Cross-language (xlang) mode must be explicitly enabled:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"f := fory.New(fory.WithXlang(true))\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-registration-for-cross-language",children:"Type Registration for Cross-Language"}),"\n",(0,i.jsx)(n.p,{children:"Use consistent type IDs across all languages:"}),"\n",(0,i.jsx)(n.h3,{id:"go",children:"Go"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID   int64\n    Name string\n}\n\nf := fory.New(fory.WithXlang(true))\nf.RegisterStruct(User{}, 1)\ndata, _ := f.Serialize(&User{ID: 1, Name: "Alice"})\n'})}),"\n",(0,i.jsx)(n.h3,{id:"java",children:"Java"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class User {\n    public long id;\n    public String name;\n}\nFory fory = Fory.builder().withXlang(true).build();\nfory.register(User.class, 1);\nUser user = fory.deserialize(data, User.class);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from dataclasses import dataclass\nimport pyfory\n\n@dataclass\nclass User:\n    id: pyfory.Int64Type\n    name: str\n\nfory = pyfory.Fory(xlang=True)\nfory.register(User, type_id=1)\nuser = fory.deserialize(data)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-mapping",children:"Type Mapping"}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/specification/xlang_type_mapping",children:"Type Mapping Specification"})," for detailed type mappings across all languages."]}),"\n",(0,i.jsx)(n.h2,{id:"field-ordering",children:"Field Ordering"}),"\n",(0,i.jsx)(n.p,{children:"Cross-language serialization requires consistent field ordering. Fory sorts fields by their snake_case names alphabetically."}),"\n",(0,i.jsx)(n.p,{children:"Go field names are converted to snake_case for sorting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type Example struct {\n    UserID    int64   // -> user_id\n    FirstName string  // -> first_name\n    Age       int32   // -> age\n}\n\n// Sorted order: age, first_name, user_id\n"})}),"\n",(0,i.jsx)(n.p,{children:"Ensure other languages use matching field names that produce the same snake_case ordering, or use field IDs for explicit control:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type Example struct {\n    UserID    int64  `fory:"id=0"`\n    FirstName string `fory:"id=1"`\n    Age       int32  `fory:"id=2"`\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h3,{id:"go-to-java",children:"Go to Java"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Go (Serializer)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type Order struct {\n    ID       int64\n    Customer string\n    Total    float64\n    Items    []string\n}\n\nf := fory.New(fory.WithXlang(true))\nf.RegisterStruct(Order{}, 1)\n\norder := &Order{\n    ID:       12345,\n    Customer: "Alice",\n    Total:    99.99,\n    Items:    []string{"Widget", "Gadget"},\n}\ndata, _ := f.Serialize(order)\n// Send \'data\' to Java service\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Java (Deserializer)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Order {\n    public long id;\n    public String customer;\n    public double total;\n    public List<String> items;\n}\n\nFory fory = Fory.builder().withXlang(true).build();\nfory.register(Order.class, 1);\n\nOrder order = fory.deserialize(data, Order.class);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"python-to-go",children:"Python to Go"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python (Serializer)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from dataclasses import dataclass\nimport pyfory\n\n@dataclass\nclass Message:\n    id: pyfory.Int64Type\n    content: str\n    timestamp: pyfory.Int64Type\n\nfory = pyfory.Fory(xlang=True)\nfory.register(Message, type_id=1)\n\nmsg = Message(id=1, content="Hello from Python", timestamp=1234567890)\ndata = fory.serialize(msg)\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Go (Deserializer)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type Message struct {\n    ID        int64\n    Content   string\n    Timestamp int64\n}\n\nf := fory.New(fory.WithXlang(true))\nf.RegisterStruct(Message{}, 1)\n\nvar msg Message\nf.Deserialize(data, &msg)\nfmt.Println(msg.Content)  // "Hello from Python"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"nested-structures",children:"Nested Structures"}),"\n",(0,i.jsx)(n.p,{children:"Cross-language nested structures require all types to be registered:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Go"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type Address struct {\n    Street  string\n    City    string\n    Country string\n}\n\ntype Company struct {\n    Name    string\n    Address Address\n}\n\nf := fory.New(fory.WithXlang(true))\nf.RegisterStruct(Address{}, 1)\nf.RegisterStruct(Company{}, 2)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Java"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Address {\n    public String street;\n    public String city;\n    public String country;\n}\n\npublic class Company {\n    public String name;\n    public Address address;\n}\n\nfory.register(Address.class, 1);\nfory.register(Company.class, 2);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsx)(n.h3,{id:"field-name-mismatch",children:"Field Name Mismatch"}),"\n",(0,i.jsx)(n.p,{children:"Go uses PascalCase, other languages may use camelCase or snake_case. Fields are matched by their snake_case conversion:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"// Go\ntype User struct {\n    FirstName string  // -> first_name\n}\n\n// Java - field name converted to snake_case must match\npublic class User {\n    public String firstName;  // -> first_name (matches)\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"type-interpretation",children:"Type Interpretation"}),"\n",(0,i.jsx)(n.p,{children:"Go unsigned types map to Java signed types with the same bit pattern:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"var value uint64 = 18446744073709551615  // Max uint64\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Java's ",(0,i.jsx)(n.code,{children:"long"})," holds the same bits but interprets as -1. Use ",(0,i.jsx)(n.code,{children:"Long.toUnsignedString()"})," in Java if unsigned interpretation is needed."]}),"\n",(0,i.jsx)(n.h3,{id:"nil-vs-null",children:"Nil vs Null"}),"\n",(0,i.jsx)(n.p,{children:"Go nil slices/maps serialize differently based on configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"var slice []string = nil\n// In xlang mode: serializes based on nullable configuration\n"})}),"\n",(0,i.jsx)(n.p,{children:"Ensure other languages handle null appropriately."}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use consistent type IDs"}),": Same numeric ID for the same type across all languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Register all types"}),": Including nested struct types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Match field ordering"}),": Use same snake_case names or explicit field IDs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test cross-language"}),": Run integration tests early and often"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle type differences"}),": Be aware of signed/unsigned interpretation differences"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"related-topics",children:"Related Topics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/guide/go/type_registration",children:"Type Registration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/guide/go/supported_types",children:"Supported Types"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/guide/go/schema_evolution",children:"Schema Evolution"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/specification/xlang_serialization_spec",children:"Xlang Serialization Specification"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/specification/xlang_type_mapping",children:"Type Mapping Specification"})}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>t});var i=s(67294);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);